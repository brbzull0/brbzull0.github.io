


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>WCCP Service Configuration &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/override.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Forward Proxy" href="../transparent-forward-proxying.en.html" />
    <link rel="prev" title="WCCP Configuration" href="wccp-configuration.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.en.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/index.en.html">Installing Traffic Server</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.en.html">Proxy Cache Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../session-protocol.en.html">Session Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cache-basics.en.html">HTTP Proxy Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../redirecting-http-requests.en.html">Reverse Proxy and HTTP Redirects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../explicit-forward-proxying.en.html">Explicit Proxy Caching</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../transparent-proxy.en.html">Transparent Proxying</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="build.en.html">Building ATS for transparency</a></li>
<li class="toctree-l4"><a class="reference internal" href="bridge.en.html">Inline on a Linux Bridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="router-inline.en.html">Inline on a Linux router</a></li>
<li class="toctree-l4"><a class="reference internal" href="wccp-configuration.en.html">WCCP Configuration</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">WCCP Service Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../transparent-forward-proxying.en.html">Forward Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hierarchical-caching.en.html">Hierarchical Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proxy-protocol.en.html">Proxy Protocol</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../interaction/index.en.html">Interacting with Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/index.en.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/index.en.html">Cache Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins/index.en.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.en.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../monitoring/index.en.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuring-traffic-server.en.html">Configuring Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../layer-4-routing.en.html">Layer 4 Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../performance/index.en.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../files/index.en.html">Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonrpc/index.en.html">JSONRPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.en.html#audience">Audience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/index.en.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.en.html">Administrator’s Guide</a> &raquo;</li>
        
          <li><a href="../index.en.html">Proxy Cache Configuration</a> &raquo;</li>
        
          <li><a href="../transparent-proxy.en.html">Transparent Proxying</a> &raquo;</li>
        
      <li>WCCP Service Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/admin-guide/configuration/transparent-proxy/wccp-service-config.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="wccp-service-configuration">
<span id="admin-wccp-service-config"></span><h1>WCCP Service Configuration<a class="headerlink" href="#wccp-service-configuration" title="Permalink to this headline">¶</a></h1>
<p>The service definition file is used by <strong class="program">traffic_wccp</strong> and
<strong class="program">traffic_server</strong> directly.</p>
<p>The elements in the security definition file are inspired by the
<a class="reference external" href="http://tools.ietf.org/html/draft-mclaggan-wccp-v2rev1-00">WCCP RFC (8/2012)</a>.
There is also an older version of the RFC that shows up commonly in search results,
<a class="reference external" href="https://tools.ietf.org/id/draft-wilson-wrec-wccp-v2-01.txt">WCCP (4/2001)</a>,
and was the RFC reference used in the original WCCP support for Traffic Server several
years ago.</p>
<p>A sample service group file is included in the source tree under
<strong class="program">traffic_wccp</strong>.</p>
<div class="section" id="security-section">
<h2>Security Section<a class="headerlink" href="#security-section" title="Permalink to this headline">¶</a></h2>
<p>In the security section, you can define a password shared between the WCCP Client and the WCCP router.  This password is used to encrypt the WCCP traffic.  It is optional, but highly recommended.</p>
<p>Attributes in this section</p>
<ul class="simple">
<li><p>option  - Must be set to MD5 if you want to encrypt your WCCP traffic</p></li>
<li><p>key – The same password that you set with the associated WCCP router.</p></li>
</ul>
</div>
<div class="section" id="services-section">
<h2>Services Section<a class="headerlink" href="#services-section" title="Permalink to this headline">¶</a></h2>
<p>In the services section you can define a list of service groups.  Each top level entry is a separate service group.</p>
<p>Service group attributes include</p>
<ul class="simple">
<li><p>name – A name for the service.  Not used in the rest of the WCCP processing.</p></li>
<li><p>description – A description of the service.  Again, not used in the rest of the WCCP processing.</p></li>
<li><p>id - The security group ID.  It must match the service group ID that has been defined on the associated WCCP router.  This is the true service group identifier from the WCCP perspective.</p></li>
<li><p>type – This defines the type of service group either “STANDARD” or “DYNAMIC”.  There is one standard defined service group, HTTP with the id of 0.  The 4/2001 RFC indicates that id’s 0-50 are reserved for well known service groups.  But more recent 8/2012 RFC indicates that values 0 through 254 are valid service id’s for dynamic services.  To avoid differences with older WCCP routers, you probably want to avoid dynamic service ID’s 0 through 50.</p></li>
<li><p>priority – This is a value from 0 to 255.  The higher number is a higher priority.  Well known (STANDARD) services are set to a value of 240.  If there are multiple service groups that could match a given packet, the higher priority service group is applied. RFC  For example, you have service group 100 defined for packets with destination port 80, and service group 101 defined for packets with source port 1024.  For a packet with destination port set to 80 and source port set to 1024, the priorities of the service groups would need to be compared to determine which service group applies.</p></li>
<li><p>protocol – This is IP protocol number that should match.  Generally this is set to 6 (TCP) or 17 (UDP).</p></li>
<li><p>assignment – WCCP supports multiple WCCP clients supporting a single service group.  However, the current WCCP client implementation in Traffic Server assumes there is only a single WCCP client, and so creates assignment tables that will direct all traffic to that WCCP client.  The assignment type is either hash or mask, and if it is not set, it defaults to hash.  If Traffic Server ever supports more than one cache, it will likely only support a balanced hash assignment.  The mask/value assignment seems to be better suited to situations where the traffic needs to be more strongly controlled.</p></li>
<li><p>primary-hash – This is the element of the packet that is used to compute the primary key.  The value options are src_ip, dst_ip, src_port, or  dst_port. This entry is a list, so multiple values can be specified.  In that case, all the specified packet attributes will be used to compute the hash bucket.  In the current implementation, the primary hash value does not matter, since the client always generates a hash table that directs all matching traffic to it.  But if multiple clients are ever supported, knowledge of the local traffic distribution could be used to pick a packet attribute that will better spread traffic over the WCCP clients.</p></li>
<li><p>alt-hash – The protocol supports a two level hash.  This attribute is a list with the same value options as for primary-hash.  Again, since the current Traffic Server implementation only creates assignment tables to a single client, specifying the alt-hash values does nothing.</p></li>
<li><p>ports – This is a list of port values.  Up to 8 port values may be included in a service group definition.</p></li>
<li><p>port-type – This attribute can have the value of src or dst.  If not specified, it defaults to dst.  It indicates whether the port values should be interpreted as source ports or destination ports.</p></li>
<li><p>forward – This is a list.  The list of the values can be GRE or L2.  This advertises how the client wants to process WCCP packets.  GRE means that the packets will be delivered in a GRE tunnel.  This is the default.  L2 means that the client is on the same network and can get traffic delivered to it from the router by L2 routing (MAC addresses).</p></li>
<li><p>return – The WCCP protocol allows a WCCP client to decline a packet and return it back to the router.  The current WCCP client implementation never does this.  The value options are the same as for the forward attribute.</p></li>
<li><p>routers – This is the list of router addresses the WCCP client communicates with.  The WCCP protocols allows for multiple WCCP routers to be involved in a service group.  The multiple router scenario has at most been lightly tested in the Traffic Server implementation.</p></li>
<li><p>proc-name – This attribute is only used by traffic_wccp.  It is not used in the traffic_server WCCP support.  This is the path to a process’ PID file.  The service group is advertised to the WCCP router if the process identified in the PID file is currently operational.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../transparent-forward-proxying.en.html" class="btn btn-neutral float-right" title="Forward Proxy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="wccp-configuration.en.html" class="btn btn-neutral float-left" title="WCCP Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, dev@trafficserver.apache.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>