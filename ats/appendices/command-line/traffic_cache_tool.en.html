


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>traffic_cache_tool &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="traffic_crashlog" href="traffic_crashlog.en.html" />
    <link rel="prev" title="cvtremappi" href="cvtremappi.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Appendices</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Command Line Utilities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cvtremappi.en.html">cvtremappi</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">traffic_cache_tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="traffic_crashlog.en.html">traffic_crashlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_ctl.en.html">traffic_ctl</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_ctl_jsonrpc.en.html">traffic_ctl</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_layout.en.html">traffic_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_logcat.en.html">traffic_logcat</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_logstats.en.html">traffic_logstats</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_manager.en.html">traffic_manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_server.en.html">traffic_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_top.en.html">traffic_top</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_via.en.html">traffic_via</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_wccp.en.html">traffic_wccp</a></li>
<li class="toctree-l3"><a class="reference internal" href="tspush.en.html">tspush</a></li>
<li class="toctree-l3"><a class="reference internal" href="tsxs.en.html">tsxs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../faq.en.html">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.en.html#troubleshooting-tips">Troubleshooting Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.en.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../http-status-codes.en.html">HTTP Status Codes</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.en.html">Appendices</a> &raquo;</li>
        
          <li><a href="index.en.html">Command Line Utilities</a> &raquo;</li>
        
      <li>traffic_cache_tool</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/appendices/command-line/traffic_cache_tool.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="traffic-cache-tool">
<span id="id1"></span><h1>traffic_cache_tool<a class="headerlink" href="#traffic-cache-tool" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">traffic_cache_tool</strong> [OPTIONS] COMMAND [SUBCOMMAND …] [OPTIONS]</p>
</div>
<div class="section" id="description">
<span id="traffic-cache-tool-commands"></span><h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">traffic_cache_tool</strong> is designed to interact with the Traffic Server cache both for inspection and
modification. It uses a nested command keyword style for specifying operations. There are some
global options that apply to all commands. These should be specified before any command. These can
be abbreviated to any unique initial substring (e.g. “–sp” for “–span”).</p>
<dl class="std option">
<dt id="cmdoption-traffic_cache_tool-help">
<span id="cmdoption-traffic-cache-tool-help"></span><code class="sig-name descname">--help</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-traffic_cache_tool-help" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a brief usage message along with the current command hierarchy.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-traffic_cache_tool-spans">
<span id="cmdoption-traffic-cache-tool-spans"></span><code class="sig-name descname">--spans</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-traffic_cache_tool-spans" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the span (storage) configuration. This can be a device, a cache directory, or a
configuration file in the form of <a class="reference internal" href="../../admin-guide/files/storage.config.en.html#std-configfile-storage.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">storage.config</span></code></a>. In the latter case all devices listed
in the configuration file become active.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-traffic_cache_tool-volumes">
<span id="cmdoption-traffic-cache-tool-volumes"></span><code class="sig-name descname">--volumes</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-traffic_cache_tool-volumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the volume configuration file in the format of <a class="reference internal" href="../../admin-guide/files/volume.config.en.html#std-configfile-volume.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">volume.config</span></code></a>. This is important
primarily for allocation operations where having the volume configuration is needed in order to
properly allocate storage in spans to specific volumes.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-traffic_cache_tool-write">
<span id="cmdoption-traffic-cache-tool-write"></span><code class="sig-name descname">--write</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-traffic_cache_tool-write" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable writing to storage devices. If this flag is not present then all storage will be opened
read only and no operation will write to any storage device. This makes “dry run” the default and
actual changes require specifying this flag.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-traffic_cache_tool-aos">
<span id="cmdoption-traffic-cache-tool-aos"></span><code class="sig-name descname">--aos</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-traffic_cache_tool-aos" title="Permalink to this definition">¶</a></dt>
<dd><p>Specific the average object size in bytes. This is used in various computations. It is identical
to <a class="reference internal" href="../../admin-guide/files/records.config.en.html#proxy-config-cache-min-average-object-size" title="records.config"><code class="xref ts ts-cv docutils literal notranslate"><span class="pre">proxy.config.cache.min_average_object_size</span></code></a>.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-traffic_cache_tool-input">
<span id="cmdoption-traffic-cache-tool-input"></span><code class="sig-name descname">--input</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-traffic_cache_tool-input" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the input file or disk.</p>
</dd></dl>

</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code></dt><dd><p>Search the spans for stripe data and display it. This is potentially slow as large sections of
the disk may need to be read to find the stripe headers.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">stripes</span></code></dt><dd><p>Print internal stripe metadata.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clear</span></code></dt><dd><p>Clear all the spans by writing updated span headers.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">span</span></code></dt><dd><p>Clears an specific span and it’s stripes. The span to be cleared is specified via <code class="docutils literal notranslate"><span class="pre">--device</span></code></p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dir_check</span></code></dt><dd><p>Perform diagnostics on the stripe directories.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">full</span></code></dt><dd><p>Full check of the directories.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">freelist</span></code></dt><dd><p>Validate the directory free lists.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bucket_chain</span></code></dt><dd><p>Validate the bucket chains in the directories.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">volumes</span></code></dt><dd><p>Compute storage allocation to stripes based on the volume configuration and print it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">alloc</span></code></dt><dd><p>Allocate storage to stripes, updating the span and stripe headers.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">free</span></code></dt><dd><p>Allocate only free (unused) storage to volumes, updating span and stripe headers as needed.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init</span></code></dt><dd><p>Initializes an uninitialized span and creates stripes on that span according to the volume and storage configuration
The span to be initialized can be passed via <code class="docutils literal notranslate"><span class="pre">--input</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">find</span></code></dt><dd><p>Determines the stripe in disk cache where the content corresponding to the provided URL may be cached.
This command takes an input file which lists all the urls for which the stripe assignment needs to be determined.</p>
</dd>
</dl>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>List the basic span data.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">traffic_cache_tool</span> <span class="o">--</span><span class="n">spans</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">config</span> <span class="nb">list</span>
</pre></div>
</div>
<p>Allocate unused storage space.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">traffic_cache_tool</span> \
   <span class="o">--</span><span class="n">spans</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">config</span> \
   <span class="o">--</span><span class="n">volumes</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">volume</span><span class="o">.</span><span class="n">config</span> \
   <span class="n">alloc</span> <span class="n">free</span>
</pre></div>
</div>
<p>Clear all spans.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">traffic_cache_tool</span> \
 <span class="o">--</span><span class="n">spans</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">config</span> \
 <span class="o">--</span><span class="n">volumes</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">volume</span><span class="o">.</span><span class="n">config</span> \
 <span class="n">clear</span>
</pre></div>
</div>
<p>Clear a single span.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">traffic_cache_tool</span> \
<span class="o">--</span><span class="n">span</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">config</span> \
<span class="o">--</span><span class="n">volume</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">volume</span><span class="o">.</span><span class="n">config</span> \
<span class="n">clear</span> <span class="n">span</span> <span class="o">--</span><span class="n">device</span> <span class="s2">&quot;/dev/sdb3&quot;</span> <span class="o">--</span><span class="n">write</span>
</pre></div>
</div>
<p>Initialize a new span.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">traffic_cache_tool</span> \
<span class="o">--</span><span class="n">span</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">config</span> \
<span class="o">--</span><span class="n">volume</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">volume</span><span class="o">.</span><span class="n">config</span> \
<span class="n">init</span> <span class="o">--</span><span class="nb">input</span> <span class="s2">&quot;/dev/sdb3&quot;</span> <span class="o">--</span><span class="n">write</span>
</pre></div>
</div>
<p>Find Stripe Assignment.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">traffic_cache_tool</span> \
<span class="o">--</span><span class="n">span</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">storage</span><span class="o">.</span><span class="n">config</span> \
<span class="o">--</span><span class="n">volume</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">trafficserver</span><span class="o">/</span><span class="n">volume</span><span class="o">.</span><span class="n">config</span> \
<span class="n">init</span> <span class="o">--</span><span class="nb">input</span> <span class="s2">&quot;/home/user/urls.txt&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p><em class="manpage">storage.config(5)</em>
<em class="manpage">volume.config(5)</em>,</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="traffic_crashlog.en.html" class="btn btn-neutral float-right" title="traffic_crashlog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cvtremappi.en.html" class="btn btn-neutral float-left" title="cvtremappi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, dev@trafficserver.apache.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>