


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Log Destinations &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Formatting Log Files" href="formatting.en.html" />
    <link rel="prev" title="Understanding Traffic Server Logs" href="understanding.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.en.html">Installing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.en.html">Proxy Cache Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interaction/index.en.html">Interacting with Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.en.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.en.html">Cache Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugins</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Logging</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="understanding.en.html">Understanding Traffic Server Logs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Log Destinations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#local-logging">Local Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remote-logging">Remote Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="formatting.en.html">Formatting Log Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="cache-results.en.html">Logging Cache Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="rotation.en.html">Log Rotation and Retention</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.en.html">Log Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.en.html">Configuration Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../monitoring/index.en.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuring-traffic-server.en.html">Configuring Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layer-4-routing.en.html">Layer 4 Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance/index.en.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/index.en.html">Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonrpc/index.en.html">JSONRPC API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.en.html#audience">Audience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.en.html">Administrator’s Guide</a> &raquo;</li>
        
          <li><a href="index.en.html">Logging</a> &raquo;</li>
        
      <li>Log Destinations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/admin-guide/logging/destinations.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="log-destinations">
<span id="admin-logging-destinations"></span><h1>Log Destinations<a class="headerlink" href="#log-destinations" title="Permalink to this headline">¶</a></h1>
<p>Traffic Server enables you to control where event log files are located, if and how they
will be rotated, and how much space they can consume. The first of these topics
is covered in this section, while the latter two will be discussed separately
in <a class="reference internal" href="rotation.en.html#admin-logging-rotation-retention"><span class="std std-ref">Log Rotation and Retention</span></a>.</p>
<p>Two classes of destinations are provided by Traffic Server currently: local and remote.
Local logging involves storing log data onto filesystems locally mounted on the
same system as the Traffic Server processes themselves and are covered below in
<a class="reference internal" href="#admin-logging-destinations-local"><span class="std std-ref">Local Logging</span></a>, while remote logging options involving
<em class="manpage">syslog</em>, are covered below in <a class="reference internal" href="#admin-logging-destinations-remote"><span class="std std-ref">Remote Logging</span></a>.</p>
<div class="section" id="local-logging">
<span id="admin-logging-destinations-local"></span><h2>Local Logging<a class="headerlink" href="#local-logging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="log-directory-configuration">
<span id="admin-logging-directory"></span><h3>Log Directory Configuration<a class="headerlink" href="#log-directory-configuration" title="Permalink to this headline">¶</a></h3>
<p>All local logging output is stored within a single base directory.
Individual log file configurations may optionally append
subdirectories to this base path. This location is adjusted with
<a class="reference internal" href="../files/records.config.en.html#proxy-config-log-logfile-dir" title="records.config"><code class="xref ts ts-cv docutils literal notranslate"><span class="pre">proxy.config.log.logfile_dir</span></code></a> in <a class="reference internal" href="../files/records.config.en.html#std:configfile-records.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">records.config</span></code></a>.</p>
<p>This configuration may specify either an absolute path on the host (if it
begins with <code class="docutils literal notranslate"><span class="pre">/</span></code>) or a path relative to the Traffic Server installation directory (any
setting which does not begin with <code class="docutils literal notranslate"><span class="pre">/</span></code>).</p>
<p>Traffic Server will need to be restarted, or you will need to run
<a class="reference internal" href="../../appendices/command-line/traffic_ctl_jsonrpc.en.html#cmdoption-traffic-ctl-config-arg-reload"><code class="xref std std-option docutils literal notranslate"><span class="pre">traffic_ctl</span> <span class="pre">config</span> <span class="pre">reload</span></code></a> for changes to the logging directory to
take effect.</p>
</div>
<div class="section" id="local-log-formats">
<h3>Local Log Formats<a class="headerlink" href="#local-log-formats" title="Permalink to this headline">¶</a></h3>
<p>Local Traffic Server logs may be emitted in three different formats. The optimal format
depends on how administrators intend to use the log data. The first two
options, <a class="reference internal" href="#admin-logging-ascii"><span class="std std-ref">ASCII Log Files</span></a> and <a class="reference internal" href="#admin-logging-binary"><span class="std std-ref">Binary Log Files</span></a> offer
persistent storage of log data, which may be accessed and analyzed by other
programs at any time (until the log file’s configured rotation/retention
policies, as discussed later in <a class="reference internal" href="rotation.en.html#admin-logging-rotation-retention"><span class="std std-ref">Log Rotation and Retention</span></a>).</p>
<p>The third option, <a class="reference internal" href="#admin-logging-pipes"><span class="std std-ref">Named Pipes</span></a> offers no persistent storage of
log data, but rather a live stream of logged events which may be read and
interpreted by external processes as they occur.</p>
<div class="section" id="ascii-log-files">
<span id="admin-logging-ascii"></span><h4>ASCII Log Files<a class="headerlink" href="#ascii-log-files" title="Permalink to this headline">¶</a></h4>
<p>ASCII Traffic Server logs are human-readable, plain-text files with output that is easily
read directly and without the required aid of any additional processing or
conversion tools. By default, log files in this format will have a <code class="docutils literal notranslate"><span class="pre">.log</span></code>
extension.</p>
</div>
<div class="section" id="binary-log-files">
<span id="admin-logging-binary"></span><h4>Binary Log Files<a class="headerlink" href="#binary-log-files" title="Permalink to this headline">¶</a></h4>
<p>Binary log file output from Traffic Server avoids the conversion overhead of internal
Traffic Server data structures to ASCII strings, but any use of these files by external
programs (or just reading by a human) will first require the use of a converter
application. Binary log files by default will have a <code class="docutils literal notranslate"><span class="pre">.blog</span></code> file extension.</p>
</div>
<div class="section" id="named-pipes">
<span id="admin-logging-pipes"></span><h4>Named Pipes<a class="headerlink" href="#named-pipes" title="Permalink to this headline">¶</a></h4>
<p>In addition to ASCII and binary file modes for custom log formats, Traffic Server
can output log entries in <code class="docutils literal notranslate"><span class="pre">ASCII_PIPE</span></code> mode. This mode writes the log entries
to a UNIX named pipe (a buffer in memory). Other processes may read from this
named pipe using standard I/O functions.</p>
<p>The advantage of this mode is that Traffic Server does not need to write the entries to
disk, which frees disk space and bandwidth for other tasks. When the buffer is
full, Traffic Server drops log entries and issues an error message indicating how many
entries were dropped. Because Traffic Server only writes complete log entries to the
pipe, only full records are dropped.</p>
<p>Output to named pipes is always, as the mode’s name implies, in ASCII format.
There is no option for logging binary format log data to a named pipe.</p>
<p>For ASCII pipes there exists an option to set the <code class="docutils literal notranslate"><span class="pre">pipe_buffer_size</span></code> in
the YAML config.</p>
</div>
<div class="section" id="deciding-between-ascii-or-binary-output">
<span id="admin-logging-ascii-v-binary"></span><h4>Deciding Between ASCII or Binary Output<a class="headerlink" href="#deciding-between-ascii-or-binary-output" title="Permalink to this headline">¶</a></h4>
<p>Traffic Server offers both ASCII and binary output for log files because each offer
advantages under different circumstances. The primary concerns and trade offs
that should be considered are covered below. Many of the trade offs between
formats will depend heavily on the specific formats you choose for your logs.
To make an accurate determination on whether ASCII or binary logging is better
for your systems, it is recommended that (with good system and performance
monitoring, of course) that you test each format separately under real world
traffic.</p>
<p>The only blanket statement that can really be offered in good conscience is
that ASCII logging <em>generally</em> offers a lower path of resistance as no
additional conversion tools will be necessary.</p>
<div class="section" id="disk-space">
<h5>Disk Space<a class="headerlink" href="#disk-space" title="Permalink to this headline">¶</a></h5>
<p>ASCII logs tend to consume more disk space than their binary counterparts.
Many numeric fields (e.g. content lengths, HTTP status codes, request and
response times, and so on) as well as string representation of IPv4 and IPv6
addresses will consume more bytes than their binary formats. There are
exceptions (a field containing just the value <code class="docutils literal notranslate"><span class="pre">0</span></code> will use a single byte in
an ASCII log, but four bytes in a binary log), so a guarantee cannot be made,
but the general tendency for typical log line formats is to consume slightly
more space in ASCII.</p>
</div>
<div class="section" id="cpu-overhead">
<h5>CPU Overhead<a class="headerlink" href="#cpu-overhead" title="Permalink to this headline">¶</a></h5>
<p>Emitting ASCII format logs does incur some additional processing as the
internal Traffic Server data structures for relevant transaction details need to be
converted into ASCII strings. While this is usually negligible overhead for
most installations, you may wish to compare the performance overhead between
emitting ASCII or binary log data if you are very concerned with Traffic Server runtime
performance. By using the binary log format, you may gain a very slight amount
of proxy performance, at the cost of having to invoke an intermediary converter
application every time you wish to view or process the log data.</p>
</div>
<div class="section" id="external-programs">
<h5>External Programs<a class="headerlink" href="#external-programs" title="Permalink to this headline">¶</a></h5>
<p>As mentioned above, any use of the log data by other programs will require the
addition of a converter application should you opt for the binary format. If
you are frequently ingesting the log data elsewhere, you may not wish to have
the time and processing cost of this additional step every time.</p>
<p>If the external program is ingesting the logs continuously, you may wish to use
a named pipe output from Traffic Server instead, which is always in ASCII format, but
doesn’t have the potentially increased storage needs as there is no persistent
storage of the log data involved (at least not by Traffic Server - the application
ingesting the data is probably storing its own results somewhere). It also
avoids unnecessary disk I/O operations if you only care about the final,
analyzed version of the log data and have no permanent use for the intermediate
(and raw) output from Traffic Server.</p>
<p>Alternatively, if you wish to hyper-optimize your Traffic Server runtime performance and
are only ingesting the log data with an external application on a batched
schedule, you might consider logging from Traffic Server using the binary format, then
establishing an externally scheduled one-time conversion of the log data to a
more easily ingested ASCII format into separate file(s). Coordination of this
conversion with the Traffic Server log rotations would be your responsibility.</p>
</div>
</div>
</div>
</div>
<div class="section" id="remote-logging">
<span id="admin-logging-destinations-remote"></span><h2>Remote Logging<a class="headerlink" href="#remote-logging" title="Permalink to this headline">¶</a></h2>
<p>Traffic Server provides for remote log-shipping functionality, which may be used in
addition to or instead of local log storage. This section covers the current
options available.</p>
<div class="section" id="syslog">
<span id="admin-logging-syslog"></span><h3>Syslog<a class="headerlink" href="#syslog" title="Permalink to this headline">¶</a></h3>
<p>At this time, Traffic Server supports sending log data to <em class="manpage">syslog</em> only for the
system and emergency logs. Sending custom event or transaction error logs to
syslog is not directly supported. You may use external log aggregation tools,
such as Logstash, to accomplish this by having them handle the ingestion of
Traffic Server local log files and forwarding to whatever receivers you wish.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="formatting.en.html" class="btn btn-neutral float-right" title="Formatting Log Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="understanding.en.html" class="btn btn-neutral float-left" title="Understanding Traffic Server Logs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, dev@trafficserver.apache.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>