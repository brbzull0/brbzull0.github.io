


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rate Limit Plugin &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="URI Signing Plugin" href="uri_signing.en.html" />
    <link rel="prev" title="Parent Select Plugin" href="parent_select.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.en.html">Installing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.en.html">Proxy Cache Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interaction/index.en.html">Interacting with Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.en.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.en.html">Cache Storage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.en.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.en.html#stable-plugins">Stable plugins</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.en.html#experimental-plugins">Experimental plugins</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="access_control.en.html">Access Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="cache_fill.en.html">Cache Fill</a></li>
<li class="toctree-l4"><a class="reference internal" href="certifier.en.html">Certifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="cert_reporting_tool.en.html">Cert Reporting Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="collapsed_forwarding.en.html">Collapsed-Forwarding</a></li>
<li class="toctree-l4"><a class="reference internal" href="geoip_acl.en.html">GeoIP ACL</a></li>
<li class="toctree-l4"><a class="reference internal" href="fq_pacing.en.html">FQ Pacing</a></li>
<li class="toctree-l4"><a class="reference internal" href="header_freq.en.html">Header Frequency</a></li>
<li class="toctree-l4"><a class="reference internal" href="hook-trace.en.html">Hook Trace</a></li>
<li class="toctree-l4"><a class="reference internal" href="icap.en.html">ICAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="ja3_fingerprint.en.html">JA3 Fingerprint</a></li>
<li class="toctree-l4"><a class="reference internal" href="maxmind_acl.en.html">Maxmind ACL</a></li>
<li class="toctree-l4"><a class="reference internal" href="memcache.en.html">Memcache</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory_profile.en.html">Memory Profile</a></li>
<li class="toctree-l4"><a class="reference internal" href="metalink.en.html">Metalink</a></li>
<li class="toctree-l4"><a class="reference internal" href="money_trace.en.html">Money Trace</a></li>
<li class="toctree-l4"><a class="reference internal" href="mp4.en.html">MP4</a></li>
<li class="toctree-l4"><a class="reference internal" href="multiplexer.en.html">Multiplexer</a></li>
<li class="toctree-l4"><a class="reference internal" href="mysql_remap.en.html">MySQL Remap</a></li>
<li class="toctree-l4"><a class="reference internal" href="otel_tracer.en.html">OpenTelemetry Tracer</a></li>
<li class="toctree-l4"><a class="reference internal" href="parent_select.en.html">Parent Select</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Rate Limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="uri_signing.en.html">URI Signing</a></li>
<li class="toctree-l4"><a class="reference internal" href="url_sig.en.html">Legacy Signed URLs</a></li>
<li class="toctree-l4"><a class="reference internal" href="slice.en.html">Slice</a></li>
<li class="toctree-l4"><a class="reference internal" href="sslheaders.en.html">SSL Headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssl_session_reuse.en.html">SSL Session Reuse</a></li>
<li class="toctree-l4"><a class="reference internal" href="stek_share.en.html">STEK Share</a></li>
<li class="toctree-l4"><a class="reference internal" href="system_stats.en.html">System Statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="traffic_dump.en.html">Traffic Dump</a></li>
<li class="toctree-l4"><a class="reference internal" href="webp_transform.en.html">WebP Transform</a></li>
<li class="toctree-l4"><a class="reference internal" href="prefetch.en.html">Prefetch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.en.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../monitoring/index.en.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuring-traffic-server.en.html">Configuring Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layer-4-routing.en.html">Layer 4 Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance/index.en.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/index.en.html">Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.en.html#audience">Audience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.en.html">Administrator’s Guide</a> &raquo;</li>
        
          <li><a href="index.en.html">Plugins</a> &raquo;</li>
        
      <li>Rate Limit Plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/admin-guide/plugins/rate_limit.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rate-limit-plugin">
<span id="admin-plugins-rate-limit"></span><h1>Rate Limit Plugin<a class="headerlink" href="#rate-limit-plugin" title="Permalink to this headline">¶</a></h1>
<p>The <strong class="program">rate_limit</strong> plugin provides basic mechanism for how much
traffic a particular service (remap rule) is allowed to do. Currently,
the only implementation is a limit on how many active client transactions
a service can have. However, it would be easy to refactor this plugin to
allow for adding new limiter policies later on.</p>
<p>The limit counters and queues are per remap rule only, i.e. there is
(currently) no way to group transaction limits from different remap rules
into a single rate limiter.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is still work in progress, in particularly the configuration and
the IP reputation system needs some work. In particular:</p>
<ul class="simple">
<li><p>We need a proper YAML configuration overall, allowing us to configure
better per service controls as well as sharing resources between remap
rules or SNI.</p></li>
<li><p>We need reloadable configurations.</p></li>
<li><p>The IP reputation currently only works with the global plugin settings.</p></li>
<li><p>There is no support for adding allow listed IPs to the IP reputation.</p></li>
</ul>
</div>
<div class="section" id="remap-plugin">
<h2>Remap Plugin<a class="headerlink" href="#remap-plugin" title="Permalink to this headline">¶</a></h2>
<p>All configuration is done via <a class="reference internal" href="../files/remap.config.en.html#std-configfile-remap.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">remap.config</span></code></a>, and the following options
are available:</p>
<dl class="std option">
<dt id="cmdoption-rate-limit-limit">
<code class="sig-name descname">--limit</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-limit" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum number of active client transactions.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-queue">
<code class="sig-name descname">--queue</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-queue" title="Permalink to this definition">¶</a></dt>
<dd><p>When the limit (above) has been reached, all new transactions are placed
on a FIFO queue. This option (optional) sets an upper bound on how many
queued transactions we will allow. When this threshold is reached, all
additional transactions are immediately served with an error message.</p>
<p>The queue is effectively disabled if this is set to <cite>0</cite>, which implies
that when the transaction limit is reached, we immediately start serving
error responses.</p>
<p>The default queue size is <cite>UINT_MAX</cite>, which is essentially unlimited.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-error">
<code class="sig-name descname">--error</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-error" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional HTTP status error code, to be used together with the
<a class="reference internal" href="#cmdoption-rate-limit-1"><code class="xref std std-option docutils literal notranslate"><span class="pre">--queue</span></code></a> option above. The default is <cite>429</cite>.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-retry">
<code class="sig-name descname">--retry</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-retry" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional retry-after value, which if set will cause rejected (e.g. <cite>429</cite>)
responses to also include a header <cite>Retry-After</cite>.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-header">
<code class="sig-name descname">--header</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-header" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an optional HTTP header name, which will be added to the client
request header IF the transaction was delayed (queued). The value of the
header is the delay, in milliseconds. This can be useful to for example
log the delays for later analysis.</p>
<p>It is recommended that an <cite>&#64;</cite> header is used here, e.g. <cite>&#64;RateLimit-Delay</cite>,
since this header will not leave the ATS server instance.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-maxage">
<code class="sig-name descname">--maxage</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-maxage" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional <cite>max-age</cite> for how long a transaction can sit in the delay queue.
The value (default 0) is the age in milliseconds.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-prefix">
<code class="sig-name descname">--prefix</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional metric prefix to use instead of the default (plugin.rate_limiter).</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-tag">
<code class="sig-name descname">--tag</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-tag" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional metric tag to use instead of the default. When a tag is not specified
the plugin will use the scheme, FQDN, and port when it is non-standard. For example
a default plugin tag might be “https.example.com” or “http.example.com:8080”
noting that in the latter exampe, the non-standard scheme and port led to
“:8080” being appended to the string.</p>
</dd></dl>

</div>
<div class="section" id="global-plugin">
<h2>Global Plugin<a class="headerlink" href="#global-plugin" title="Permalink to this headline">¶</a></h2>
<p>As a global plugin, the rate limiting currently applies only for TLS enabled
connections, based on the SNI from the TLS handshake. As a global plugin we
also have the support of an IP reputation system, see below for configurations.</p>
<p>The basic use is as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rate_limit</span><span class="o">.</span><span class="n">so</span> <span class="n">SNI</span><span class="o">=</span><span class="n">www1</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">www2</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">--</span><span class="n">limit</span><span class="o">=</span><span class="mi">2</span> <span class="o">--</span><span class="n">queue</span><span class="o">=</span><span class="mi">2</span> <span class="o">--</span><span class="n">maxage</span><span class="o">=</span><span class="mi">10000</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a global plugin, it’s highly recommended to also reduce the Keep-Alive inactive
timeout for the service(s) controlled by this plugin. This avoids the risk of having
idle connections consume too many of the available resources. This is easily
done using e.g. the <code class="docutils literal notranslate"><span class="pre">conf_remap</span></code> plugin,
<a class="reference internal" href="../files/records.config.en.html#proxy-config-http-keep-alive-no-activity-timeout-in" title="records.config"><code class="xref ts ts-cv docutils literal notranslate"><span class="pre">proxy.config.http.keep_alive_no_activity_timeout_in</span></code></a>.</p>
</div>
<p>The following options are available:</p>
<dl class="std option">
<dt id="cmdoption-rate-limit-0">
<code class="sig-name descname">--limit</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-0" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum number of active client transactions.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-1">
<code class="sig-name descname">--queue</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-1" title="Permalink to this definition">¶</a></dt>
<dd><p>When the limit (above) has been reached, all new connections are placed
on a FIFO queue. This option (optional) sets an upper bound on how many
queued transactions we will allow. When this threshold is reached, all
additional connections are immediately errored out in the TLS handshake.</p>
<p>The queue is effectively disabled if this is set to <cite>0</cite>, which implies
that when the transaction limit is reached, we immediately start serving
error responses.</p>
<p>The default queue size is <cite>UINT_MAX</cite>, which is essentially unlimited.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-2">
<code class="sig-name descname">--maxage</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-2" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional <cite>max-age</cite> for how long a transaction can sit in the delay queue.
The value (default 0) is the age in milliseconds.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-3">
<code class="sig-name descname">--prefix</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-3" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional metric prefix to use instead of the default (plugin.rate_limiter).</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-4">
<code class="sig-name descname">--tag</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-4" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional metric tag to use instead of the default. When a tag is not specified
the plugin will use the FQDN of the SNI associated with each rate limiter instance
created during plugin initialization.</p>
</dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-iprep_buckets">
<span id="cmdoption-rate-limit-iprep-buckets"></span><code class="sig-name descname">--iprep_buckets</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-iprep_buckets" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-The">
<span id="cmdoption-rate-limit-arg-the"></span><code class="sig-name descname">The</code><code class="sig-prename descclassname"> number of LRU buckets to use for the IP reputation. A good number here</code><a class="headerlink" href="#cmdoption-rate-limit-arg-The" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-is">
<span id="cmdoption-rate-limit-arg-but"></span><code class="sig-name descname">is</code><code class="sig-prename descclassname"> 10</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">but</code><code class="sig-prename descclassname"> can be configured. The reason for the different buckets is to</code><a class="headerlink" href="#cmdoption-rate-limit-arg-is" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-account">
<code class="sig-name descname">account</code><code class="sig-prename descclassname"> for a pseudo-sorted list of IPs on the frequency seen. Too few buckets</code><a class="headerlink" href="#cmdoption-rate-limit-arg-account" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-will">
<span id="cmdoption-rate-limit-arg-rendering"></span><code class="sig-name descname">will</code><code class="sig-prename descclassname"> not be enough to keep such a sorting</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">rendering</code><code class="sig-prename descclassname"> the algorithm useless. To</code><a class="headerlink" href="#cmdoption-rate-limit-arg-will" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-function">
<span id="cmdoption-rate-limit-arg-0"></span><code class="sig-name descname">function</code><code class="sig-prename descclassname"> in our setup</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">the</code><code class="sig-prename descclassname"> number of buckets must be less than ``100``.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-function" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-iprep_bucketsize">
<span id="cmdoption-rate-limit-iprep-bucketsize"></span><code class="sig-name descname">--iprep_bucketsize</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-iprep_bucketsize" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-This">
<span id="cmdoption-rate-limit-arg-this"></span><span id="cmdoption-rate-limit-arg-15"></span><code class="sig-name descname">This</code><code class="sig-prename descclassname"> is the size of the largest LRU bucket (the `entry bucket`)</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">`15`</code><code class="sig-prename descclassname"> is a good</code><a class="headerlink" href="#cmdoption-rate-limit-arg-This" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-value.">
<span id="cmdoption-rate-limit-arg-value"></span><span id="cmdoption-rate-limit-arg-so"></span><code class="sig-name descname">value.</code><code class="sig-prename descclassname"> This is a power of 2</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">so</code><code class="sig-prename descclassname"> `15` means the largest LRU can hold `32768` entries.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-value." title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-Note">
<span id="cmdoption-rate-limit-arg-note"></span><span id="cmdoption-rate-limit-arg-for"></span><code class="sig-name descname">Note</code><code class="sig-prename descclassname"> that this option must be bigger then the `--iprep_buckets` setting</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">for</code><code class="sig-prename descclassname"> the</code><a class="headerlink" href="#cmdoption-rate-limit-arg-Note" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-bucket">
<code class="sig-name descname">bucket</code><code class="sig-prename descclassname"> halfing to function.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-bucket" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-iprep_maxage">
<span id="cmdoption-rate-limit-iprep-maxage"></span><code class="sig-name descname">--iprep_maxage</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-iprep_maxage" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-1">
<span id="cmdoption-rate-limit-arg-2"></span><code class="sig-name descname">This</code><code class="sig-prename descclassname"> is used for aging out entries out of the LRU</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">the</code><code class="sig-prename descclassname"> default is `0` which means</code><a class="headerlink" href="#cmdoption-rate-limit-arg-1" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-no">
<span id="cmdoption-rate-limit-arg-entries"></span><code class="sig-name descname">no</code><code class="sig-prename descclassname"> aging happens. Even with no aging</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">entries</code><code class="sig-prename descclassname"> will eventually fall out of buckets</code><a class="headerlink" href="#cmdoption-rate-limit-arg-no" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-because">
<code class="sig-name descname">because</code><code class="sig-prename descclassname"> of the LRU mechanism that kicks in. The aging is here to make sure a spike</code><a class="headerlink" href="#cmdoption-rate-limit-arg-because" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-in">
<code class="sig-name descname">in</code><code class="sig-prename descclassname"> traffic from an IP doesn't keep the entry for too long in the LRUs.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-in" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-iprep_permablock_limit">
<span id="cmdoption-rate-limit-iprep-permablock-limit"></span><code class="sig-name descname">--iprep_permablock_limit</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-iprep_permablock_limit" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-3">
<code class="sig-name descname">The</code><code class="sig-prename descclassname"> minimum number of hits an IP must reach to get moved to the permanent bucket.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-3" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-In">
<span id="cmdoption-rate-limit-arg-4"></span><code class="sig-name descname">In</code><code class="sig-prename descclassname"> this bucket</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">entries</code><code class="sig-prename descclassname"> will stay for 2x</code><a class="headerlink" href="#cmdoption-rate-limit-arg-In" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-iprep_permablock_pressure">
<span id="cmdoption-rate-limit-iprep-permablock-pressure"></span><code class="sig-name descname">--iprep_permablock_pressure</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-iprep_permablock_pressure" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-5">
<code class="sig-name descname">This</code><code class="sig-prename descclassname"> option specifies from which bucket an IP is allowed to move from into the</code><a class="headerlink" href="#cmdoption-rate-limit-arg-5" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-perma">
<span id="cmdoption-rate-limit-arg-which"></span><code class="sig-name descname">perma</code><code class="sig-prename descclassname"> block bucket. A good value here is likely `0` or `1`</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">which</code><code class="sig-prename descclassname"> is very conservative.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-perma" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="std option">
<dt id="cmdoption-rate-limit-iprep_permablock_maxage">
<span id="cmdoption-rate-limit-iprep-permablock-maxage"></span><code class="sig-name descname">--iprep_permablock_maxage</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-rate-limit-iprep_permablock_maxage" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-Similar">
<span id="cmdoption-rate-limit-arg-similar"></span><span id="cmdoption-rate-limit-arg-6"></span><code class="sig-name descname">Similar</code><code class="sig-prename descclassname"> to `--iprep_maxage` above</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">but</code><code class="sig-prename descclassname"> only applies to the long term (`perma-block`)</code><a class="headerlink" href="#cmdoption-rate-limit-arg-Similar" title="Permalink to this definition">¶</a></dt>
<dt id="cmdoption-rate-limit-arg-bucket.">
<span id="cmdoption-rate-limit-arg-7"></span><code class="sig-name descname">bucket.</code><code class="sig-prename descclassname"> Default is `0`</code><code class="sig-prename descclassname">, </code><code class="sig-name descname">which</code><code class="sig-prename descclassname"> means no aging to this bucket is applied.</code><a class="headerlink" href="#cmdoption-rate-limit-arg-bucket." title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="metrics">
<h2>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h2>
<p>Metric names are generated either using defaults or user-supplied values. In either
case, the format of the metric names is as follows:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">prefix.type.tag.metric</span></code></p>
</div></blockquote>
<p>A user can specify their own prefixes and tags, but not types or metrics.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>The default prefix for all metrics is <cite>plugin.rate_limiter</cite>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>There are two types of metrics: <cite>sni</cite> and <cite>remap</cite>. Each type corresponds with the
type of configuration used to generate the metric. The global configuration is for
rate limiting requests during TLS negotiation, hence, the type of <code class="docutils literal notranslate"><span class="pre">sni</span></code>. Similarly
<code class="docutils literal notranslate"><span class="pre">remap</span></code> connotes a remap configuration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code></dt><dd><p>By default the metric tag is derived from a description that is set conditionally.
When configured in global mode, the <code class="docutils literal notranslate"><span class="pre">SNI</span></code> argument allows a comma separated list
of FQDNs that require rate limiting. Each FQDN is associated with an instance of
the rate limiter, and the description of each limiter is set to the FQDN.</p>
<p>When configured on a remap, the plugin will generate a description based on the
configuration. When the scheme and port number are standard, the port is omitted
from the generated description, however, when the scheme and port combination are
non-standard, the port is appended. For example, a standard scheme and port would
lead to a description of <code class="docutils literal notranslate"><span class="pre">http.example.com</span></code> or <code class="docutils literal notranslate"><span class="pre">https.example.com</span></code> but if a
non-standard port was used, a description might be <code class="docutils literal notranslate"><span class="pre">https.example.com:8443</span></code> or
<code class="docutils literal notranslate"><span class="pre">http.example.com:8080</span></code>. This approach allows each limiter to increment metrics
for the correct remaps.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metric</span></code></dt><dd><p>There are four metrics that may be incremented, depending on which action the plugin takes:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">queued</span></code></p></td>
<td><p>Request queued due to being at the limit but under the queue limit.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rejected</span></code></p></td>
<td><p>Request rejected due to being over the defined limits.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expired</span></code></p></td>
<td><p>Queued connection is too old to be resumed and is rejected.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">resumed</span></code></p></td>
<td><p>Queued connection is resumed.</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="ip-reputation">
<h2>IP Reputation<a class="headerlink" href="#ip-reputation" title="Permalink to this headline">¶</a></h2>
<p>The goal of the IP reputation system is to simply try to identify IPs which are more
likely to be abusive than others. It’s not a perfect system, and it relies heavily on
the notion of pressure. The Sieve LRUs are always filled, so you have to make sure that
you only start using them when the system thinks it’s under pressure.</p>
<p>The Sieve LRU is a chained set of (configurable) LRUs, each with smaller and smaller
capacity. This essentially adds a notion of partially sorted elements; All IPs in
LRU &lt;n&gt; generally are more active than the IPs in LRU &lt;n+1&gt;. LRU is specially marked
for longer term blocking, only the most abusive elements would end up here.</p>
<div class="figure align-default">
<img alt="../../_images/SieveLRU.png" src="../../_images/SieveLRU.png" />
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>This example shows a simple rate limiting of <cite>128</cite> concurrently active client
transactions, with a maximum queue size of <cite>256</cite>. The default of HTTP status
code <cite>429</cite> is used when queue is full:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cdn</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">some</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> \
  <span class="nd">@plugin</span><span class="o">=</span><span class="n">rate_limit</span><span class="o">.</span><span class="n">so</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">limit</span><span class="o">=</span><span class="mi">128</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">queue</span><span class="o">=</span><span class="mi">256</span>
</pre></div>
</div>
<p>This example would put a hard transaction (in) limit to 256, with no backoff
queue, and add a header with the transaction delay if it was queued:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cdn</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">some</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> \
  <span class="nd">@plugin</span><span class="o">=</span><span class="n">rate_limit</span><span class="o">.</span><span class="n">so</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">limit</span><span class="o">=</span><span class="mi">256</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">queue</span><span class="o">=</span><span class="mi">0</span> \
  <span class="nd">@pparam</span><span class="o">=--</span><span class="n">header</span><span class="o">=</span><span class="nd">@RateLimit</span><span class="o">-</span><span class="n">Delay</span>
</pre></div>
</div>
<p>This final example will limit the active transaction, queue size, and also
add a <cite>Retry-After</cite> header once the queue is full and we return a <cite>429</cite> error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">map</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cdn</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">some</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> \
  <span class="nd">@plugin</span><span class="o">=</span><span class="n">rate_limit</span><span class="o">.</span><span class="n">so</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">limit</span><span class="o">=</span><span class="mi">256</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">queue</span><span class="o">=</span><span class="mi">1024</span> \
  <span class="nd">@pparam</span><span class="o">=--</span><span class="n">retry</span><span class="o">=</span><span class="mi">3600</span> <span class="nd">@pparam</span><span class="o">=--</span><span class="n">header</span><span class="o">=</span><span class="nd">@RateLimit</span><span class="o">-</span><span class="n">Delay</span>
</pre></div>
</div>
<p>In this case, the response would look like this when the queue is full:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">429</span> <span class="n">Too</span> <span class="n">Many</span> <span class="n">Requests</span>
<span class="n">Date</span><span class="p">:</span> <span class="n">Fri</span><span class="p">,</span> <span class="mi">26</span> <span class="n">Mar</span> <span class="mi">2021</span> <span class="mi">22</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mi">38</span> <span class="n">GMT</span>
<span class="n">Connection</span><span class="p">:</span> <span class="n">keep</span><span class="o">-</span><span class="n">alive</span>
<span class="n">Server</span><span class="p">:</span> <span class="n">ATS</span><span class="o">/</span><span class="mf">10.0</span><span class="o">.</span><span class="mi">0</span>
<span class="n">Cache</span><span class="o">-</span><span class="n">Control</span><span class="p">:</span> <span class="n">no</span><span class="o">-</span><span class="n">store</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">text</span><span class="o">/</span><span class="n">html</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Language</span><span class="p">:</span> <span class="n">en</span>
<span class="n">Retry</span><span class="o">-</span><span class="n">After</span><span class="p">:</span> <span class="mi">3600</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">207</span>
</pre></div>
</div>
</div>
<div class="section" id="metric-examples">
<h2>Metric Examples<a class="headerlink" href="#metric-examples" title="Permalink to this headline">¶</a></h2>
<p>The following examples show the metric names that result from various settings
using a hypothetical domain of example.com with both global and remap configurations.
Note that in this example the remap configuration contains both TLS and non-TLS
remap rules.</p>
<p>Defaults:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>
</pre></div>
</div>
<p>Defaults with non-standard scheme+port combinations in the remap rules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8443.</span><span class="n">queued</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8443.</span><span class="n">rejected</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8443.</span><span class="n">expired</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">https</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8443.</span><span class="n">resumed</span>

<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8080.</span><span class="n">queued</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8080.</span><span class="n">rejected</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8080.</span><span class="n">expired</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mf">8080.</span><span class="n">resumed</span>
</pre></div>
</div>
<dl class="simple">
<dt>With:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--prefix=limiter</span></code> on the global configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--tag=tls.example.com</span></code> on the global configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pparam=--prefix=limiter</span></code> on the remap configurations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pparam=--tag=secure.example.com</span></code> on the TLS-enabled remap configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pparam=--tag=insecure.example.com</span></code> on the non-TLS-enabled remap configuration</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">tls</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">tls</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">tls</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">sni</span><span class="o">.</span><span class="n">tls</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>

<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>

<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">insecure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">queued</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">insecure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">rejected</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">insecure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">expired</span>
<span class="n">limiter</span><span class="o">.</span><span class="n">remap</span><span class="o">.</span><span class="n">insecure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">resumed</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="uri_signing.en.html" class="btn btn-neutral float-right" title="URI Signing Plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="parent_select.en.html" class="btn btn-neutral float-left" title="Parent Select Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, dev@trafficserver.apache.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>