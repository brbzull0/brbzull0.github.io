


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ip_allow.yaml &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/override.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="logging.yaml" href="logging.yaml.en.html" />
    <link rel="prev" title="hosting.config" href="hosting.config.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.en.html">Installing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.en.html">Proxy Cache Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interaction/index.en.html">Interacting with Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.en.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.en.html">Cache Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.en.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../monitoring/index.en.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuring-traffic-server.en.html">Configuring Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layer-4-routing.en.html">Layer 4 Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance/index.en.html">Performance Tuning</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Configuration Files</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cache.config.en.html">cache.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="hosting.config.en.html">hosting.config</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ip_allow.yaml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#format">Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="logging.yaml.en.html">logging.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="parent.config.en.html">parent.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin.config.en.html">plugin.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="records.config.en.html">records.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="remap.config.en.html">remap.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="splitdns.config.en.html">splitdns.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssl_multicert.config.en.html">ssl_multicert.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="sni.yaml.en.html">sni.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="storage.config.en.html">storage.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="strategies.yaml.en.html">strategies.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="volume.config.en.html">volume.config</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.en.html#audience">Audience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.en.html">Administrator’s Guide</a> &raquo;</li>
        
          <li><a href="index.en.html">Configuration Files</a> &raquo;</li>
        
      <li>ip_allow.yaml</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/admin-guide/files/ip_allow.yaml.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ip-allow-yaml">
<h1>ip_allow.yaml<a class="headerlink" href="#ip-allow-yaml" title="Permalink to this headline">¶</a></h1>
<p id="std-configfile-ip_allow.yaml"><span id="std:configfile-ip_allow.yaml"></span>The <a class="reference internal" href="#std-configfile-ip_allow.yaml"><code class="xref std std-file docutils literal notranslate"><span class="pre">ip_allow.yaml</span></code></a> file controls client access to Traffic Server and Traffic Server connections to upstream servers.
This control is specified via rules. Each rule has:</p>
<ul class="simple">
<li><p>A direction (inbound or out).</p></li>
<li><p>A range of IP address to which the rule applies.</p></li>
<li><p>An action, either accept or deny.</p></li>
<li><p>A list of HTTP methods.</p></li>
</ul>
<p>Inbound rules control access to Traffic Server from user agents. Outbound rules control access to upstream destinations
from Traffic Server. The IP addresses always apply to the remote address for Traffic Server. That is, the user agent IP address
for inbound rules and the upstream destination address for outbound rules. The rule can apply at the connection
level or just to specific methods.</p>
<p>Traffic Server can be updated for changes to the rules in <a class="reference internal" href="#std-configfile-ip_allow.yaml"><code class="xref std std-file docutils literal notranslate"><span class="pre">ip_allow.yaml</span></code></a> file, by running the
<a class="reference internal" href="../../appendices/command-line/traffic_ctl.en.html#cmdoption-traffic_ctl-config-arg-reload"><code class="xref std std-option docutils literal notranslate"><span class="pre">traffic_ctl</span> <span class="pre">config</span> <span class="pre">reload</span></code></a>.</p>
<div class="section" id="format">
<h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#std-configfile-ip_allow.yaml"><code class="xref std std-file docutils literal notranslate"><span class="pre">ip_allow.yaml</span></code></a> is YAML format. The default configuration is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># YAML</span>
<span class="nt">ip_allow</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
    <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
    <span class="nt">methods</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
  <span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
    <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">::1</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
    <span class="nt">methods</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
  <span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
    <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0/0</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
    <span class="nt">methods</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">PURGE</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">PUSH</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">DELETE</span>
  <span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
    <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">::/0</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
    <span class="nt">methods</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">PURGE</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">PUSH</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">DELETE</span>
</pre></div>
</div>
<p>Each rule is a mapping. The YAML data must have a top level key of “ip_allow” and its value must
be a mapping or a sequence of mappings, each of those being one rule.</p>
<p>The keys in a rule are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">apply</span></code></dt><dd><p>This is where the rule is applied, either <code class="docutils literal notranslate"><span class="pre">in</span></code> or <code class="docutils literal notranslate"><span class="pre">out</span></code>. Inbound application means
the rule is applied to inbound user agent connections. Outbound application means the rule is
applied to outbound connections from Traffic Server to an upstream destination. This is a required key.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ip_addrs</span></code></dt><dd><p>IP addresses to match for the rule to be applied. This can be either an address range or an
array of address ranges. This is a required key.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">action</span></code></dt><dd><p>The action, which must be <code class="docutils literal notranslate"><span class="pre">allow</span></code> or <code class="docutils literal notranslate"><span class="pre">deny</span></code>. This is a required key.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">methods</span></code></dt><dd><p>This is optional. If not present, the rule action applies to all methods. If present, the rule
action is applied to connections using those methods and its opposite to all other connections. The
keyword “ALL” means all methods, making the specification of any other method redundant. All
methods comparisons are case insensitive. This is an optional key.</p>
</dd>
</dl>
<p>An IP address range can be specified in several ways. A range is always IPv4 or IPv6, it is not
allowed to have a range that contains addresses from different IP address families.</p>
<ul class="simple">
<li><p>A single address, which specifies a range of size 1, e.g. “127.0.0.1”.</p></li>
<li><p>A minimum and maximum address separated by a dash, e.g. “10.1.0.0-10.1.255.255”.</p></li>
<li><p>A CIDR based value, e.g. “10.1.0.0/16”, which is a range containing exactly the specified network.</p></li>
</ul>
<p>A rule must have the <code class="docutils literal notranslate"><span class="pre">apply</span></code>, <code class="docutils literal notranslate"><span class="pre">ip_addrs</span></code>, and <code class="docutils literal notranslate"><span class="pre">action</span></code> keys. Rules match based on
IP addresses only and are then applied to all matching sessions. If the rule is an <code class="docutils literal notranslate"><span class="pre">allow</span></code> rule,
the specified methods are allowed and all other methods are denied. If the rule is a <code class="docutils literal notranslate"><span class="pre">deny</span></code> rule,
the specified methods are denied and all other methods are allowed.</p>
<p>For example, from the default configuration, the rule for <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> is <code class="docutils literal notranslate"><span class="pre">allow</span></code> with all
methods. Therefore an inbound connection from the loopback address (127.0.0.1) is allowed to use any
method. The general IPv4 rule, covering all IPv4 address, is a <code class="docutils literal notranslate"><span class="pre">deny</span></code> rule and therefore when it
matches the methods “PURGE”, “PUSH”, and “DELETE”, these methods are denied and any other method is allowed.</p>
<p>The rules are matched in order, by IP address, therefore the general IPv4 rule does not apply to the
loopback address because the latter is matched first.</p>
<p>A major difference in application between <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">out</span></code> rules is that by default,
inbound connections are denied and therefore if there is no rule that matches, the connection is
denied. Outbound rules allow by default, so the absence of rules in the default configuration
enables all methods for all outbound connections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be aware that ip_allow rules will not, and indeed cannot, be applied to TLS
connections which are tunneled via <code class="docutils literal notranslate"><span class="pre">tunnel_route</span></code> to the upstream target.
Such connections are not decrypted and thus are not processed by Traffic Server. This
applies as well to TLS connections which are forwarded via <code class="docutils literal notranslate"><span class="pre">forward_route</span></code>
since, while those are decrypted, they are not processed by Traffic Server.  For
details, see <a class="reference internal" href="../layer-4-routing.en.html#sni-routing"><span class="std std-ref">SNI Routing</span></a> and <a class="reference internal" href="sni.yaml.en.html#std-configfile-sni.yaml"><code class="xref std std-file docutils literal notranslate"><span class="pre">sni.yaml</span></code></a>.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The following example enables all clients access.:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.0-255.255.255.255</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
</pre></div>
</div>
<p>The following example allows access to all clients on addresses in a subnet:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">123.12.3.000-123.12.3.123</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
</pre></div>
</div>
<p>The following example denies access all clients on addresses in a subnet:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">123.45.6.0-123.45.6.123</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>If the entire subnet were to be denied, that would be:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">123.45.6.0/24</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>The following example allows any method to any upstream servers:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">out</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.0-255.255.255.255</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
</pre></div>
</div>
<p>Alternatively this can be done with:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">out</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0/0</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
</pre></div>
</div>
<p>Or also by having no rules at all, as outbound by default is allow.</p>
<p>The following example denies to access all servers on a specific subnet:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">out</span>
<span class="nt">ip_addr</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0-10.0.255.255</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">out</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0/16</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ip_addrs</span></code> can be an array of ranges, so that:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
  <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0/8</span>
  <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
<span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
  <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">172.16.0.0/20</span>
  <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
<span class="p p-Indicator">-</span> <span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
  <span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">192.168.1.0/24</span>
  <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>can be done more simply as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
<span class="nt">ip_addrs</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0/8</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">172.16.0.0/20</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">192.168.1.0/24</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">deny</span>
</pre></div>
</div>
<p>If the goal is to allow only <code class="docutils literal notranslate"><span class="pre">GET</span></code> and <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> requests to those servers, it would be:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">out</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0/16</span>
<span class="nt">methods</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">GET</span><span class="p p-Indicator">,</span> <span class="nv">HEAD</span> <span class="p p-Indicator">]</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">out</span>
<span class="nt">ip_addrs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0/16</span>
<span class="nt">methods</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">HEAD</span>
<span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">allow</span>
</pre></div>
</div>
<p>This will match the IP address for the target servers on the outbound connection. Then, if the
method is <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> the connection will be allowed, otherwise the connection will be
denied.</p>
<p>As a final example, here is the default configuration in compact form:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ip_allow</span><span class="p">:</span> <span class="p p-Indicator">[</span>
  <span class="p p-Indicator">{</span><span class="nt"> apply</span><span class="p">:</span> <span class="nv">in</span><span class="p p-Indicator">,</span><span class="nt"> ip_addrs</span><span class="p">:</span> <span class="nv">127.0.0.1</span><span class="p p-Indicator">,</span><span class="nt"> action</span><span class="p">:</span> <span class="nv">allow</span> <span class="p p-Indicator">},</span>
  <span class="p p-Indicator">{</span><span class="nt"> apply</span><span class="p">:</span> <span class="nv">in</span><span class="p p-Indicator">,</span><span class="nt"> ip_addrs</span><span class="p">:</span> <span class="s">&quot;::1&quot;</span><span class="p p-Indicator">,</span><span class="nt"> action</span><span class="p">:</span> <span class="nv">allow</span> <span class="p p-Indicator">},</span>
  <span class="p p-Indicator">{</span><span class="nt"> apply</span><span class="p">:</span> <span class="nv">in</span><span class="p p-Indicator">,</span><span class="nt"> ip_addrs</span><span class="p">:</span> <span class="nv">0/0</span><span class="p p-Indicator">,</span><span class="nt"> action</span><span class="p">:</span> <span class="nv">deny</span><span class="p p-Indicator">,</span><span class="nt"> methods</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">PURGE</span><span class="p p-Indicator">,</span> <span class="nv">PUSH</span><span class="p p-Indicator">,</span> <span class="nv">DELETE</span> <span class="p p-Indicator">]</span> <span class="p p-Indicator">},</span>
  <span class="p p-Indicator">{</span><span class="nt"> apply</span><span class="p">:</span> <span class="nv">in</span><span class="p p-Indicator">,</span><span class="nt"> ip_addrs</span><span class="p">:</span> <span class="s">&quot;::/0&quot;</span><span class="p p-Indicator">,</span><span class="nt"> action</span><span class="p">:</span> <span class="nv">deny</span><span class="p p-Indicator">,</span><span class="nt"> methods</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">PURGE</span><span class="p p-Indicator">,</span> <span class="nv">PUSH</span><span class="p p-Indicator">,</span> <span class="nv">DELETE</span> <span class="p p-Indicator">]</span> <span class="p p-Indicator">}</span>
  <span class="p p-Indicator">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For ATS 9.0, this file is (almost) backwards compatible. If the first line is a single ‘#’
character, or contains only “# ats”, then the file will be read in the version 8.0 format. This
is true for the default format and so if that has not been changed it should still work. This
allows a grace period before ATS 10.0 which will drop the old format entirely.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="logging.yaml.en.html" class="btn btn-neutral float-right" title="logging.yaml" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hosting.config.en.html" class="btn btn-neutral float-left" title="hosting.config" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, dev@trafficserver.apache.org.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>