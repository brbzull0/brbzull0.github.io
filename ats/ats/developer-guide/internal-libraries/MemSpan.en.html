

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>MemSpan &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="TS.Scalar" href="scalar.en.html" />
    <link rel="prev" title="TextView" href="TextView.en.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="memspan">
<h1>MemSpan<a class="headerlink" href="#memspan" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;ts/MemSpan.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p><a class="reference internal" href="#_CPPv37MemSpan" title="MemSpan"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MemSpan</span></code></a> is a view on a contiguous section of writeable memory. A view does not own the memory
and neither allocates nor de-allocates. The memory in the view is always owned by some other container
and it is the responsibility of the code to make sure the lifetime of the view is no more than that
of the owning container <a class="footnote-reference" href="#vector" id="id1">[1]</a>.</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="#_CPPv37MemSpan" title="MemSpan"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MemSpan</span></code></a> is generally constructed on either an array or an allocated buffer. This allows
the buffer to be passed around with intrinsic length information. The buffer can also be treated as
an array of varying types, which makes working with serialized data much easier.</p>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv37MemSpan">
<span id="_CPPv27MemSpan"></span><span id="MemSpan"></span><em class="property">class </em><code class="descname">MemSpan</code><a class="headerlink" href="#_CPPv37MemSpan" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A span of writable memory. Because this is a chunk of memory, conceptually delimited by start and
end pointers, the sizing type is <code class="code docutils literal notranslate"><span class="pre">ptrdiff_t</span></code> so that all of the sizing is consistent with
differences between pointers. The memory is owned by some other object and that object must
maintain the memory as long as the span references it.</p>
<dl class="function">
<dt id="_CPPv3N7MemSpan7MemSpanEPv9ptrdiff_t">
<span id="_CPPv2N7MemSpan7MemSpanEPv9ptrdiff_t"></span><span id="MemSpan::MemSpan__voidP.ptrdiff_t"></span><code class="descname">MemSpan</code><span class="sig-paren">(</span>void *<em>ptr</em>, <a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv39ptrdiff_t" title="ptrdiff_t">ptrdiff_t</a> <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N7MemSpan7MemSpanEPv9ptrdiff_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct a view starting at <em>ptr</em> for <em>size</em> bytes.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3NK7MemSpan4dataEv">
<span id="_CPPv2NK7MemSpan4dataEv"></span><span id="MemSpan::dataC"></span>void *<code class="descname">data</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3NK7MemSpan4dataEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a pointer to the first byte of the span.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3NK7MemSpan4sizeEv">
<span id="_CPPv2NK7MemSpan4sizeEv"></span><span id="MemSpan::sizeC"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv39ptrdiff_t" title="ptrdiff_t">ptrdiff_t</a> <code class="descname">size</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3NK7MemSpan4sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the size of the span.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3NK7MemSpaneqER7MemSpan">
<span id="_CPPv2NK7MemSpaneqER7MemSpan"></span><span id="MemSpan::eq-operator__MemSpanCRC"></span>bool <code class="descname">operator==</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv37MemSpan" title="MemSpan">MemSpan</a> <em class="property">const</em> &amp;<em>that</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3NK7MemSpaneqER7MemSpan" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check the equality of two spans, which are equal if they contain the same number of bytes of the same values.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3NK7MemSpan7is_sameER7MemSpan">
<span id="_CPPv2NK7MemSpan7is_sameER7MemSpan"></span><span id="MemSpan::is_same__MemSpanCRC"></span>bool <code class="descname">is_same</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv37MemSpan" title="MemSpan">MemSpan</a> <em class="property">const</em> &amp;<em>that</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3NK7MemSpan7is_sameER7MemSpan" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if <em>that</em> is the same span as <em>this</em>, that is the spans contain the exact same bytes.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3I0ENK7MemSpan2atE9ptrdiff_t">
<span id="_CPPv2I0ENK7MemSpan2atE9ptrdiff_t"></span>template&lt;typename <code class="descname">V</code>&gt;<br /><a class="reference internal" href="#_CPPv3I0ENK7MemSpan2atE9ptrdiff_t" title="MemSpan::at::V">V</a> <code class="descname">at</code><span class="sig-paren">(</span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv39ptrdiff_t" title="ptrdiff_t">ptrdiff_t</a> <em>n</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3I0ENK7MemSpan2atE9ptrdiff_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a value of type <em>V</em> as if the span were are array of type <em>V</em>.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3I0ENK7MemSpan3ptrE9ptrdiff_t">
<span id="_CPPv2I0ENK7MemSpan3ptrE9ptrdiff_t"></span>template&lt;typename <code class="descname">V</code>&gt;<br /><a class="reference internal" href="#_CPPv3I0ENK7MemSpan3ptrE9ptrdiff_t" title="MemSpan::ptr::V">V</a> *<code class="descname">ptr</code><span class="sig-paren">(</span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv39ptrdiff_t" title="ptrdiff_t">ptrdiff_t</a> <em>n</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3I0ENK7MemSpan3ptrE9ptrdiff_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a pointer to a value of type <em>V</em> as if the span were are array of type <em>V</em>.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3NK7MemSpan6prefixE9ptrdiff_t">
<span id="_CPPv2NK7MemSpan6prefixE9ptrdiff_t"></span><span id="MemSpan::prefix__ptrdiff_tC"></span><a class="reference internal" href="#_CPPv37MemSpan" title="MemSpan">MemSpan</a> <code class="descname">prefix</code><span class="sig-paren">(</span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv39ptrdiff_t" title="ptrdiff_t">ptrdiff_t</a> <em>n</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3NK7MemSpan6prefixE9ptrdiff_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return a new instance that contains the first <em>n</em> bytes of the current span. If <em>n</em>
is larger than the number of bytes in the span, only that many bytes are returned.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N7MemSpan13remove_prefixE9ptrdiff_t">
<span id="_CPPv2N7MemSpan13remove_prefixE9ptrdiff_t"></span><span id="MemSpan::remove_prefix__ptrdiff_t"></span><a class="reference internal" href="#_CPPv37MemSpan" title="MemSpan">MemSpan</a> &amp;<code class="descname">remove_prefix</code><span class="sig-paren">(</span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv39ptrdiff_t" title="ptrdiff_t">ptrdiff_t</a> <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N7MemSpan13remove_prefixE9ptrdiff_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove the first <em>n</em> bytes of the span. If <em>n</em> is more than the number of bytes in
the span the result is an empty span. A reference to the instance is returned.</p>
</dd></dl>

</dd></dl>

<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="vector" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Strong caution must be used with containers such as <code class="code docutils literal notranslate"><span class="pre">std::vector</span></code> or <code class="code docutils literal notranslate"><span class="pre">std::string</span></code>
because the lifetime of the memory can be much less than the lifetime of the container. In
particular, adding or removing any element from a <code class="code docutils literal notranslate"><span class="pre">std::vector</span></code> can cause a re-allocation,
invalidating any view of the original memory. In general views should be treated like iterators,
suitable for passing to nested function calls but not for storing.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Internal libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonrpc/index.en.html">JSONRPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.en.html">Developer’s Guide</a><ul>
  <li><a href="index.en.html">Internal libraries</a><ul>
      <li>Previous: <a href="TextView.en.html" title="previous chapter">TextView</a></li>
      <li>Next: <a href="scalar.en.html" title="next chapter">TS.Scalar</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/developer-guide/internal-libraries/MemSpan.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>