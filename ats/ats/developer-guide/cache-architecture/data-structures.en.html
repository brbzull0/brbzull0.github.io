

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data Structures &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="API functions" href="api-functions.en.html" />
    <link rel="prev" title="Core Cache" href="core-cache-functions.en.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="data-structures">
<span id="developer-cache-data-structures"></span><h1>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h1>
<div class="figure align-center">
<p class="plantuml">
<object data="../../_images/plantuml-f64645ad657b4c1f00dd63fd2ca2372f00472e00.svg" type="image/svg+xml" style="width:206px;height:269px;">
<img src="../../_images/plantuml-f64645ad657b4c1f00dd63fd2ca2372f00472e00.png" alt="hide empty members

CacheHostRecord *-- &quot;*&quot; Stripe : Vol &gt;
CacheHostRecord *-- &quot;*&quot; CacheVol : cp &gt;
CacheVol *-- &quot;*&quot; Stripe : Vol &gt;"/>

</object></p>
</div>
<dl class="var">
<dt id="_CPPv316STORE_BLOCK_SIZE">
<span id="_CPPv216STORE_BLOCK_SIZE"></span><span id="STORE_BLOCK_SIZE__s"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv36size_t" title="size_t">size_t</a> <code class="descname">STORE_BLOCK_SIZE</code> = 8192<a class="headerlink" href="#_CPPv316STORE_BLOCK_SIZE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The storage unit for span and stripe metadata.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv314CacheHostTable">
<span id="_CPPv214CacheHostTable"></span><span id="CacheHostTable"></span><em class="property">class </em><code class="descname">CacheHostTable</code><a class="headerlink" href="#_CPPv314CacheHostTable" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A container that maps from a FQDN to a <a class="reference internal" href="#_CPPv315CacheHostRecord" title="CacheHostRecord"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CacheHostRecord</span></code></a>. This is constructed from
the contents of <a class="reference internal" href="../../admin-guide/files/hosting.config.en.html#std:configfile-hosting.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">hosting.config</span></code></a>.</p>
<dl class="function">
<dt id="_CPPv3N14CacheHostTable5MatchEPciP15CacheHostResult">
<span id="_CPPv2N14CacheHostTable5MatchEPciP15CacheHostResult"></span><span id="CacheHostTable::Match__cCP.i.CacheHostResultP"></span>void <code class="descname">Match</code><span class="sig-paren">(</span>char <em class="property">const</em> *<em>fqdn</em>, int <em>len</em>, <a class="reference internal" href="#_CPPv315CacheHostResult" title="CacheHostResult">CacheHostResult</a> *<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N14CacheHostTable5MatchEPciP15CacheHostResult" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Search the table for a match for the hostname <em>fqdn</em>, a string of length <em>len</em>.
If found the result is placed in <em>result</em>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv315CacheHostResult">
<span id="_CPPv215CacheHostResult"></span><span id="CacheHostResult"></span><em class="property">class </em><code class="descname">CacheHostResult</code><a class="headerlink" href="#_CPPv315CacheHostResult" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A wrapper for <a class="reference internal" href="#_CPPv315CacheHostRecord" title="CacheHostRecord"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CacheHostRecord</span></code></a> used by <a class="reference internal" href="#_CPPv3N14CacheHostTable5MatchEPciP15CacheHostResult" title="CacheHostTable::Match"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CacheHostTable::Match()</span></code></a>. This contains
the set of cache volumes for the cache host record and is used to perform stripe assignment.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv315CacheHostRecord">
<span id="_CPPv215CacheHostRecord"></span><span id="CacheHostRecord"></span><em class="property">class </em><code class="descname">CacheHostRecord</code><a class="headerlink" href="#_CPPv315CacheHostRecord" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A cache hosting record from <a class="reference internal" href="../../admin-guide/files/hosting.config.en.html#std:configfile-hosting.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">hosting.config</span></code></a>.</p>
<dl class="member">
<dt id="_CPPv3N15CacheHostRecord2cpE">
<span id="_CPPv2N15CacheHostRecord2cpE"></span><span id="CacheHostRecord::cp__CacheVolPP"></span><a class="reference internal" href="#_CPPv38CacheVol" title="CacheVol">CacheVol</a> **<code class="descname">cp</code><a class="headerlink" href="#_CPPv3N15CacheHostRecord2cpE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The cache volumes that are part of this cache host record.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15CacheHostRecord4volsE">
<span id="_CPPv2N15CacheHostRecord4volsE"></span><span id="CacheHostRecord::vols__VolPP"></span><a class="reference internal" href="#_CPPv33Vol" title="Vol">Vol</a> **<code class="descname">vols</code><a class="headerlink" href="#_CPPv3N15CacheHostRecord4volsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The stripes that are part of the cache volumes. This is the union over the stripes of
<a class="reference internal" href="#_CPPv3N15CacheHostRecord2cpE" title="CacheHostRecord::cp"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">CacheHostRecord::cp</span></code></a></p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15CacheHostRecord14vol_hash_tableE">
<span id="_CPPv2N15CacheHostRecord14vol_hash_tableE"></span><span id="CacheHostRecord::vol_hash_table__unsigned-shortP"></span>unsigned short *<code class="descname">vol_hash_table</code><a class="headerlink" href="#_CPPv3N15CacheHostRecord14vol_hash_tableE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The stripe assignment table. This is an array of indices in to
<a class="reference internal" href="#_CPPv3N15CacheHostRecord4volsE" title="CacheHostRecord::vols"><code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">CacheHostRecord::vols</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv37OpenDir">
<span id="_CPPv27OpenDir"></span><span id="OpenDir"></span><em class="property">class </em><code class="descname">OpenDir</code><a class="headerlink" href="#_CPPv37OpenDir" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An open directory entry. It contains all the information of a
<a class="reference internal" href="architecture.en.html#_CPPv33Dir" title="Dir"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Dir</span></code></a> plus additional information from the first <a class="reference internal" href="#_CPPv33Doc" title="Doc"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Doc</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv37CacheVC">
<span id="_CPPv27CacheVC"></span><span id="CacheVC"></span><em class="property">class </em><code class="descname">CacheVC</code><a class="headerlink" href="#_CPPv37CacheVC" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A virtual connection class which accepts input for writing to cache.</p>
<dl class="function">
<dt id="_CPPv3N7CacheVC17openReadStartHeadEiP5Event">
<span id="_CPPv2N7CacheVC17openReadStartHeadEiP5Event"></span><span id="CacheVC::openReadStartHead__i.EventP"></span>int <code class="descname">openReadStartHead</code><span class="sig-paren">(</span>int <em>event</em>, <a class="reference internal" href="../threads-and-events.en.html#_CPPv35Event" title="Event">Event</a> *<em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N7CacheVC17openReadStartHeadEiP5Event" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Performs the initial read for a cached object.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N7CacheVC21openReadStartEarliestEiP5Event">
<span id="_CPPv2N7CacheVC21openReadStartEarliestEiP5Event"></span><span id="CacheVC::openReadStartEarliest__i.EventP"></span>int <code class="descname">openReadStartEarliest</code><span class="sig-paren">(</span>int <em>event</em>, <a class="reference internal" href="../threads-and-events.en.html#_CPPv35Event" title="Event">Event</a> *<em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N7CacheVC21openReadStartEarliestEiP5Event" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Performs the initial read for an <a class="reference internal" href="../../appendices/glossary.en.html#term-alternate"><span class="xref std std-term">alternate</span></a> of an object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv310HttpTunnel">
<span id="_CPPv210HttpTunnel"></span><span id="HttpTunnel"></span><em class="property">class </em><code class="descname">HttpTunnel</code><a class="headerlink" href="#_CPPv310HttpTunnel" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Data transfer driver. This contains a set of <em>producers</em>. Each producer is
connected to one or more <em>consumers</em>. The tunnel handles events and buffers
so that data moves from producers to consumers. The data, as much as
possible, is kept in reference counted buffers so that copies are done only
when the data is modified or for sources (which acquire data from outside
Traffic Server) and sinks (which move data to outside Traffic Server).</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv318CacheControlResult">
<span id="_CPPv218CacheControlResult"></span><span id="CacheControlResult"></span><em class="property">class </em><code class="descname">CacheControlResult</code><a class="headerlink" href="#_CPPv318CacheControlResult" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Holds the data from a line in <a class="reference internal" href="../../admin-guide/files/cache.config.en.html#std:configfile-cache.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">cache.config</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv319CacheHTTPInfoVector">
<span id="_CPPv219CacheHTTPInfoVector"></span><span id="CacheHTTPInfoVector"></span><em class="property">class </em><code class="descname">CacheHTTPInfoVector</code><a class="headerlink" href="#_CPPv319CacheHTTPInfoVector" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Defined in <a class="reference external" href="https://github.com/apache/trafficserver/blob/master/iocore/cache/P_CacheHttp.h">iocore/cache/P_CacheHttp.h</a>. This is an array of <a class="reference internal" href="#_CPPv38HTTPInfo" title="HTTPInfo"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HTTPInfo</span></code></a>
objects and serves as the repository of information about alternates of an
object. It is marshaled as part of the metadata for an object in the cache.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv38HTTPInfo">
<span id="_CPPv28HTTPInfo"></span><span id="HTTPInfo"></span><em class="property">class </em><code class="descname">HTTPInfo</code><a class="headerlink" href="#_CPPv38HTTPInfo" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Defined in <a class="reference external" href="https://github.com/apache/trafficserver/blob/master/proxy/hdrs/HTTP.h">proxy/hdrs/HTTP.h</a>.</p>
<p>This class is a wrapper for <a class="reference internal" href="#_CPPv312HTTPCacheAlt" title="HTTPCacheAlt"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HTTPCacheAlt</span></code></a>. It provides the
external API for accessing data in the wrapped class. It contains only a
pointer (possibly <code class="docutils literal notranslate"><span class="pre">NULL</span></code>) to an instance of the wrapped class.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv313CacheHTTPInfo">
<span id="_CPPv213CacheHTTPInfo"></span><span id="CacheHTTPInfo"></span><em class="property">class </em><code class="descname">CacheHTTPInfo</code><a class="headerlink" href="#_CPPv313CacheHTTPInfo" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A typedef for <a class="reference internal" href="#_CPPv38HTTPInfo" title="HTTPInfo"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HTTPInfo</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv312HTTPCacheAlt">
<span id="_CPPv212HTTPCacheAlt"></span><span id="HTTPCacheAlt"></span><em class="property">class </em><code class="descname">HTTPCacheAlt</code><a class="headerlink" href="#_CPPv312HTTPCacheAlt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Defined in <a class="reference external" href="https://github.com/apache/trafficserver/blob/master/proxy/hdrs/HTTP.h">proxy/hdrs/HTTP.h</a>.</p>
<p>This is the metadata for a single <a class="reference internal" href="../../appendices/glossary.en.html#term-alternate"><span class="xref std std-term">alternate</span></a> for a cached object. It
contains, among other data, the following:</p>
<ul class="simple">
<li>The key for the earliest <code class="docutils literal notranslate"><span class="pre">Doc</span></code> of the alternate.</li>
<li>The request and response headers.</li>
<li>The fragment offset table.[#fragment-offset-table]_</li>
<li>Timestamps for request and response from <a class="reference internal" href="../../appendices/glossary.en.html#term-origin-server"><span class="xref std std-term">origin server</span></a>.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="_CPPv33Vol">
<span id="_CPPv23Vol"></span><span id="Vol"></span><em class="property">class </em><code class="descname">Vol</code><a class="headerlink" href="#_CPPv33Vol" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This represents a <a class="reference internal" href="../../appendices/glossary.en.html#term-storage-unit"><span class="xref std std-term">storage unit</span></a> inside a <a class="reference internal" href="../../appendices/glossary.en.html#term-cache-volume"><span class="xref std std-term">cache volume</span></a>.</p>
<dl class="member">
<dt id="_CPPv3N3Vol11data_blocksE">
<span id="_CPPv2N3Vol11data_blocksE"></span><span id="Vol::data_blocks__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">data_blocks</code><a class="headerlink" href="#_CPPv3N3Vol11data_blocksE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of blocks of storage in the stripe.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Vol8aggWriteE">
<span id="_CPPv2N3Vol8aggWriteE"></span>int <code class="descname">aggWrite</code><span class="sig-paren">(</span>int <em>event</em>, void *<em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N3Vol8aggWriteE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Schedule the aggregation buffer to be written to disk.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Vol8segmentsE">
<span id="_CPPv2N3Vol8segmentsE"></span><span id="Vol::segments__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">segments</code><a class="headerlink" href="#_CPPv3N3Vol8segmentsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of segments in the volume. This will be roughly the total
number of entries divided by the number of entries in a segment. It will
be rounded up to cover all entries.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Vol7bucketsE">
<span id="_CPPv2N3Vol7bucketsE"></span><span id="Vol::buckets__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">buckets</code><a class="headerlink" href="#_CPPv3N3Vol7bucketsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of buckets in the volume. This will be roughly the number of
entries in a segment divided by <code class="docutils literal notranslate"><span class="pre">DIR_DEPTH</span></code>. For currently defined
values this is around 16,384 (2^16 / 4). Buckets are used as the targets
of the index hash.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Vol8evacuateE">
<span id="_CPPv2N3Vol8evacuateE"></span><span id="Vol::evacuate__DLL:EvacuationBlock:"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv3I0E3DLL" title="DLL">DLL</a>&lt;<a class="reference internal" href="core-cache-functions.en.html#_CPPv315EvacuationBlock" title="EvacuationBlock">EvacuationBlock</a>&gt; <code class="descname">evacuate</code><a class="headerlink" href="#_CPPv3N3Vol8evacuateE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Array of <a class="reference internal" href="core-cache-functions.en.html#_CPPv315EvacuationBlock" title="EvacuationBlock"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">EvacuationBlock</span></code></a> buckets. This is sized so there
is one bucket for every evacuation span.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Vol3lenE">
<span id="_CPPv2N3Vol3lenE"></span><span id="Vol::len__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">len</code><a class="headerlink" href="#_CPPv3N3Vol3lenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Length of stripe in bytes.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Vol10evac_rangeE">
<span id="_CPPv2N3Vol10evac_rangeE"></span>int <code class="descname">evac_range</code><span class="sig-paren">(</span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <em>low</em>, <a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <em>high</em>, int <em>evac_phase</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N3Vol10evac_rangeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Start an evacuation if there is any <a class="reference internal" href="core-cache-functions.en.html#_CPPv315EvacuationBlock" title="EvacuationBlock"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">EvacuationBlock</span></code></a> in the range
from <em>low</em> to <em>high</em>. Return <code class="docutils literal notranslate"><span class="pre">0</span></code> if no evacuation was started,
non-zero otherwise.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv33Doc">
<span id="_CPPv23Doc"></span><span id="Doc"></span><em class="property">class </em><code class="descname">Doc</code><a class="headerlink" href="#_CPPv33Doc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Defined in <a class="reference external" href="https://github.com/apache/trafficserver/blob/master/iocore/cache/P_CacheVol.h">iocore/cache/P_CacheVol.h</a>.</p>
<dl class="member">
<dt id="_CPPv3N3Doc5magicE">
<span id="_CPPv2N3Doc5magicE"></span><span id="Doc::magic__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">magic</code><a class="headerlink" href="#_CPPv3N3Doc5magicE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Validity check value. Set to <code class="docutils literal notranslate"><span class="pre">DOC_MAGIC</span></code> for a valid document.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc3lenE">
<span id="_CPPv2N3Doc3lenE"></span><span id="Doc::len__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">len</code><a class="headerlink" href="#_CPPv3N3Doc3lenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The length of this segment including the header length, fragment table,
and this structure.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc9total_lenE">
<span id="_CPPv2N3Doc9total_lenE"></span><span id="Doc::total_len__uint64_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint64_t" title="uint64_t">uint64_t</a> <code class="descname">total_len</code><a class="headerlink" href="#_CPPv3N3Doc9total_lenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Total length of the entire document not including meta data but including
headers.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc9first_keyE">
<span id="_CPPv2N3Doc9first_keyE"></span><span id="Doc::first_key__INK_MD5"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv37INK_MD5" title="INK_MD5">INK_MD5</a> <code class="descname">first_key</code><a class="headerlink" href="#_CPPv3N3Doc9first_keyE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>First index key in the document (the index key used to locate this object
in the volume index).</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc3keyE">
<span id="_CPPv2N3Doc3keyE"></span><span id="Doc::key__INK_MD5"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv37INK_MD5" title="INK_MD5">INK_MD5</a> <code class="descname">key</code><a class="headerlink" href="#_CPPv3N3Doc3keyE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The index key for this fragment. Fragment keys are computationally
chained so that the key for the next and previous fragments can be
computed from this key.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc4hlenE">
<span id="_CPPv2N3Doc4hlenE"></span><span id="Doc::hlen__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">hlen</code><a class="headerlink" href="#_CPPv3N3Doc4hlenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Document header (metadata) length. This is not the length of the HTTP
headers.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc5ftypeE">
<span id="_CPPv2N3Doc5ftypeE"></span><span id="Doc::ftype__uint8_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv37uint8_t" title="uint8_t">uint8_t</a> <code class="descname">ftype</code><a class="headerlink" href="#_CPPv3N3Doc5ftypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Fragment type. Currently only <code class="docutils literal notranslate"><span class="pre">CACHE_FRAG_TYPE_HTTP</span></code> is used. Other
types may be used for cache extensions if those are ever implemented.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc4flenE">
<span id="_CPPv2N3Doc4flenE"></span><span id="Doc::flen__uint24_t"></span><a class="reference internal" href="../api/types/CoreTypes.en.html#_CPPv38uint24_t" title="uint24_t">uint24_t</a> <code class="descname">flen</code><a class="headerlink" href="#_CPPv3N3Doc4flenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Fragment table length, if any. Only the first <a class="reference internal" href="#_CPPv33Doc" title="Doc"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Doc</span></code></a> in an object should
contain a fragment table.</p>
<p>The fragment table is a list of offsets relative to the HTTP content (not
counting metadata or HTTP headers). Each offset is the byte offset of the
first byte in the fragment. The first element in the table is the second
fragment (what would be index 1 for an array). The offset for the first
fragment is of course always zero and so not stored. The purpose of this
is to enable a fast seek for range requests. Given the first <code class="docutils literal notranslate"><span class="pre">Doc</span></code> the
fragment containing the first byte in the range can be computed and loaded
directly without further disk access.</p>
<p>Removed as of version 3.3.0. <a class="footnote-reference" href="#fragment-offset-table" id="id1">[1]</a></p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc11sync_serialE">
<span id="_CPPv2N3Doc11sync_serialE"></span><span id="Doc::sync_serial__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">sync_serial</code><a class="headerlink" href="#_CPPv3N3Doc11sync_serialE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unknown.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc12write_serialE">
<span id="_CPPv2N3Doc12write_serialE"></span><span id="Doc::write_serial__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">write_serial</code><a class="headerlink" href="#_CPPv3N3Doc12write_serialE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unknown.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc6pinnedE">
<span id="_CPPv2N3Doc6pinnedE"></span><span id="Doc::pinned__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">pinned</code><a class="headerlink" href="#_CPPv3N3Doc6pinnedE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flag and timer for pinned objects.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N3Doc8checksumE">
<span id="_CPPv2N3Doc8checksumE"></span><span id="Doc::checksum__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">checksum</code><a class="headerlink" href="#_CPPv3N3Doc8checksumE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unknown.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv310DiskHeader">
<span id="_CPPv210DiskHeader"></span><span id="DiskHeader"></span><em class="property">class </em><code class="descname">DiskHeader</code><a class="headerlink" href="#_CPPv310DiskHeader" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Header for a span. This is a serialized data structure.</p>
<dl class="member">
<dt id="_CPPv3N10DiskHeader5magicE">
<span id="_CPPv2N10DiskHeader5magicE"></span><span id="DiskHeader::magic__unsigned-i"></span>unsigned int <code class="descname">magic</code><a class="headerlink" href="#_CPPv3N10DiskHeader5magicE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Holds a magic value :code:<code class="docutils literal notranslate"><span class="pre">DISK_HEADER_MAGIC</span></code> to indicate the span is valid and initialized.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N10DiskHeader11num_volumesE">
<span id="_CPPv2N10DiskHeader11num_volumesE"></span><span id="DiskHeader::num_volumes__unsigned-i"></span>unsigned int <code class="descname">num_volumes</code><a class="headerlink" href="#_CPPv3N10DiskHeader11num_volumesE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Number of cache volumes containing stripes in this span.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N10DiskHeader8num_freeE">
<span id="_CPPv2N10DiskHeader8num_freeE"></span><span id="DiskHeader::num_free__unsigned-i"></span>unsigned int <code class="descname">num_free</code><a class="headerlink" href="#_CPPv3N10DiskHeader8num_freeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of span blocks defined but not in use.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N10DiskHeader8num_usedE">
<span id="_CPPv2N10DiskHeader8num_usedE"></span><span id="DiskHeader::num_used__unsigned-i"></span>unsigned int <code class="descname">num_used</code><a class="headerlink" href="#_CPPv3N10DiskHeader8num_usedE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of span blocks in use by stripes.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N10DiskHeader16num_diskvol_blksE">
<span id="_CPPv2N10DiskHeader16num_diskvol_blksE"></span><span id="DiskHeader::num_diskvol_blks__unsigned-i"></span>unsigned int <code class="descname">num_diskvol_blks</code><a class="headerlink" href="#_CPPv3N10DiskHeader16num_diskvol_blksE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of span blocks.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N10DiskHeader10num_blocksE">
<span id="_CPPv2N10DiskHeader10num_blocksE"></span><span id="DiskHeader::num_blocks__uint64_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint64_t" title="uint64_t">uint64_t</a> <code class="descname">num_blocks</code><a class="headerlink" href="#_CPPv3N10DiskHeader10num_blocksE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of volume blocks in the span.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N10DiskHeader8vol_infoE">
<span id="_CPPv2N10DiskHeader8vol_infoE"></span><span id="DiskHeader::vol_info__DiskVolBlockA"></span><a class="reference internal" href="#_CPPv312DiskVolBlock" title="DiskVolBlock">DiskVolBlock</a> <code class="descname">vol_info</code>[1]<a class="headerlink" href="#_CPPv3N10DiskHeader8vol_infoE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A flexible array. The actual length of this array is <code class="code docutils literal notranslate"><span class="pre">num_diskvol_blks</span></code> and each element describes
a span block.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv312DiskVolBlock">
<span id="_CPPv212DiskVolBlock"></span><span id="DiskVolBlock"></span><em class="property">class </em><code class="descname">DiskVolBlock</code><a class="headerlink" href="#_CPPv312DiskVolBlock" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A description of a span stripe (Vol) block . This is a serialized data structure.</p>
<dl class="member">
<dt id="_CPPv3N12DiskVolBlock6offsetE">
<span id="_CPPv2N12DiskVolBlock6offsetE"></span><span id="DiskVolBlock::offset__uint64_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint64_t" title="uint64_t">uint64_t</a> <code class="descname">offset</code><a class="headerlink" href="#_CPPv3N12DiskVolBlock6offsetE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Offset in the span of the start of the span stripe (Vol) block, in bytes.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N12DiskVolBlock3lenE">
<span id="_CPPv2N12DiskVolBlock3lenE"></span><span id="DiskVolBlock::len__uint64_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint64_t" title="uint64_t">uint64_t</a> <code class="descname">len</code><a class="headerlink" href="#_CPPv3N12DiskVolBlock3lenE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Length of the span block in store blocks.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N12DiskVolBlock6numberE">
<span id="_CPPv2N12DiskVolBlock6numberE"></span><span id="DiskVolBlock::number__i"></span>int <code class="descname">number</code><a class="headerlink" href="#_CPPv3N12DiskVolBlock6numberE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The cache volume index for this span block.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N12DiskVolBlock4typeE">
<span id="_CPPv2N12DiskVolBlock4typeE"></span><span id="DiskVolBlock::type__unsigned-i"></span>unsigned int __attribute__((bitfield_3)) <code class="descname">type</code><a class="headerlink" href="#_CPPv3N12DiskVolBlock4typeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Type of the span block.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N12DiskVolBlock4freeE">
<span id="_CPPv2N12DiskVolBlock4freeE"></span><span id="DiskVolBlock::free__unsigned-i"></span>unsigned int __attribute__((bitfield_1)) <code class="descname">free</code><a class="headerlink" href="#_CPPv3N12DiskVolBlock4freeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>In use or free flag - set if the span block is not in use by a cache volume.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv315VolHeaderFooter">
<span id="_CPPv215VolHeaderFooter"></span><span id="VolHeaderFooter"></span><em class="property">class </em><code class="descname">VolHeaderFooter</code><a class="headerlink" href="#_CPPv315VolHeaderFooter" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="member">
<dt id="_CPPv3N15VolHeaderFooter5magicE">
<span id="_CPPv2N15VolHeaderFooter5magicE"></span><span id="VolHeaderFooter::magic__unsigned-i"></span>unsigned int <code class="descname">magic</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter5magicE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Container for a magic value, <code class="docutils literal notranslate"><span class="pre">VOL_MAGIC</span></code>, to indicate the instance is valid.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter7versionE">
<span id="_CPPv2N15VolHeaderFooter7versionE"></span><span id="VolHeaderFooter::version__VersionNumber"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv313VersionNumber" title="VersionNumber">VersionNumber</a> <code class="descname">version</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter7versionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Version of the instance.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter11create_timeE">
<span id="_CPPv2N15VolHeaderFooter11create_timeE"></span><span id="VolHeaderFooter::create_time__time_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv36time_t" title="time_t">time_t</a> <code class="descname">create_time</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter11create_timeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Epoch time when the stripe was created.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter9write_posE">
<span id="_CPPv2N15VolHeaderFooter9write_posE"></span><span id="VolHeaderFooter::write_pos__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">write_pos</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter9write_posE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Position of the write cursor, as a byte offset in the stripe.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter14last_write_posE">
<span id="_CPPv2N15VolHeaderFooter14last_write_posE"></span><span id="VolHeaderFooter::last_write_pos__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">last_write_pos</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter14last_write_posE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Location of the write cursor of the most recently completed disk write.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter7agg_posE">
<span id="_CPPv2N15VolHeaderFooter7agg_posE"></span><span id="VolHeaderFooter::agg_pos__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">agg_pos</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter7agg_posE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The byte offset in the stripe where the current aggregation buffer will be written.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter10generationE">
<span id="_CPPv2N15VolHeaderFooter10generationE"></span><span id="VolHeaderFooter::generation__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">generation</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter10generationE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generation of this instance.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter5phaseE">
<span id="_CPPv2N15VolHeaderFooter5phaseE"></span><span id="VolHeaderFooter::phase__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">phase</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter5phaseE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter5cycleE">
<span id="_CPPv2N15VolHeaderFooter5cycleE"></span><span id="VolHeaderFooter::cycle__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">cycle</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter5cycleE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter11sync_serialE">
<span id="_CPPv2N15VolHeaderFooter11sync_serialE"></span><span id="VolHeaderFooter::sync_serial__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">sync_serial</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter11sync_serialE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter12write_serialE">
<span id="_CPPv2N15VolHeaderFooter12write_serialE"></span><span id="VolHeaderFooter::write_serial__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">write_serial</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter12write_serialE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter5dirtyE">
<span id="_CPPv2N15VolHeaderFooter5dirtyE"></span><span id="VolHeaderFooter::dirty__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">dirty</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter5dirtyE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter6unusedE">
<span id="_CPPv2N15VolHeaderFooter6unusedE"></span><span id="VolHeaderFooter::unused__uint32_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint32_t" title="uint32_t">uint32_t</a> <code class="descname">unused</code><a class="headerlink" href="#_CPPv3N15VolHeaderFooter6unusedE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N15VolHeaderFooter8freelistE">
<span id="_CPPv2N15VolHeaderFooter8freelistE"></span><span id="VolHeaderFooter::freelist__uint16_tA"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint16_t" title="uint16_t">uint16_t</a> <code class="descname">freelist</code>[1]<a class="headerlink" href="#_CPPv3N15VolHeaderFooter8freelistE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An array of directory entry indices. Each element is the directory entry of the start of the free list
for a segment, in the same order as the segments in the directory.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv317DiskVolBlockQueue">
<span id="_CPPv217DiskVolBlockQueue"></span><span id="DiskVolBlockQueue"></span><em class="property">class </em><code class="descname">DiskVolBlockQueue</code><a class="headerlink" href="#_CPPv317DiskVolBlockQueue" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="member">
<dt id="_CPPv3N17DiskVolBlockQueue1bE">
<span id="_CPPv2N17DiskVolBlockQueue1bE"></span><span id="DiskVolBlockQueue::b__DiskVolBlockP"></span><a class="reference internal" href="#_CPPv312DiskVolBlock" title="DiskVolBlock">DiskVolBlock</a> *<code class="descname">b</code><a class="headerlink" href="#_CPPv3N17DiskVolBlockQueue1bE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N17DiskVolBlockQueue9new_blockE">
<span id="_CPPv2N17DiskVolBlockQueue9new_blockE"></span><span id="DiskVolBlockQueue::new_block__i"></span>int <code class="descname">new_block</code><a class="headerlink" href="#_CPPv3N17DiskVolBlockQueue9new_blockE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicates if this is a new stripe rather than an existing one. In case a stripe is new ATS decides to clear that stripe(<a class="reference internal" href="#_CPPv33Vol" title="Vol"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Vol</span></code></a>)</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N17DiskVolBlockQueue4linkE">
<span id="_CPPv2N17DiskVolBlockQueue4linkE"></span><span id="DiskVolBlockQueue::link__LINK:DiskVolBlockQueue:"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv3I0E4LINK" title="LINK">LINK</a>&lt;<a class="reference internal" href="#_CPPv317DiskVolBlockQueue" title="DiskVolBlockQueue">DiskVolBlockQueue</a>&gt; <code class="descname">link</code><a class="headerlink" href="#_CPPv3N17DiskVolBlockQueue4linkE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv37DiskVol">
<span id="_CPPv27DiskVol"></span><span id="DiskVol"></span><em class="property">class </em><code class="descname">DiskVol</code><a class="headerlink" href="#_CPPv37DiskVol" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Describes the Disk that contains the stripe identified by vol_number. This class also contains the queue
containing all the DiskVolBlock</p>
<dl class="member">
<dt id="_CPPv3N7DiskVol13num_volblocksE">
<span id="_CPPv2N7DiskVol13num_volblocksE"></span><span id="DiskVol::num_volblocks__i"></span>int <code class="descname">num_volblocks</code><a class="headerlink" href="#_CPPv3N7DiskVol13num_volblocksE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Number of blocks in the stripe identified by vol_number</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N7DiskVol10vol_numberE">
<span id="_CPPv2N7DiskVol10vol_numberE"></span><span id="DiskVol::vol_number__i"></span>int <code class="descname">vol_number</code><a class="headerlink" href="#_CPPv3N7DiskVol10vol_numberE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Identification number of the stripe (<a class="reference internal" href="#_CPPv33Vol" title="Vol"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Vol</span></code></a>)</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N7DiskVol4sizeE">
<span id="_CPPv2N7DiskVol4sizeE"></span><span id="DiskVol::size__uint64_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv38uint64_t" title="uint64_t">uint64_t</a> <code class="descname">size</code><a class="headerlink" href="#_CPPv3N7DiskVol4sizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the stripe</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N7DiskVol4diskE">
<span id="_CPPv2N7DiskVol4diskE"></span><span id="DiskVol::disk__CacheDiskP"></span><a class="reference internal" href="core-cache-functions.en.html#_CPPv39CacheDisk" title="CacheDisk">CacheDisk</a> *<code class="descname">disk</code><a class="headerlink" href="#_CPPv3N7DiskVol4diskE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The disk containing the stripe</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N7DiskVol9dpb_queueE">
<span id="_CPPv2N7DiskVol9dpb_queueE"></span><span id="DiskVol::dpb_queue__Queue:DiskVolBlockQueue:"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv3I0E5Queue" title="Queue">Queue</a>&lt;<a class="reference internal" href="#_CPPv317DiskVolBlockQueue" title="DiskVolBlockQueue">DiskVolBlockQueue</a>&gt; <code class="descname">dpb_queue</code><a class="headerlink" href="#_CPPv3N7DiskVol9dpb_queueE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="enum">
<dt id="_CPPv39CacheType">
<span id="_CPPv29CacheType"></span><em class="property">enum </em><code class="descname">CacheType</code><a class="headerlink" href="#_CPPv39CacheType" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="enumerator">
<dt id="_CPPv3N9CacheType4HTTPE">
<span id="_CPPv2N9CacheType4HTTPE"></span><em class="property">enumerator </em><code class="descname">HTTP</code><a class="headerlink" href="#_CPPv3N9CacheType4HTTPE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N9CacheType6StreamE">
<span id="_CPPv2N9CacheType6StreamE"></span><em class="property">enumerator </em><code class="descname">Stream</code><a class="headerlink" href="#_CPPv3N9CacheType6StreamE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv38CacheVol">
<span id="_CPPv28CacheVol"></span><span id="CacheVol"></span><em class="property">class </em><code class="descname">CacheVol</code><a class="headerlink" href="#_CPPv38CacheVol" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A <a class="reference internal" href="../../appendices/glossary.en.html#term-cache-volume"><span class="xref std std-term">cache volume</span></a> as described in <a class="reference internal" href="../../admin-guide/files/volume.config.en.html#std:configfile-volume.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">volume.config</span></code></a>. This class represents a single volume. <a class="reference internal" href="#_CPPv38CacheVol" title="CacheVol"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CacheVol</span></code></a> comprises of stripes spread across Spans(disks)</p>
<dl class="member">
<dt id="_CPPv3N8CacheVol13volume_numberE">
<span id="_CPPv2N8CacheVol13volume_numberE"></span><span id="CacheVol::volume_number__i"></span>int <code class="descname">volume_number</code><a class="headerlink" href="#_CPPv3N8CacheVol13volume_numberE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>identification number of this volume</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol6schemeE">
<span id="_CPPv2N8CacheVol6schemeE"></span><span id="CacheVol::scheme__i"></span>int <code class="descname">scheme</code><a class="headerlink" href="#_CPPv3N8CacheVol6schemeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An enumeration of value <a class="reference internal" href="#_CPPv3N9CacheType4HTTPE" title="CacheType::HTTP"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">CacheType::HTTP</span></code></a> or <a class="reference internal" href="#_CPPv3N9CacheType6StreamE" title="CacheType::Stream"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">CacheType::Stream</span></code></a>.</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol4sizeE">
<span id="_CPPv2N8CacheVol4sizeE"></span><span id="CacheVol::size__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">size</code><a class="headerlink" href="#_CPPv3N8CacheVol4sizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol8num_volsE">
<span id="_CPPv2N8CacheVol8num_volsE"></span><span id="CacheVol::num_vols__i"></span>int <code class="descname">num_vols</code><a class="headerlink" href="#_CPPv3N8CacheVol8num_volsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Number of stripes(<a class="reference internal" href="#_CPPv33Vol" title="Vol"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Vol</span></code></a>) contained in this volume</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol4volsE">
<span id="_CPPv2N8CacheVol4volsE"></span><span id="CacheVol::vols__VolPP"></span><a class="reference internal" href="#_CPPv33Vol" title="Vol">Vol</a> **<code class="descname">vols</code><a class="headerlink" href="#_CPPv3N8CacheVol4volsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><a class="reference internal" href="#_CPPv33Vol" title="Vol"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Vol</span></code></a> represents a single stripe in the disk. vols contains all the stripes this volume is made up of</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol9disk_volsE">
<span id="_CPPv2N8CacheVol9disk_volsE"></span><span id="CacheVol::disk_vols__DiskVolPP"></span><a class="reference internal" href="#_CPPv37DiskVol" title="DiskVol">DiskVol</a> **<code class="descname">disk_vols</code><a class="headerlink" href="#_CPPv3N8CacheVol9disk_volsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>disk_vols contain references to the disks of all the stripes in this volume</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol4linkE">
<span id="_CPPv2N8CacheVol4linkE"></span><span id="CacheVol::link__LINK:CacheVol:"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv3I0E4LINK" title="LINK">LINK</a>&lt;<a class="reference internal" href="#_CPPv38CacheVol" title="CacheVol">CacheVol</a>&gt; <code class="descname">link</code><a class="headerlink" href="#_CPPv3N8CacheVol4linkE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N8CacheVol7vol_rsbE">
<span id="_CPPv2N8CacheVol7vol_rsbE"></span><span id="CacheVol::vol_rsb__RecRawStatBlock"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv315RecRawStatBlock" title="RecRawStatBlock">RecRawStatBlock</a> <code class="descname">vol_rsb</code><a class="headerlink" href="#_CPPv3N8CacheVol7vol_rsbE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>per volume stat</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv39ConfigVol">
<span id="_CPPv29ConfigVol"></span><span id="ConfigVol"></span><em class="property">class </em><code class="descname">ConfigVol</code><a class="headerlink" href="#_CPPv39ConfigVol" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This class represents an individual volume.</p>
<dl class="member">
<dt id="_CPPv3N9ConfigVol6numberE">
<span id="_CPPv2N9ConfigVol6numberE"></span><span id="ConfigVol::number__i"></span>int <code class="descname">number</code><a class="headerlink" href="#_CPPv3N9ConfigVol6numberE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Identification number of the volume</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N9ConfigVol6schemeE">
<span id="_CPPv2N9ConfigVol6schemeE"></span><span id="ConfigVol::scheme__CacheType"></span><a class="reference internal" href="#_CPPv39CacheType" title="CacheType">CacheType</a> <code class="descname">scheme</code><a class="headerlink" href="#_CPPv3N9ConfigVol6schemeE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N9ConfigVol4sizeE">
<span id="_CPPv2N9ConfigVol4sizeE"></span><span id="ConfigVol::size__off_t"></span><a class="reference internal" href="../api/types/SystemTypes.en.html#_CPPv35off_t" title="off_t">off_t</a> <code class="descname">size</code><a class="headerlink" href="#_CPPv3N9ConfigVol4sizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N9ConfigVol10in_percentE">
<span id="_CPPv2N9ConfigVol10in_percentE"></span><span id="ConfigVol::in_percent__b"></span>bool <code class="descname">in_percent</code><a class="headerlink" href="#_CPPv3N9ConfigVol10in_percentE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Used as an indicator if the volume is part of the overall volumes created by ATS</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N9ConfigVol7percentE">
<span id="_CPPv2N9ConfigVol7percentE"></span><span id="ConfigVol::percent__i"></span>int <code class="descname">percent</code><a class="headerlink" href="#_CPPv3N9ConfigVol7percentE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N9ConfigVol6cachepE">
<span id="_CPPv2N9ConfigVol6cachepE"></span><span id="ConfigVol::cachep__CacheVolP"></span><a class="reference internal" href="#_CPPv38CacheVol" title="CacheVol">CacheVol</a> *<code class="descname">cachep</code><a class="headerlink" href="#_CPPv3N9ConfigVol6cachepE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N9ConfigVol4linkE">
<span id="_CPPv2N9ConfigVol4linkE"></span><span id="ConfigVol::link__LINK:ConfigVol:"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv3I0E4LINK" title="LINK">LINK</a>&lt;<a class="reference internal" href="#_CPPv39ConfigVol" title="ConfigVol">ConfigVol</a>&gt; <code class="descname">link</code><a class="headerlink" href="#_CPPv3N9ConfigVol4linkE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv313ConfigVolumes">
<span id="_CPPv213ConfigVolumes"></span><span id="ConfigVolumes"></span><em class="property">class </em><code class="descname">ConfigVolumes</code><a class="headerlink" href="#_CPPv313ConfigVolumes" title="Permalink to this definition">¶</a><br /></dt>
<dd><dl class="member">
<dt id="_CPPv3N13ConfigVolumes11num_volumesE">
<span id="_CPPv2N13ConfigVolumes11num_volumesE"></span><span id="ConfigVolumes::num_volumes__i"></span>int <code class="descname">num_volumes</code><a class="headerlink" href="#_CPPv3N13ConfigVolumes11num_volumesE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Total number of volumes specified in volume.config</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N13ConfigVolumes16num_http_volumesE">
<span id="_CPPv2N13ConfigVolumes16num_http_volumesE"></span><span id="ConfigVolumes::num_http_volumes__i"></span>int <code class="descname">num_http_volumes</code><a class="headerlink" href="#_CPPv3N13ConfigVolumes16num_http_volumesE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Total number of volumes specified in volume.config for HTTP scheme</p>
</dd></dl>

<dl class="member">
<dt id="_CPPv3N13ConfigVolumes8cp_queueE">
<span id="_CPPv2N13ConfigVolumes8cp_queueE"></span><span id="ConfigVolumes::cp_queue__Queue:ConfigVol:"></span><a class="reference internal" href="../api/functions/TSTypes.en.html#_CPPv3I0E5Queue" title="Queue">Queue</a>&lt;<a class="reference internal" href="#_CPPv39ConfigVol" title="ConfigVol">ConfigVol</a>&gt; <code class="descname">cp_queue</code><a class="headerlink" href="#_CPPv3N13ConfigVolumes8cp_queueE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="_CPPv35Cache">
<span id="_CPPv25Cache"></span><span id="Cache"></span><em class="property">class </em><code class="descname">Cache</code><a class="headerlink" href="#_CPPv35Cache" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Base object for a cache.</p>
<dl class="member">
<dt id="_CPPv3N5Cache9hosttableE">
<span id="_CPPv2N5Cache9hosttableE"></span><span id="Cache::hosttable__CacheHostRecord"></span><a class="reference internal" href="#_CPPv315CacheHostRecord" title="CacheHostRecord">CacheHostRecord</a> <code class="descname">hosttable</code><a class="headerlink" href="#_CPPv3N5Cache9hosttableE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A generic class:<cite>CacheHostRecord</cite> that contains all cache volumes that are not explicitly
assigned in <a class="reference internal" href="../../admin-guide/files/hosting.config.en.html#std:configfile-hosting.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">hosting.config</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N5Cache10key_to_volEPKcPKci">
<span id="_CPPv2N5Cache10key_to_volEPKcPKci"></span><span id="Cache::key_to_vol__cCP.cCP.i"></span><a class="reference internal" href="#_CPPv33Vol" title="Vol">Vol</a> *<code class="descname">key_to_vol</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>key</em>, <em class="property">const</em> char *<em>host</em>, int <em>host_len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N5Cache10key_to_volEPKcPKci" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the stripe (<code class="code docutils literal notranslate"><span class="pre">Vol*</span></code>) for a cache <em>key</em> and <em>host</em>. The <em>host</em> is
used to find the appropriate <a class="reference internal" href="#_CPPv315CacheHostRecord" title="CacheHostRecord"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CacheHostRecord</span></code></a> instance. From there the stripe
assignment slot is determined by taking bits 64..83 (20 bits) of the cache <em>key</em> modulo
the stripe assignment array count (<code class="code docutils literal notranslate"><span class="pre">VOL_HASH_TABLE_SIZE</span></code>). These bits are the third 32
bit slice of the <em>key</em> less the bottom <code class="code docutils literal notranslate"><span class="pre">DIR_TAG_WIDTH</span></code> (12) bits.</p>
</dd></dl>

</dd></dl>

<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="fragment-offset-table" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Changed in version 3.2.0. This previously resided in the first <code class="docutils literal notranslate"><span class="pre">Doc</span></code> but
that caused different alternates to share the same fragment table.</td></tr>
</tbody>
</table>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonrpc/index.en.html">JSONRPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.en.html">Developer’s Guide</a><ul>
  <li><a href="index.en.html">Cache Architecture</a><ul>
      <li>Previous: <a href="core-cache-functions.en.html" title="previous chapter">Core Cache</a></li>
      <li>Next: <a href="api-functions.en.html" title="next chapter">API functions</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/developer-guide/cache-architecture/data-structures.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>