

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JSONRPC &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Design Documents" href="../design-documents/index.en.html" />
    <link rel="prev" title="URL Rewrite Architecture" href="url_rewrite_architecture.en.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>JSONRPC<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="jsonrpc-2-0-protocol">
<span id="jsonrpc-protocol"></span><h2>JSONRPC 2.0 Protocol<a class="headerlink" href="#jsonrpc-2-0-protocol" title="Permalink to this headline">¶</a></h2>
<p>JSON-RPC is a stateless, light-weight remote procedure call (RPC) protocol. Primarily this specification defines several data structures
and the rules around their processing. It is transport agnostic in that the concepts can be used within the same process, over sockets,
over http, or in many various message passing environments. It uses JSON (<a class="reference external" href="https://tools.ietf.org/html/rfc4627.html">RFC 4627</a>) as data format.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although most of the protocol specs are granted, we do have implemented some exceptions. All the modifications we have implemented will
be documented.</p>
</div>
<p>There are a set  of mandatory fields that must be included in a <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> message as well as some optional fields, all this is documented here,
you also can find this information in the <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> link.</p>
<div class="section" id="requests">
<span id="jsonrpc-request"></span><h3>Requests<a class="headerlink" href="#requests" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Mandatory fields.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="6%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">jsonrpc</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Protocol version. Traffic Server follows the version 2.0 so this field should be <strong>only</strong> <code class="docutils literal notranslate"><span class="pre">2.0</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">method</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Method name that is intended to be invoked.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Optional parameters:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">params</span></code>:</p>
<blockquote>
<div><p>A Structured value that holds the parameter values to be used during the invocation of the method. This member
<strong>may</strong> be omitted. If passed then a parameters for the rpc call <strong>must</strong> be provided as a Structured value.
Either by-position through an Array or by-name through an Object.</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">by-position</span></code> <em>array</em></p>
<p>params <strong>must</strong> be an <code class="docutils literal notranslate"><span class="pre">array</span></code>, containing the values in the server expected order.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;apache&quot;</span><span class="p">,</span> <span class="s2">&quot;traffic&quot;</span><span class="p">,</span> <span class="s2">&quot;server&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Apache&quot;</span>
   <span class="p">},{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Traffic&quot;</span>
   <span class="p">},{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Server&quot;</span>
   <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">by-name</span></code>: <em>object</em></p>
<p>Params <strong>must</strong> be an <code class="docutils literal notranslate"><span class="pre">object</span></code>, with member names that match the server expected parameter names.
The absence of expected names <strong>may</strong> result in an error being generated by the server. The names <strong>must</strong>
match exactly, including case, to the method’s expected parameters.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Apache&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<blockquote>
<div><p>An identifier established by the Client. If present, the request will be treated as a jsonrpc method and a
response should be expected from the server. If it is not present, the server will treat the request as a
notification and the client should not expect any response back from the server.
<em>Although a |number| can  be specified here we will convert this internally to a |str|. The response will be a |str|.</em></p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="responses">
<span id="jsonrpc-response"></span><h3>Responses<a class="headerlink" href="#responses" title="Permalink to this headline">¶</a></h3>
<p>Although each individual API call will describe the response details and some specific errors, in this section we will describe a high
level protocol errors, some defined by the <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> specs and some by Traffic Server</p>
<p>The responses have the following structure:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="8%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">jsonrpc</span></code></td>
<td><em>string|number</em></td>
<td>A Number that indicates the error type that occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">result</span></code></td>
<td>ok</td>
<td>Result of the invoked operation. See <a class="reference internal" href="#jsonrpc-result">jsonrpc-result</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td><em>string|number</em></td>
<td>It will be the same as the value of the id member in the <a class="reference internal" href="#jsonrpc-request">jsonrpc-request</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">error</span></code></td>
<td><em>object</em></td>
<td>Error object, it will be present in case of an error. See <a class="reference internal" href="#jsonrpc-error">jsonrpc-error</a></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Example 1.</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Example 2.</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">-32600</span><span class="p">,</span>
      <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid Request&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<div class="section" id="result">
<span id="jsonrpc-result"></span><h4>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>This member is required and will be present on success.</li>
<li>This member will not exist if there was an error invoking the method.</li>
<li>The value of this member is determined by the method invoked on the Server.</li>
<li>The value of this member is determined by the method invoked on the Server.</li>
</ul>
<p>In Traffic Server a RPC method that does not report any error and have nothing to send back to the client will use the following format to
express that the call was successfully handled and the command was executed.</p>
<p id="success-response">Example:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;89fc5aea-0740-11eb-82c0-001fc69cc946&quot;</span><span class="p">,</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="hll">   <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="errors">
<span id="jsonrpc-error"></span><h4>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h4>
<p>The specs define the error fields that the client must expect to be sent back from the Server in case of an error.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">code</span></code></td>
<td><em>number</em></td>
<td>A Number that indicates the error type that occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">message</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A String providing a short description of the error.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">data</span></code></td>
<td><em>object</em></td>
<td>This is an optional field that contains additional error data.</td>
</tr>
</tbody>
</table>
<p># data.</p>
<p>This can be used for nested error so Traffic Server can inform a detailed error.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">code</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The error code. Integer type.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">message</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The explanatory string for this error.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p># Fetch records from Traffic Server</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ded7018e-0720-11eb-abe2-001fc69cc946&quot;</span><span class="p">,</span>
   <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;recordList&quot;</span><span class="p">:</span> <span class="p">[{</span>
         <span class="nt">&quot;record&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;record_name&quot;</span><span class="p">:</span> <span class="s2">&quot;proxy.config.log.rolling_interval_sec&quot;</span><span class="p">,</span>
            <span class="nt">&quot;record_type&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;raw_stat_block&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
            <span class="nt">&quot;order&quot;</span><span class="p">:</span> <span class="s2">&quot;410&quot;</span><span class="p">,</span>
            <span class="nt">&quot;config_meta&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;access_type&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
               <span class="nt">&quot;update_status&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
               <span class="nt">&quot;update_type&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
               <span class="nt">&quot;checktype&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
               <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
               <span class="nt">&quot;check_expr&quot;</span><span class="p">:</span> <span class="s2">&quot;^[0-9]+$&quot;</span>
            <span class="p">},</span>
            <span class="nt">&quot;record_class&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;overridable&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
            <span class="nt">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;INT&quot;</span><span class="p">,</span>
            <span class="nt">&quot;current_value&quot;</span><span class="p">:</span> <span class="s2">&quot;86416&quot;</span><span class="p">,</span>
            <span class="nt">&quot;default_value&quot;</span><span class="p">:</span> <span class="s2">&quot;86400&quot;</span>
         <span class="p">}</span>
      <span class="p">}]</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p># Getting errors from Traffic Server</p>
<blockquote>
<div><p>Parse Error.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">-32700</span><span class="p">,</span> <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Parse error&quot;</span><span class="p">}}</span>
</pre></div>
</div>
<p>Invalid method invocation.</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p id="rpc-error-code">Internally we have this <code class="docutils literal notranslate"><span class="pre">enum</span></code> class that defines the errors that the server will inform in any case. Some of this errors are already
defined by the <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> specs and some (<code class="docutils literal notranslate"><span class="pre">&gt;=1</span></code>) are a Server definition.</p>
<dl class="class">
<dt id="_CPPv312RpcErrorCode">
<span id="_CPPv212RpcErrorCode"></span><span id="RpcErrorCode"></span><em class="property">class </em><code class="descname">RpcErrorCode</code><a class="headerlink" href="#_CPPv312RpcErrorCode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Defines the API error codes that will be used in case of any RPC error.</p>
<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode15INVALID_REQUESTE">
<span id="_CPPv2N12RpcErrorCode15INVALID_REQUESTE"></span><em class="property">enumerator </em><code class="descname">INVALID_REQUEST</code> = -32600<a class="headerlink" href="#_CPPv3N12RpcErrorCode15INVALID_REQUESTE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode16METHOD_NOT_FOUNDE">
<span id="_CPPv2N12RpcErrorCode16METHOD_NOT_FOUNDE"></span><em class="property">enumerator </em><code class="descname">METHOD_NOT_FOUND</code> = -32601<a class="headerlink" href="#_CPPv3N12RpcErrorCode16METHOD_NOT_FOUNDE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode14INVALID_PARAMSE">
<span id="_CPPv2N12RpcErrorCode14INVALID_PARAMSE"></span><em class="property">enumerator </em><code class="descname">INVALID_PARAMS</code> = -32602<a class="headerlink" href="#_CPPv3N12RpcErrorCode14INVALID_PARAMSE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode14INTERNAL_ERRORE">
<span id="_CPPv2N12RpcErrorCode14INTERNAL_ERRORE"></span><em class="property">enumerator </em><code class="descname">INTERNAL_ERROR</code> = -32603<a class="headerlink" href="#_CPPv3N12RpcErrorCode14INTERNAL_ERRORE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode11PARSE_ERRORE">
<span id="_CPPv2N12RpcErrorCode11PARSE_ERRORE"></span><em class="property">enumerator </em><code class="descname">PARSE_ERROR</code> = -32700<a class="headerlink" href="#_CPPv3N12RpcErrorCode11PARSE_ERRORE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> defined errors.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode14InvalidVersionE">
<span id="_CPPv2N12RpcErrorCode14InvalidVersionE"></span><em class="property">enumerator </em><code class="descname">InvalidVersion</code> = 1<a class="headerlink" href="#_CPPv3N12RpcErrorCode14InvalidVersionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed version is invalid. <strong>must</strong> be 2.0</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode18InvalidVersionTypeE">
<span id="_CPPv2N12RpcErrorCode18InvalidVersionTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidVersionType</code> = 2<a class="headerlink" href="#_CPPv3N12RpcErrorCode18InvalidVersionTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed version field type is invalid. <strong>must</strong> be a <strong>string</strong></p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode14MissingVersionE">
<span id="_CPPv2N12RpcErrorCode14MissingVersionE"></span><em class="property">enumerator </em><code class="descname">MissingVersion</code> = 3<a class="headerlink" href="#_CPPv3N12RpcErrorCode14MissingVersionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Version field is missing from the request. This field is mandatory.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode17InvalidMethodTypeE">
<span id="_CPPv2N12RpcErrorCode17InvalidMethodTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidMethodType</code> = 4<a class="headerlink" href="#_CPPv3N12RpcErrorCode17InvalidMethodTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed method field type is invalid. <strong>must</strong> be a <strong>string</strong></p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode13MissingMethodE">
<span id="_CPPv2N12RpcErrorCode13MissingMethodE"></span><em class="property">enumerator </em><code class="descname">MissingMethod</code> = 5<a class="headerlink" href="#_CPPv3N12RpcErrorCode13MissingMethodE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Method field is missing from the request. This field is mandatory.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode16InvalidParamTypeE">
<span id="_CPPv2N12RpcErrorCode16InvalidParamTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidParamType</code> = 6<a class="headerlink" href="#_CPPv3N12RpcErrorCode16InvalidParamTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed parameter field type is not valid.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode13InvalidIdTypeE">
<span id="_CPPv2N12RpcErrorCode13InvalidIdTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidIdType</code> = 7<a class="headerlink" href="#_CPPv3N12RpcErrorCode13InvalidIdTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed id field type is invalid.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode6NullIdE">
<span id="_CPPv2N12RpcErrorCode6NullIdE"></span><em class="property">enumerator </em><code class="descname">NullId</code> = 8<a class="headerlink" href="#_CPPv3N12RpcErrorCode6NullIdE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed if is <code class="docutils literal notranslate"><span class="pre">null</span></code></p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv3N12RpcErrorCode14ExecutionErrorE">
<span id="_CPPv2N12RpcErrorCode14ExecutionErrorE"></span><em class="property">enumerator </em><code class="descname">ExecutionError</code> = 9<a class="headerlink" href="#_CPPv3N12RpcErrorCode14ExecutionErrorE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An error occured during the execution of the RPC call. This error is used as a generic High level error. The details details about
the error, in most cases are specified in the <code class="docutils literal notranslate"><span class="pre">data</span></code> field.</p>
</dd></dl>

</dd></dl>

<p>Examples:</p>
<blockquote>
<div><p># Server response to a drain request while the server is already draining.</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;30700808-0cc4-11eb-b811-001fc69cc946&quot;</span><span class="p">,</span>
   <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="p">{</span>

      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
      <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Error during execution&quot;</span><span class="p">,</span>
      <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[{</span>

         <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
         <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Server already draining.&quot;</span>
         <span class="p">}]</span>

   <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="rpc-architecture">
<h2>RPC Architecture<a class="headerlink" href="#rpc-architecture" title="Permalink to this headline">¶</a></h2>
<p>In order to programs communicate with Traffic Server there is an RPC mechanism that exposes several client APIs.</p>
<div class="section" id="protocol">
<h3>Protocol<a class="headerlink" href="#protocol" title="Permalink to this headline">¶</a></h3>
<p>The RPC mechanism implements a JSONRPC protocol <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a>. You can refer to this section <a class="reference internal" href="#jsonrpc-protocol">jsonrpc-protocol</a> for more information.</p>
</div>
<div class="section" id="server">
<h3>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ipc">
<h4>IPC<a class="headerlink" href="#ipc" title="Permalink to this headline">¶</a></h4>
<p>The current server implementation runs on an IPC Socket(Unix Domain Socket). This server implements an iterative server style. Configuration
for this particular server style can be found in the admin section <a class="reference internal" href="../../admin-guide/jsonrpc/index.en.html#admnin-jsonrpc-configuration"><span class="std std-ref">Configuration</span></a>.
This implementation runs on a dedicated thread and as their style express this performs blocking calls to the registered handlers.</p>
</div>
</div>
<div class="section" id="using-the-jsonrpc-mechanism">
<h3>Using the JSONRPC mechanism<a class="headerlink" href="#using-the-jsonrpc-mechanism" title="Permalink to this headline">¶</a></h3>
<p>You can find a detailed information about how to use the current implementation and how to interact with Traffic Server in the admin section. <a class="reference internal" href="../../admin-guide/jsonrpc/index.en.html#admnin-jsonrpc-configuration"><span class="std std-ref">Configuration</span></a>.</p>
</div>
<div class="section" id="json-parsing">
<h3>JSON Parsing<a class="headerlink" href="#json-parsing" title="Permalink to this headline">¶</a></h3>
<p>The JSONRPC protocol uses libyamlcpp for parsing incoming and outgoing requests, this allow the server to accept either JSON or YAML
format messages which then will be parsed by the protocol implementation parser.
The protocol implementation knows the request format and will respond with the same, this means that if the server receives a JSON message
the outgoing response will be as well JSON, if YAML is the request format, then the response will be YAML as well. This eventually will allow clients to
feed configuration wrapped into a jsonrpc format message directly into Traffic Server.</p>
</div>
</div>
<div class="section" id="development-guide">
<h2>Development Guide<a class="headerlink" href="#development-guide" title="Permalink to this headline">¶</a></h2>
<div class="section" id="development-api">
<h3>Development API<a class="headerlink" href="#development-api" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="handling-errors">
<h3>Handling Errors<a class="headerlink" href="#handling-errors" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="parsing-incoming-parameters">
<h3>Parsing incoming parameters<a class="headerlink" href="#parsing-incoming-parameters" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="send-information-back">
<h3>Send information back<a class="headerlink" href="#send-information-back" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="registering-public-handlers">
<h3>Registering public handlers<a class="headerlink" href="#registering-public-handlers" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonrpc/index.en.html">JSONRPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.en.html">Developer’s Guide</a><ul>
  <li><a href="index.en.html">Core Architecture</a><ul>
      <li>Previous: <a href="url_rewrite_architecture.en.html" title="previous chapter">URL Rewrite Architecture</a></li>
      <li>Next: <a href="../design-documents/index.en.html" title="next chapter">Design Documents</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/developer-guide/core-architecture/jsonrpc.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>