

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Debug Builds &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using TSAssert" href="using-tsassert.en.html" />
    <link rel="prev" title="Debugging and Analysis" href="index.en.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="debug-builds">
<span id="developer-debug-builds"></span><h1>Debug Builds<a class="headerlink" href="#debug-builds" title="Permalink to this headline">¶</a></h1>
<p>A debugger can set breakpoints in a plugin. Use a Traffic Server debug
build and compile the plugin with the <code class="docutils literal notranslate"><span class="pre">-g</span></code> option. A debugger can also
be used to analyze a core dump. To generate core, set the size limit of
the core files in the <a class="reference internal" href="../../admin-guide/files/records.config.en.html#std:configfile-records.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">records.config</span></code></a> file to -1 as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CONFIG :ts:cv:`proxy.config.core_limit` INT -1
</pre></div>
</div>
<p>This is the equivalent of setting <code class="docutils literal notranslate"><span class="pre">ulimit</span> <span class="pre">-c</span> <span class="pre">unlimited</span></code></p>
<div class="section" id="debugging-tips">
<h2>Debugging Tips:<a class="headerlink" href="#debugging-tips" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Use a Traffic Server debug version.</li>
<li>Use assertions in your plugin (<a class="reference internal" href="../api/functions/TSDebug.en.html#c.TSAssert" title="TSAssert"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSAssert()</span></code></a> and <a class="reference internal" href="../api/functions/TSDebug.en.html#c.TSReleaseAssert" title="TSReleaseAssert"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSReleaseAssert()</span></code></a>).</li>
</ul>
</div>
</div>
<div class="section" id="systemtap-and-dtrace-support">
<h1>SystemTap and DTrace support<a class="headerlink" href="#systemtap-and-dtrace-support" title="Permalink to this headline">¶</a></h1>
<p>Traffic Server can be instrumented with <strong>SystemTap</strong> on Linux systems, or
<strong>DTrace</strong> on *BSDs and macOS. In order to use such tools, Traffic Server needs
to be built with <code class="docutils literal notranslate"><span class="pre">-g</span></code>, or the debug symbols need to be installed. On Debian
systems, install the <code class="docutils literal notranslate"><span class="pre">trafficserver-dbgsym</span></code> package to install the debug
symbols.</p>
<p>In addition to the normal probe points that can be used with SystemTap and
DTrace, such as function calls and specific statements, Traffic Server does
provide SDT markers at various interesting code paths.</p>
<p>Pass the <code class="docutils literal notranslate"><span class="pre">--enable-systemtap</span></code> flag to <code class="docutils literal notranslate"><span class="pre">./configure</span></code> in order to build
Traffic Server with dtrace style markers (SDT). On Traffic Server builds with
SDT markers enabled, you can list the available markers with <code class="docutils literal notranslate"><span class="pre">stap</span> <span class="pre">-L</span>
<span class="pre">'process(&quot;/path/to/traffic_server&quot;).mark(&quot;*&quot;)</span></code>.</p>
<p>See the <a class="reference external" href="https://sourceware.org/systemtap/wiki/AddingUserSpaceProbingToApps">SystemTap documentation</a> and the <a class="reference external" href="http://dtrace.org/guide/chp-sdt.html">DTrace guide</a> for more information.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonrpc/index.en.html">JSONRPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.en.html">Developer’s Guide</a><ul>
  <li><a href="index.en.html">Debugging and Analysis</a><ul>
      <li>Previous: <a href="index.en.html" title="previous chapter">Debugging and Analysis</a></li>
      <li>Next: <a href="using-tsassert.en.html" title="next chapter">Using TSAssert</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/developer-guide/debugging/debug-builds.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>