<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="347px" preserveAspectRatio="none" style="width:1255px;height:347px;" version="1.1" viewBox="0 0 1255 347" width="1255px" zoomAndPan="magnify"><defs><filter height="300%" id="f17y547l75phn2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class traffic_ctl--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="73.6094" id="traffic_ctl" style="stroke: #A80036; stroke-width: 1.5;" width="260" x="175" y="8"/><ellipse cx="272.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M275.2188,29.6406 Q274.6406,29.9375 274,30.0781 Q273.3594,30.2344 272.6563,30.2344 Q270.1563,30.2344 268.8281,28.5938 Q267.5156,26.9375 267.5156,23.8125 Q267.5156,20.6875 268.8281,19.0313 Q270.1563,17.375 272.6563,17.375 Q273.3594,17.375 274,17.5313 Q274.6563,17.6875 275.2188,17.9844 L275.2188,20.7031 Q274.5938,20.125 274,19.8594 Q273.4063,19.5781 272.7813,19.5781 Q271.4375,19.5781 270.75,20.6563 Q270.0625,21.7188 270.0625,23.8125 Q270.0625,25.9063 270.75,26.9844 Q271.4375,28.0469 272.7813,28.0469 Q273.4063,28.0469 274,27.7813 Q274.5938,27.5 275.2188,26.9219 L275.2188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="292.75" y="28.1543">traffic_ctl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="176" x2="434" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="248" x="181" y="54.2104">command :std::shared_ptr&lt;CtrlCommand&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="181" y="67.0151">parser: ArgParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="176" x2="434" y1="73.6094" y2="73.6094"/><path d="M6,32.5 L6,57.6328 A0,0 0 0 0 6,57.6328 L140,57.6328 A0,0 0 0 0 140,57.6328 L140,50.5 L174.85,45 L140,42.5 L140,42.5 L130,32.5 L6,32.5 A0,0 0 0 0 6,32.5 " fill="#FBFB77" filter="url(#f17y547l75phn2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M130,32.5 L130,42.5 L140,42.5 L130,32.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="12" y="49.5669">ArgParser Invoker</text><!--class CtrlCommand--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="73.6094" id="CtrlCommand" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="470.5" y="8"/><ellipse cx="542.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M545.2188,29.6406 Q544.6406,29.9375 544,30.0781 Q543.3594,30.2344 542.6563,30.2344 Q540.1563,30.2344 538.8281,28.5938 Q537.5156,26.9375 537.5156,23.8125 Q537.5156,20.6875 538.8281,19.0313 Q540.1563,17.375 542.6563,17.375 Q543.3594,17.375 544,17.5313 Q544.6563,17.6875 545.2188,17.9844 L545.2188,20.7031 Q544.5938,20.125 544,19.8594 Q543.4063,19.5781 542.7813,19.5781 Q541.4375,19.5781 540.75,20.6563 Q540.0625,21.7188 540.0625,23.8125 Q540.0625,25.9063 540.75,26.9844 Q541.4375,28.0469 542.7813,28.0469 Q543.4063,28.0469 544,27.7813 Q544.5938,27.5 545.2188,26.9219 L545.2188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="562.75" y="28.1543">CtrlCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="471.5" x2="704.5" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="476.5" y="54.2104">_printer: std::unique_ptr&lt;BasePrinter&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="471.5" x2="704.5" y1="60.8047" y2="60.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="476.5" y="75.0151">virtual void execute()</text><!--class DirectRPCCommand--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="60.8047" id="DirectRPCCommand" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="251.5" y="148.5"/><ellipse cx="266.5" cy="164.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M269.4688,170.1406 Q268.8906,170.4375 268.25,170.5781 Q267.6094,170.7344 266.9063,170.7344 Q264.4063,170.7344 263.0781,169.0938 Q261.7656,167.4375 261.7656,164.3125 Q261.7656,161.1875 263.0781,159.5313 Q264.4063,157.875 266.9063,157.875 Q267.6094,157.875 268.25,158.0313 Q268.9063,158.1875 269.4688,158.4844 L269.4688,161.2031 Q268.8438,160.625 268.25,160.3594 Q267.6563,160.0781 267.0313,160.0781 Q265.6875,160.0781 265,161.1563 Q264.3125,162.2188 264.3125,164.3125 Q264.3125,166.4063 265,167.4844 Q265.6875,168.5469 267.0313,168.5469 Q267.6563,168.5469 268.25,168.2813 Q268.8438,168 269.4688,167.4219 L269.4688,170.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="123" x="280.5" y="168.6543">DirectRPCCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="252.5" x2="405.5" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="252.5" x2="405.5" y1="188.5" y2="188.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="257.5" y="202.7104">void execute()</text><!--class RecordCommand--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="60.8047" id="RecordCommand" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="442" y="148.5"/><ellipse cx="457" cy="164.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459.9688,170.1406 Q459.3906,170.4375 458.75,170.5781 Q458.1094,170.7344 457.4063,170.7344 Q454.9063,170.7344 453.5781,169.0938 Q452.2656,167.4375 452.2656,164.3125 Q452.2656,161.1875 453.5781,159.5313 Q454.9063,157.875 457.4063,157.875 Q458.1094,157.875 458.75,158.0313 Q459.4063,158.1875 459.9688,158.4844 L459.9688,161.2031 Q459.3438,160.625 458.75,160.3594 Q458.1563,160.0781 457.5313,160.0781 Q456.1875,160.0781 455.5,161.1563 Q454.8125,162.2188 454.8125,164.3125 Q454.8125,166.4063 455.5,167.4844 Q456.1875,168.5469 457.5313,168.5469 Q458.1563,168.5469 458.75,168.2813 Q459.3438,168 459.9688,167.4219 L459.9688,170.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="471" y="168.6543">RecordCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="443" x2="579" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="443" x2="579" y1="188.5" y2="188.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="448" y="202.7104">void execute()</text><!--class XCommand--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="60.8047" id="XCommand" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="615.5" y="148.5"/><ellipse cx="630.5" cy="164.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M633.4688,170.1406 Q632.8906,170.4375 632.25,170.5781 Q631.6094,170.7344 630.9063,170.7344 Q628.4063,170.7344 627.0781,169.0938 Q625.7656,167.4375 625.7656,164.3125 Q625.7656,161.1875 627.0781,159.5313 Q628.4063,157.875 630.9063,157.875 Q631.6094,157.875 632.25,158.0313 Q632.9063,158.1875 633.4688,158.4844 L633.4688,161.2031 Q632.8438,160.625 632.25,160.3594 Q631.6563,160.0781 631.0313,160.0781 Q629.6875,160.0781 629,161.1563 Q628.3125,162.2188 628.3125,164.3125 Q628.3125,166.4063 629,167.4844 Q629.6875,168.5469 631.0313,168.5469 Q631.6563,168.5469 632.25,168.2813 Q632.8438,168 633.4688,167.4219 L633.4688,170.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="644.5" y="168.6543">XCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="616.5" x2="715.5" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="616.5" x2="715.5" y1="188.5" y2="188.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="621.5" y="202.7104">void execute()</text><!--class BasePrinter--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="73.6094" id="BasePrinter" style="stroke: #A80036; stroke-width: 1.5;" width="246" x="752" y="142"/><ellipse cx="835.25" cy="158" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M835.3594,153.3438 L834.2031,158.4219 L836.5313,158.4219 L835.3594,153.3438 Z M833.875,151.1094 L836.8594,151.1094 L840.2188,163.5 L837.7656,163.5 L837,160.4375 L833.7188,160.4375 L832.9688,163.5 L830.5313,163.5 L833.875,151.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="855.75" y="162.1543">BasePrinter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="753" x2="997" y1="174" y2="174"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753" x2="997" y1="182" y2="182"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="758" y="196.2104">void write_output(JSONRPCResponse)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="758" y="209.0151">virtual void write_output(std::string_view)</text><!--class XPrinter--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="60.8047" id="XPrinter" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="505.5" y="276"/><ellipse cx="588.25" cy="292" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M591.2188,297.6406 Q590.6406,297.9375 590,298.0781 Q589.3594,298.2344 588.6563,298.2344 Q586.1563,298.2344 584.8281,296.5938 Q583.5156,294.9375 583.5156,291.8125 Q583.5156,288.6875 584.8281,287.0313 Q586.1563,285.375 588.6563,285.375 Q589.3594,285.375 590,285.5313 Q590.6563,285.6875 591.2188,285.9844 L591.2188,288.7031 Q590.5938,288.125 590,287.8594 Q589.4063,287.5781 588.7813,287.5781 Q587.4375,287.5781 586.75,288.6563 Q586.0625,289.7188 586.0625,291.8125 Q586.0625,293.9063 586.75,294.9844 Q587.4375,296.0469 588.7813,296.0469 Q589.4063,296.0469 590,295.7813 Q590.5938,295.5 591.2188,294.9219 L591.2188,297.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="608.75" y="296.1543">XPrinter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="506.5" x2="727.5" y1="308" y2="308"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="506.5" x2="727.5" y1="316" y2="316"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="511.5" y="330.2104">void write_output(JSONRPCResponse)</text><!--class DiffConfigPrinter--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="60.8047" id="DiffConfigPrinter" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="763.5" y="276"/><ellipse cx="820.25" cy="292" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M823.2188,297.6406 Q822.6406,297.9375 822,298.0781 Q821.3594,298.2344 820.6563,298.2344 Q818.1563,298.2344 816.8281,296.5938 Q815.5156,294.9375 815.5156,291.8125 Q815.5156,288.6875 816.8281,287.0313 Q818.1563,285.375 820.6563,285.375 Q821.3594,285.375 822,285.5313 Q822.6563,285.6875 823.2188,285.9844 L823.2188,288.7031 Q822.5938,288.125 822,287.8594 Q821.4063,287.5781 820.7813,287.5781 Q819.4375,287.5781 818.75,288.6563 Q818.0625,289.7188 818.0625,291.8125 Q818.0625,293.9063 818.75,294.9844 Q819.4375,296.0469 820.7813,296.0469 Q821.4063,296.0469 822,295.7813 Q822.5938,295.5 823.2188,294.9219 L823.2188,297.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="101" x="840.75" y="296.1543">DiffConfigPrinter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="764.5" x2="985.5" y1="308" y2="308"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="764.5" x2="985.5" y1="316" y2="316"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="769.5" y="330.2104">void write_output(JSONRPCResponse)</text><!--class RecordPrinter--><rect fill="#FEFECE" filter="url(#f17y547l75phn2)" height="60.8047" id="RecordPrinter" style="stroke: #A80036; stroke-width: 1.5;" width="223" x="1021.5" y="276"/><ellipse cx="1085.75" cy="292" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1088.7188,297.6406 Q1088.1406,297.9375 1087.5,298.0781 Q1086.8594,298.2344 1086.1563,298.2344 Q1083.6563,298.2344 1082.3281,296.5938 Q1081.0156,294.9375 1081.0156,291.8125 Q1081.0156,288.6875 1082.3281,287.0313 Q1083.6563,285.375 1086.1563,285.375 Q1086.8594,285.375 1087.5,285.5313 Q1088.1563,285.6875 1088.7188,285.9844 L1088.7188,288.7031 Q1088.0938,288.125 1087.5,287.8594 Q1086.9063,287.5781 1086.2813,287.5781 Q1084.9375,287.5781 1084.25,288.6563 Q1083.5625,289.7188 1083.5625,291.8125 Q1083.5625,293.9063 1084.25,294.9844 Q1084.9375,296.0469 1086.2813,296.0469 Q1086.9063,296.0469 1087.5,295.7813 Q1088.0938,295.5 1088.7188,294.9219 L1088.7188,297.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="1106.25" y="296.1543">RecordPrinter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1022.5" x2="1243.5" y1="308" y2="308"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1022.5" x2="1243.5" y1="316" y2="316"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="211" x="1027.5" y="330.2104">void write_output(JSONRPCResponse)</text><!--link traffic_ctl to CtrlCommand--><path d="M435.17,45 C440.21,45 445.26,45 450.3,45 " fill="none" id="traffic_ctl-CtrlCommand" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="450.39,38,470.39,45,450.39,52,450.39,38" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CtrlCommand to RecordCommand--><path d="M556.81,99.47 C547.11,116.09 536.77,133.82 528.38,148.21 " fill="none" id="CtrlCommand-RecordCommand" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="550.84,95.82,566.96,82.07,562.93,102.87,550.84,95.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CtrlCommand to DirectRPCCommand--><path d="M499.2,91.26 C462.1,110.16 420.05,131.6 387.02,148.43 " fill="none" id="CtrlCommand-DirectRPCCommand" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="496.23,84.91,517.23,82.07,502.59,97.39,496.23,84.91" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CtrlCommand to XCommand--><path d="M619.59,99.47 C629.42,116.09 639.89,133.82 648.4,148.21 " fill="none" id="CtrlCommand-XCommand" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="613.46,102.85,609.31,82.07,625.51,95.73,613.46,102.85" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CtrlCommand to BasePrinter--><path d="M678.52,87.63 C716.46,105.08 760.14,125.17 796.67,141.97 " fill="none" id="CtrlCommand-BasePrinter" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="666.42,82.07,670.1958,88.2136,677.319,87.0912,673.5432,80.9476,666.42,82.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--link BasePrinter to DiffConfigPrinter--><path d="M875,236.73 C875,250.15 875,263.95 875,275.62 " fill="none" id="BasePrinter-DiffConfigPrinter" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="868,236.3,875,216.3,882,236.3,868,236.3" style="stroke: #A80036; stroke-width: 1.0;"/><!--link BasePrinter to RecordPrinter--><path d="M967.61,225.05 C1002.42,241.98 1041.08,260.79 1072.26,275.96 " fill="none" id="BasePrinter-RecordPrinter" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="964.2,231.17,949.28,216.13,970.33,218.59,964.2,231.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--link BasePrinter to XPrinter--><path d="M782.39,225.05 C747.58,241.98 708.92,260.79 677.74,275.96 " fill="none" id="BasePrinter-XPrinter" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="779.67,218.59,800.72,216.13,785.8,231.17,779.67,218.59" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
class traffic_ctl {

command :std::shared_ptr<CtrlCommand>
parser: ArgParser
}
note left: ArgParser Invoker
class CtrlCommand {
virtual void execute()
_printer: std::unique_ptr<BasePrinter>
}

class DirectRPCCommand {
void execute()
}
class RecordCommand {
void execute()
}
class XCommand {
void execute()
}


traffic_ctl -|> CtrlCommand
CtrlCommand <|- - RecordCommand 
CtrlCommand <|- - DirectRPCCommand
CtrlCommand <|- - XCommand

abstract BasePrinter {
void write_output(JSONRPCResponse)
virtual void write_output(std::string_view)
}
CtrlCommand *- - BasePrinter

class XPrinter{
void write_output(JSONRPCResponse)
}
class DiffConfigPrinter{
void write_output(JSONRPCResponse)
}

class RecordPrinter{
void write_output(JSONRPCResponse)
}

BasePrinter <|- - DiffConfigPrinter
BasePrinter <|- - RecordPrinter
BasePrinter <|- - XPrinter
@enduml

PlantUML version 1.2018.01(Sun Jan 28 18:08:22 GMT 2018)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+11
Operating System: Linux
OS Version: 5.10.7-200.fc33.x86_64
Default Encoding: UTF-8
Language: en
Country: IE
--></g></svg>