<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="480px" preserveAspectRatio="none" style="width:943px;height:480px;" version="1.1" viewBox="0 0 943 480" width="943px" zoomAndPan="magnify"><defs><filter height="300%" id="f157gvkgkqsrmb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class JsonRPCManager--><rect fill="#FEFECE" filter="url(#f157gvkgkqsrmb)" height="99.2188" id="JsonRPCManager" style="stroke: #A80036; stroke-width: 1.5;" width="224" x="162.5" y="8"/><ellipse cx="217.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M220.7188,29.6406 Q220.1406,29.9375 219.5,30.0781 Q218.8594,30.2344 218.1563,30.2344 Q215.6563,30.2344 214.3281,28.5938 Q213.0156,26.9375 213.0156,23.8125 Q213.0156,20.6875 214.3281,19.0313 Q215.6563,17.375 218.1563,17.375 Q218.8594,17.375 219.5,17.5313 Q220.1563,17.6875 220.7188,17.9844 L220.7188,20.7031 Q220.0938,20.125 219.5,19.8594 Q218.9063,19.5781 218.2813,19.5781 Q216.9375,19.5781 216.25,20.6563 Q215.5625,21.7188 215.5625,23.8125 Q215.5625,25.9063 216.25,26.9844 Q216.9375,28.0469 218.2813,28.0469 Q218.9063,28.0469 219.5,27.7813 Q220.0938,27.5 220.7188,26.9219 L220.7188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="238.25" y="28.1543">JsonRPCManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="163.5" x2="385.5" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="163.5" x2="385.5" y1="48" y2="48"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="168.5" y="62.2104">add_handler(name, Func)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="168.5" y="75.0151">add_notification_handler(name, Func)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="168.5" y="87.8198">rsponse handle_call(request)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="168.5" y="100.6245">JsonRPCManager instance()</text><path d="M6,45 L6,70.1328 A0,0 0 0 0 6,70.1328 L127,70.1328 A0,0 0 0 0 127,70.1328 L127,63 L162.46,57.5 L127,55 L127,55 L117,45 L6,45 A0,0 0 0 0 6,45 " fill="#FBFB77" filter="url(#f157gvkgkqsrmb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M117,45 L117,55 L127,55 L117,45 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="12" y="62.0669">Singleton class.</text><!--class Dispatcher--><rect fill="#FEFECE" filter="url(#f157gvkgkqsrmb)" height="60.8047" id="Dispatcher" style="stroke: #A80036; stroke-width: 1.5;" width="364" x="92.5" y="167"/><ellipse cx="236.25" cy="183" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M239.2188,188.6406 Q238.6406,188.9375 238,189.0781 Q237.3594,189.2344 236.6563,189.2344 Q234.1563,189.2344 232.8281,187.5938 Q231.5156,185.9375 231.5156,182.8125 Q231.5156,179.6875 232.8281,178.0313 Q234.1563,176.375 236.6563,176.375 Q237.3594,176.375 238,176.5313 Q238.6563,176.6875 239.2188,176.9844 L239.2188,179.7031 Q238.5938,179.125 238,178.8594 Q237.4063,178.5781 236.7813,178.5781 Q235.4375,178.5781 234.75,179.6563 Q234.0625,180.7188 234.0625,182.8125 Q234.0625,184.9063 234.75,185.9844 Q235.4375,187.0469 236.7813,187.0469 Q237.4063,187.0469 238,186.7813 Q238.5938,186.5 239.2188,185.9219 L239.2188,188.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="256.75" y="187.1543">Dispatcher</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="93.5" x2="455.5" y1="199" y2="199"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="352" x="98.5" y="213.2104">_handlers: std::unordered_map&lt;std::string, InternalHandler&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="93.5" x2="455.5" y1="219.8047" y2="219.8047"/><!--class InternalHandler--><rect fill="#FEFECE" filter="url(#f157gvkgkqsrmb)" height="60.8047" id="InternalHandler" style="stroke: #A80036; stroke-width: 1.5;" width="423" x="63" y="288"/><ellipse cx="221.75" cy="304" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M224.7188,309.6406 Q224.1406,309.9375 223.5,310.0781 Q222.8594,310.2344 222.1563,310.2344 Q219.6563,310.2344 218.3281,308.5938 Q217.0156,306.9375 217.0156,303.8125 Q217.0156,300.6875 218.3281,299.0313 Q219.6563,297.375 222.1563,297.375 Q222.8594,297.375 223.5,297.5313 Q224.1563,297.6875 224.7188,297.9844 L224.7188,300.7031 Q224.0938,300.125 223.5,299.8594 Q222.9063,299.5781 222.2813,299.5781 Q220.9375,299.5781 220.25,300.6563 Q219.5625,301.7188 219.5625,303.8125 Q219.5625,305.9063 220.25,306.9844 Q220.9375,308.0469 222.2813,308.0469 Q222.9063,308.0469 223.5,307.7813 Q224.0938,307.5 224.7188,306.9219 L224.7188,309.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="97" x="242.25" y="308.1543">InternalHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="64" x2="485" y1="320" y2="320"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="411" x="69" y="334.2104">_func: std::variant&lt;std::monostate, Notification, Method, PluginMethod&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="64" x2="485" y1="340.8047" y2="340.8047"/><!--class FunctionWrapper--><rect fill="#FEFECE" filter="url(#f157gvkgkqsrmb)" height="60.8047" id="FunctionWrapper" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="205" y="409"/><ellipse cx="220" cy="425" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M222.9688,430.6406 Q222.3906,430.9375 221.75,431.0781 Q221.1094,431.2344 220.4063,431.2344 Q217.9063,431.2344 216.5781,429.5938 Q215.2656,427.9375 215.2656,424.8125 Q215.2656,421.6875 216.5781,420.0313 Q217.9063,418.375 220.4063,418.375 Q221.1094,418.375 221.75,418.5313 Q222.4063,418.6875 222.9688,418.9844 L222.9688,421.7031 Q222.3438,421.125 221.75,420.8594 Q221.1563,420.5781 220.5313,420.5781 Q219.1875,420.5781 218.5,421.6563 Q217.8125,422.7188 217.8125,424.8125 Q217.8125,426.9063 218.5,427.9844 Q219.1875,429.0469 220.5313,429.0469 Q221.1563,429.0469 221.75,428.7813 Q222.3438,428.5 222.9688,427.9219 L222.9688,430.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="234" y="429.1543">FunctionWrapper</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="206" x2="343" y1="441" y2="441"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="211" y="455.2104">callback: std::function</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="206" x2="343" y1="461.8047" y2="461.8047"/><path d="M491.5,185 L491.5,193.5 L456.73,197.5 L491.5,201.5 L491.5,210.1328 A0,0 0 0 0 491.5,210.1328 L931.5,210.1328 A0,0 0 0 0 931.5,210.1328 L931.5,195 L921.5,185 L491.5,185 A0,0 0 0 0 491.5,185 " fill="#FBFB77" filter="url(#f157gvkgkqsrmb)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M921.5,185 L921.5,195 L931.5,195 L921.5,185 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="419" x="497.5" y="202.0669">Class that knows how to call each callback handler. Storage class.</text><!--link JsonRPCManager to Dispatcher--><path d="M274.5,120.47 C274.5,136.55 274.5,153.16 274.5,166.73 " fill="none" id="JsonRPCManager-Dispatcher" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="274.5,107.15,270.5,113.15,274.5,119.15,278.5,113.15,274.5,107.15" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Dispatcher to InternalHandler--><path d="M274.5,241.23 C274.5,256.64 274.5,273.68 274.5,287.74 " fill="none" id="Dispatcher-InternalHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="274.5,228.22,270.5,234.22,274.5,240.22,278.5,234.22,274.5,228.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--link InternalHandler to FunctionWrapper--><path d="M274.5,362.23 C274.5,377.64 274.5,394.68 274.5,408.74 " fill="none" id="InternalHandler-FunctionWrapper" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="274.5,349.22,270.5,355.22,274.5,361.22,278.5,355.22,274.5,349.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
class JsonRPCManager {
add_handler(name, Func)
add_notification_handler(name, Func)
rsponse handle_call(request)
JsonRPCManager instance()
}
note left: Singleton class.

class Dispatcher {
    _handlers: std::unordered_map<std::string, InternalHandler>
}

class InternalHandler {
    _func: std::variant<std::monostate, Notification, Method, PluginMethod>
}

class FunctionWrapper {
    callback: std::function
}

JsonRPCManager *- - Dispatcher
note right: Class that knows how to call each callback handler. Storage class.
Dispatcher *- - InternalHandler
InternalHandler *- - FunctionWrapper
@enduml

PlantUML version 1.2018.01(Sun Jan 28 18:08:22 GMT 2018)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+11
Operating System: Linux
OS Version: 5.10.7-200.fc33.x86_64
Default Encoding: UTF-8
Language: en
Country: IE
--></g></svg>