

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>TSSslSession &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/override.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Plugin Statistics" href="TSStat.en.html" />
    <link rel="prev" title="TSSslServerContextCreate" href="TSSslServerContextCreate.en.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="tssslsession">
<h1>TSSslSession<a class="headerlink" href="#tssslsession" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;ts/ts.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
<dl class="function">
<dt id="c.TSSslSessionGet">
<a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSession" title="TSSslSession">TSSslSession</a> <code class="descname">TSSslSessionGet</code><span class="sig-paren">(</span>const <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSessionID" title="TSSslSessionID">TSSslSessionID</a> *<em>&nbsp;sessionid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TSSslSessionGet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.TSSslSessionGetBuffer">
int <code class="descname">TSSslSessionGetBuffer</code><span class="sig-paren">(</span>const <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSessionID" title="TSSslSessionID">TSSslSessionID</a> *<em>&nbsp;sessionid</em>, char *<em>&nbsp;buffer</em>, int *<em>&nbsp;len_ptr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TSSslSessionGetBuffer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.TSSslSessionInsert">
<a class="reference internal" href="../types/TSReturnCode.en.html#c.TSReturnCode" title="TSReturnCode">TSReturnCode</a> <code class="descname">TSSslSessionInsert</code><span class="sig-paren">(</span>const <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSessionID" title="TSSslSessionID">TSSslSessionID</a> *<em>&nbsp;sessionid</em>, <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSession" title="TSSslSession">TSSslSession</a><em>&nbsp;addSession</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TSSslSessionInsert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.TSSslSessionRemove">
<a class="reference internal" href="../types/TSReturnCode.en.html#c.TSReturnCode" title="TSReturnCode">TSReturnCode</a> <code class="descname">TSSslSessionRemove</code><span class="sig-paren">(</span>const <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSessionID" title="TSSslSessionID">TSSslSessionID</a> *<em>&nbsp;sessionid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TSSslSessionRemove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.TSSslTicketKeyUpdate">
void <code class="descname">TSSslTicketKeyUpdate</code><span class="sig-paren">(</span>char *<em>&nbsp;ticketData</em>, int<em>&nbsp;ticketDataLength</em><span class="sig-paren">)</span><a class="headerlink" href="#c.TSSslTicketKeyUpdate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>These functions work with the internal ATS session cache.  These functions are only useful if the ATS internal
session cache is enabled by setting <a class="reference internal" href="../../../admin-guide/files/records.config.en.html#proxy-config-ssl-session-cache" title="records.config"><code class="xref ts ts-cv docutils literal notranslate"><span class="pre">proxy.config.ssl.session_cache</span></code></a> has been set to 2.</p>
<p>These functions tend to be used with the <a class="reference internal" href="../../plugins/hooks-and-transactions/ssl-session-api.en.html#c.TS_SSL_SESSION_HOOK" title="TS_SSL_SESSION_HOOK"><code class="xref c c-macro docutils literal notranslate"><span class="pre">TS_SSL_SESSION_HOOK</span></code></a>.</p>
<p>The functions work with the <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSessionID" title="TSSslSessionID"><code class="xref c c-type docutils literal notranslate"><span class="pre">TSSslSessionID</span></code></a> object to identify sessions to retrieve, insert, or delete.</p>
<p>The functions also work with the <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSession" title="TSSslSession"><code class="xref c c-type docutils literal notranslate"><span class="pre">TSSslSession</span></code></a> object which can be cast to a pointer to the openssl SSL_SESSION object.</p>
<p>These functions perform the appropriate locking on the session cache to avoid errors.</p>
<p>The <a class="reference internal" href="#c.TSSslSessionGet" title="TSSslSessionGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionGet()</span></code></a> and <a class="reference internal" href="#c.TSSslSessionGetBuffer" title="TSSslSessionGetBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionGetBuffer()</span></code></a> functions retrieve the <a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSession" title="TSSslSession"><code class="xref c c-type docutils literal notranslate"><span class="pre">TSSslSession</span></code></a> object that is identified by the
<a class="reference internal" href="../types/TSSslSession.en.html#c.TSSslSessionID" title="TSSslSessionID"><code class="xref c c-type docutils literal notranslate"><span class="pre">TSSslSessionID</span></code></a> object.  If there is no matching session object, <a class="reference internal" href="#c.TSSslSessionGet" title="TSSslSessionGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionGet()</span></code></a> returns NULL and <a class="reference internal" href="#c.TSSslSessionGetBuffer" title="TSSslSessionGetBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionGetBuffer()</span></code></a>
returns 0.</p>
<p><a class="reference internal" href="#c.TSSslSessionGetBuffer" title="TSSslSessionGetBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionGetBuffer()</span></code></a> returns the session information serialized in a buffer that can be shared between processes.
When the function is called len_ptr should point to the amount of space
available in the buffer parameter.  The function returns the amount of data really needed to encode the session.  len_ptr is updated with the amount of data actually stored in the buffer.
<a class="reference internal" href="#c.TSSslSessionGetBuffer" title="TSSslSessionGetBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionGetBuffer()</span></code></a> will not overrun the provided buffer, but the caller should ensure that the data’s size was not larger
than the buffer by comparing the returned value with the value of len_ptr. If the returned value is larger than the buffer size,
then the session data did not fit in the buffer and the session data stored in the buffer output variable should not be used.</p>
<p><a class="reference internal" href="#c.TSSslSessionInsert" title="TSSslSessionInsert"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionInsert()</span></code></a> inserts the session specified by the addSession parameter into the ATS session cache under the sessionid key.
If there is already an entry in the cache for the session id key, it is first removed before the new entry is added.</p>
<p><a class="reference internal" href="#c.TSSslSessionRemove" title="TSSslSessionRemove"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslSessionRemove()</span></code></a> removes the session entry from the session cache that is keyed by sessionid.</p>
<p><a class="reference internal" href="#c.TSSslTicketKeyUpdate" title="TSSslTicketKeyUpdate"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslTicketKeyUpdate()</span></code></a> updates the running ATS process to use a new set of Session Ticket Encryption keys.  This behaves the same way as
updating the session ticket encrypt key file with new data and reloading the current ATS process.  However, this API does not
require writing session ticket encryption keys to disk.</p>
<p>If both the ticket key files and <a class="reference internal" href="#c.TSSslTicketKeyUpdate" title="TSSslTicketKeyUpdate"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSSslTicketKeyUpdate()</span></code></a> are used to update session ticket encryption keys, ATS will use the most recent update
regardless if whether it was made by file and configuration reload or API.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins/index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonrpc/index.en.html">JSONRPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.en.html">Developer’s Guide</a><ul>
  <li><a href="../index.en.html">API Reference</a><ul>
  <li><a href="index.en.html">API Functions</a><ul>
      <li>Previous: <a href="TSSslServerContextCreate.en.html" title="previous chapter">TSSslServerContextCreate</a></li>
      <li>Next: <a href="TSStat.en.html" title="next chapter">Plugin Statistics</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/developer-guide/api/functions/TSSslSession.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>