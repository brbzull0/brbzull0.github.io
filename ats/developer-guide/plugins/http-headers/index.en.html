


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>HTTP Headers &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/override.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Traffic Server HTTP Header System" href="trafficserver-http-header-system.en.html" />
    <link rel="prev" title="Cache API" href="../io/cache-api.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.en.html">Plugin Development</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../introduction.en.html">Plugin Development Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-plugins.en.html">Building Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration.en.html">Plugin Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugin-management/index.en.html">Plugin Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../actions/index.en.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hooks-and-transactions/index.en.html">Hooks and Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../continuations/index.en.html">Continuations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mutexes.en.html">Mutexes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../io/index.en.html">IO</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">HTTP Headers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="trafficserver-http-header-system.en.html">Traffic Server HTTP Header System</a></li>
<li class="toctree-l4"><a class="reference internal" href="header-functions.en.html">Header Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="mime-headers.en.html">MIME Headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="marshal-buffers.en.html">Marshal Buffers</a></li>
<li class="toctree-l4"><a class="reference internal" href="urls.en.html">URLs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http-transformations/index.en.html">HTTP Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../remap-plugins.en.html">Remap Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../new-protocol-plugins.en.html">New Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugin-interfaces.en.html">Plugin Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../adding-statistics.en.html">Adding Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../example-plugins/index.en.html">Example Plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.en.html">Testing Traffic Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/index.en.html">Appendices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.en.html">Developer’s Guide</a> &raquo;</li>
        
          <li><a href="../index.en.html">Plugin Development</a> &raquo;</li>
        
      <li>HTTP Headers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/developer-guide/plugins/http-headers/index.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="http-headers">
<span id="developer-plugins-http-headers"></span><h1>HTTP Headers<a class="headerlink" href="#http-headers" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="trafficserver-http-header-system.en.html">Traffic Server HTTP Header System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trafficserver-http-header-system.en.html#no-null-terminated-strings">No Null-Terminated Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="trafficserver-http-header-system.en.html#duplicate-mime-fields-are-not-coalesced">Duplicate MIME Fields Are Not Coalesced</a></li>
<li class="toctree-l2"><a class="reference internal" href="trafficserver-http-header-system.en.html#mime-fields-always-belong-to-an-associated-mime-header">MIME Fields Always Belong to an Associated MIME Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="trafficserver-http-header-system.en.html#release-marshal-buffer-handles">Release Marshal Buffer Handles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="header-functions.en.html">Header Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="mime-headers.en.html">MIME Headers</a></li>
<li class="toctree-l1"><a class="reference internal" href="marshal-buffers.en.html">Marshal Buffers</a></li>
<li class="toctree-l1"><a class="reference internal" href="urls.en.html">URLs</a></li>
</ul>
</div>
<p>An <strong>HTTP message</strong> consists of the following:</p>
<ul class="simple">
<li><p>HTTP header</p></li>
<li><p>body</p></li>
<li><p>trailer</p></li>
</ul>
<p>The <strong>HTTP header</strong> consists of:</p>
<ul class="simple">
<li><p>A request or response line</p>
<ul>
<li><p>An HTTP <strong>request line</strong> contains a method, URL, and version</p></li>
<li><p>A <strong>response line</strong> contains a version, status code, and reason
phrase</p></li>
</ul>
</li>
<li><p>A MIME header</p></li>
</ul>
<p>A <strong>MIME header</strong> is comprised of zero or more MIME fields. A <strong>MIME
field</strong> is composed of a field name, a colon, and (zero or more) field
values. The values in a field are separated by commas. An HTTP header
containing a request line is usually referred to as a <strong>request</strong>. The
following example shows a typical request header:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">http://www.tiggerwigger.com/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.0</span>
<span class="na">Proxy-Connection</span><span class="o">:</span> <span class="l">Keep-Alive</span>
<span class="na">User-Agent</span><span class="o">:</span> <span class="l">Mozilla/5.0 [en] (X11; I; Linux 2.2.3 i686)</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.tiggerwigger.com</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, image/png, */*</span>
<span class="na">Accept-Encoding</span><span class="o">:</span> <span class="l">gzip</span>
<span class="na">Accept-Language</span><span class="o">:</span> <span class="l">en</span>
<span class="na">Accept-Charset</span><span class="o">:</span> <span class="l">iso-8859-1, *, utf-8</span>
</pre></div>
</div>
<p>The <strong>response header</strong> for the above request might look like the
following:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.0</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Fri, 13 Nov 2009 06:57:43 GMT</span>
<span class="na">Content-Location</span><span class="o">:</span> <span class="l">http://locutus.tiggerwigger.com/index.html</span>
<span class="na">Etag</span><span class="o">:</span> <span class="l">&quot;07db14afa76be1:1074&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Thu, 05 Nov 2009 20:01:38 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">7931</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/html</span>
<span class="na">Server</span><span class="o">:</span> <span class="l">Microsoft-IIS/4.0</span>
<span class="na">Age</span><span class="o">:</span> <span class="l">922</span>
<span class="na">Proxy-Connection</span><span class="o">:</span> <span class="l">close</span>
</pre></div>
</div>
<p>The following figure illustrates an HTTP message with an expanded HTTP
header.</p>
<p><strong>Figure 10.1. HTTP Request/Response and Header Structure</strong></p>
<div class="figure align-default" id="id1">
<img alt="HTTP Request/Response and Header Structure" src="../../../_images/http_header_struct.jpg" />
<p class="caption"><span class="caption-text">HTTP Request/Response and Header Structure</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The figure below shows example HTTP request and response headers.</p>
<p><strong>Figure 10.2. Examples of HTTP Request and Response Headers</strong></p>
<div class="figure align-default" id="id2">
<img alt="Examples of HTTP Request and Response Headers" src="../../../_images/http_headers.jpg" />
<p class="caption"><span class="caption-text">Examples of HTTP Request and Response Headers</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The marshal buffer or <code class="docutils literal notranslate"><span class="pre">TSMBuffer</span></code> is a heap data structure that stores
parsed URLs, MIME headers, and HTTP headers. You can allocate new
objects out of marshal buffers and change the values within the marshal
buffer. Whenever you manipulate an object, you must require the handle
to the object (<code class="docutils literal notranslate"><span class="pre">TSMLoc</span></code>) and the marshal buffer containing the object
(<code class="docutils literal notranslate"><span class="pre">TSMBuffer</span></code>).</p>
<p><strong>Figure 10.3. Marshal Buffers and Header Locations</strong></p>
<div class="figure align-default" id="id3">
<img alt="Marshal Buffers and Header Locations" src="../../../_images/marshall_buffers.jpg" />
<p class="caption"><span class="caption-text">Marshal Buffers and Header Locations</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The figure above shows the following:</p>
<ul class="simple">
<li><p>The marshal buffer containing the HTTP request, <code class="docutils literal notranslate"><span class="pre">reqest_bufp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TSMLoc</span></code> location pointer for the HTTP header (<code class="docutils literal notranslate"><span class="pre">http_hdr_loc</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TSMLoc</span></code> location pointer for the request URL (<code class="docutils literal notranslate"><span class="pre">url_loc</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TSMLoc</span></code> location pointers for the MIME header (<code class="docutils literal notranslate"><span class="pre">mime_hdr_loc</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TSMLoc</span></code> location pointers for MIME fields (<code class="docutils literal notranslate"><span class="pre">fieldi_loc</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TSMLoc</span></code> location pointer for the next duplicate MIME field
(<code class="docutils literal notranslate"><span class="pre">next_dup_loc</span></code>)</p></li>
</ul>
<p>The diagram also shows that an HTTP header contains pointers to the URL
location and the MIME header location. You can obtain the URL location
from an HTTP header using the function <code class="docutils literal notranslate"><span class="pre">TSHttpHdrUrlGet</span></code>. To work with
MIME headers, you can pass either a MIME header location or an HTTP
header location to MIME header functions . If you pass an HTTP header to
a MIME header function, then the system locates the associated MIME
header and executes the MIME header function on the MIME header
location.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="trafficserver-http-header-system.en.html" class="btn btn-neutral float-right" title="Traffic Server HTTP Header System" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../io/cache-api.en.html" class="btn btn-neutral float-left" title="Cache API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, dev@trafficserver.apache.org.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>