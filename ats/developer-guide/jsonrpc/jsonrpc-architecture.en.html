


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>JSONRPC &mdash; Apache Traffic Server 10.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="JSONRPC handler implementation" href="jsonrpc-handler-development.en.html" />
    <link rel="prev" title="JSONRPC" href="index.en.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Traffic Server
          

          
            
            <img src="../../_static/trans_logo_tm_380x69.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">JSONRPC</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">JSONRPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rpc-architecture">RPC Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#jsonrpc-2-0-protocol">JSONRPC 2.0 Protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#development-guide">Development Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="jsonrpc-handler-development.en.html">JSONRPC handler implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="traffic_ctl-development.en.html">Traffic Control Development Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="RecordError.en.html">JSONRPC Record Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="HandlerError.en.html">API Handler error codes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Traffic Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.en.html">Developer’s Guide</a> &raquo;</li>
        
          <li><a href="index.en.html">JSONRPC</a> &raquo;</li>
        
      <li>JSONRPC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developer-guide/jsonrpc/jsonrpc-architecture.en.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>JSONRPC<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="rpc-architecture">
<h2>RPC Architecture<a class="headerlink" href="#rpc-architecture" title="Permalink to this headline">¶</a></h2>
<div class="section" id="protocol">
<h3>Protocol<a class="headerlink" href="#protocol" title="Permalink to this headline">¶</a></h3>
<p>The RPC mechanism implements the  <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> protrocol. You can refer to this section <a class="reference internal" href="#jsonrpc-protocol">jsonrpc-protocol</a> for more information.</p>
</div>
<div class="section" id="server">
<h3>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ipc">
<h4>IPC<a class="headerlink" href="#ipc" title="Permalink to this headline">¶</a></h4>
<p>The current server implementation runs on an IPC Socket(Unix Domain Socket). This server implements an iterative server style.
The implementation runs on a dedicated <code class="docutils literal notranslate"><span class="pre">TSThread</span></code> and as their style express, this performs blocking calls to all the registered handlers.
Configuration for this particular server style can be found in the admin section <a class="reference internal" href="../../admin-guide/jsonrpc/index.en.html#admnin-jsonrpc-configuration"><span class="std std-ref">Configuration</span></a>.</p>
</div>
</div>
<div class="section" id="using-the-jsonrpc-mechanism">
<h3>Using the JSONRPC mechanism<a class="headerlink" href="#using-the-jsonrpc-mechanism" title="Permalink to this headline">¶</a></h3>
<p>As a user, currently,  <strong class="program">traffic_ctl</strong> excersise this new protocol, please refer to the <a class="reference internal" href="../../appendices/command-line/traffic_ctl_jsonrpc.en.html#traffic-ctl-jsonrpc"><span class="std std-ref">traffic_ctl</span></a> section.</p>
<p>As a developer, please refer to the <a class="reference internal" href="jsonrpc-handler-development.en.html#jsonrpc-development"><span class="std std-ref">JSONRPC handler implementation</span></a> for a more detailed guide.</p>
</div>
<div class="section" id="json-parsing">
<h3>JSON Parsing<a class="headerlink" href="#json-parsing" title="Permalink to this headline">¶</a></h3>
<p>Our JSONRPC  protocol implementation uses lib yamlcpp for parsing incoming and outgoing requests,
this allows the server to accept either JSON or YAML format messages which then will be parsed by the protocol implementation. This seems handy
for user that want to feed Traffic Server with existing yaml configuration without the need to translate yaml into json.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong class="program">traffic_ctl</strong> have an option to read files from disc and push them into Traffic Server through the RPC server. Files should be a
valid <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> message. Please refer to <a class="reference internal" href="../../appendices/command-line/traffic_ctl_jsonrpc.en.html#traffic-ctl-rpc"><span class="std std-ref">traffic_ctl rpc</span></a> for more details.</p>
</div>
<p>In order to programs communicate with Traffic Server , this one implements a simple RPC mechanism to expose all the registered API handlers.</p>
<p>You can check all currtent API by:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>traffic_ctl rpc get-api
</pre></div>
</div>
</div></blockquote>
<p>or by using the <code class="docutils literal notranslate"><span class="pre">show_registered_handlers</span></code> API method.</p>
</div>
</div>
<div class="section" id="jsonrpc-2-0-protocol">
<span id="jsonrpc-protocol"></span><h2>JSONRPC 2.0 Protocol<a class="headerlink" href="#jsonrpc-2-0-protocol" title="Permalink to this headline">¶</a></h2>
<p>JSON-RPC is a stateless, light-weight remote procedure call (RPC) protocol. Primarily this specification defines several data structures
and the rules around their processing. It is transport agnostic in that the concepts can be used within the same process, over sockets,
over http, or in many various message passing environments. It uses JSON (<a class="reference external" href="https://tools.ietf.org/html/rfc4627.html">RFC 4627</a>) as data format.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although most of the protocol specs are granted, we do have implemented some exceptions. All the modifications we have implemented will
be documented.</p>
</div>
<p>There are a set  of mandatory fields that must be included in a <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> message as well as some optional fields, all this is documented here,
you also can find this information in the <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> link.</p>
<div class="section" id="requests">
<span id="jsonrpc-request"></span><h3>Requests<a class="headerlink" href="#requests" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Mandatory fields.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="6%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">jsonrpc</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Protocol version. Traffic Server follows the version 2.0 so this field should be <strong>only</strong> <code class="docutils literal notranslate"><span class="pre">2.0</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">method</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>Method name that is intended to be invoked.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">Optional parameters:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">params</span></code>:</p>
<blockquote>
<div><p>A Structured value that holds the parameter values to be used during the invocation of the method. This member
<strong>may</strong> be omitted. If passed then a parameters for the rpc call <strong>must</strong> be provided as a Structured value.
Either by-position through an Array or by-name through an Object.</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">by-position</span></code> <em>array</em></p>
<p>params <strong>must</strong> be an <code class="docutils literal notranslate"><span class="pre">array</span></code>, containing the values in the server expected order.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;apache&quot;</span><span class="p">,</span> <span class="s2">&quot;traffic&quot;</span><span class="p">,</span> <span class="s2">&quot;server&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Apache&quot;</span>
   <span class="p">},{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Traffic&quot;</span>
   <span class="p">},{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Server&quot;</span>
   <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">by-name</span></code>: <em>object</em></p>
<p>Params <strong>must</strong> be an <code class="docutils literal notranslate"><span class="pre">object</span></code>, with member names that match the server expected parameter names.
The absence of expected names <strong>may</strong> result in an error being generated by the server. The names <strong>must</strong>
match exactly, including case, to the method’s expected parameters.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Apache&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">id</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<blockquote>
<div><p>An identifier established by the Client. If present, the request will be treated as a jsonrpc method and a
response should be expected from the server. If it is not present, the server will treat the request as a
notification and the client should not expect any response back from the server.
<em>Although a |number| can  be specified here we will convert this internally to a |str|. The response will be a |str|.</em></p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="responses">
<span id="jsonrpc-response"></span><h3>Responses<a class="headerlink" href="#responses" title="Permalink to this headline">¶</a></h3>
<p>Although each individual API call will describe the response details and some specific errors, in this section we will describe a high
level protocol response, some defined by the <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> specs and some by Traffic Server</p>
<p>The responses have the following structure:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="8%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">jsonrpc</span></code></td>
<td><em>string|number</em></td>
<td>A Number that indicates the error type that occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">result</span></code></td>
<td>&#160;</td>
<td>Result of the invoked operation. See <a class="reference internal" href="#jsonrpc-result">jsonrpc-result</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td><em>string|number</em></td>
<td>It will be the same as the value of the id member in the <a class="reference internal" href="#jsonrpc-request">jsonrpc-request</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">error</span></code></td>
<td><em>object</em></td>
<td>Error object, it will be present in case of an error. See <a class="reference internal" href="#jsonrpc-error">jsonrpc-error</a></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Example 1:</p>
<p>Request</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Response</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;error&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Missing method field&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;9&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>As the protocol specifies Traffic Server have their own set of error, in the example above it’s clear that the incoming request is missing
the method name, which Traffic Server sends a clear response error back.</p>
<div class="section" id="result">
<span id="jsonrpc-result"></span><h4>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>This member is required and will be present on success.</li>
<li>This member will not exist if there was an error invoking the method.</li>
<li>The value of this member is determined by the method invoked on the Server.</li>
</ul>
<p>In Traffic Server a RPC method that does not report any error and have nothing to send back to the client will use the following format to
express that the call was successfully handled and the command was executed.</p>
<p id="success-response">Example:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;89fc5aea-0740-11eb-82c0-001fc69cc946&quot;</span><span class="p">,</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="hll">   <span class="nt">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&quot;result&quot;:</span> <span class="pre">&quot;success&quot;</span></code> will be set.</p>
</div>
<div class="section" id="errors">
<span id="jsonrpc-error"></span><h4>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h4>
<p>The specs defines the error fields that the client must expect to be sent back from the Server in case of any error.</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="6%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">code</span></code></td>
<td><em>number</em></td>
<td>A Number that indicates the error type that occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">message</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>A String providing a short description of the error.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">data</span></code></td>
<td><em>object</em></td>
<td>This is an optional field that contains additional error data. Dependin on the API this could contain data.</td>
</tr>
</tbody>
</table>
<p># data.</p>
<p>This can be used for nested error so Traffic Server can inform a detailed error.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">code</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The error code. Integer type.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">message</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">string</span></code></td>
<td>The explanatory string for this error.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples:</p>
<p># Fetch a config record response from Traffic Server</p>
<p>Request:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;0f0780a5-0758-4f51-a177-752facc7c0eb&quot;</span><span class="p">,</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;admin_lookup_records&quot;</span><span class="p">,</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="nt">&quot;record_name&quot;</span><span class="p">:</span><span class="s2">&quot;proxy.config.diags.debug.tags&quot;</span><span class="p">,</span>
         <span class="nt">&quot;rec_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;16&quot;</span>
         <span class="p">]</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;result&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;recordList&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;record&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;record_name&quot;</span><span class="p">:</span><span class="s2">&quot;proxy.config.diags.debug.tags&quot;</span><span class="p">,</span>
               <span class="nt">&quot;record_type&quot;</span><span class="p">:</span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
               <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
               <span class="nt">&quot;raw_stat_block&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
               <span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;423&quot;</span><span class="p">,</span>
               <span class="nt">&quot;config_meta&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;access_type&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;update_status&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;update_type&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;checktype&quot;</span><span class="p">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;check_expr&quot;</span><span class="p">:</span><span class="s2">&quot;null&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;record_class&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
               <span class="nt">&quot;overridable&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
               <span class="nt">&quot;data_type&quot;</span><span class="p">:</span><span class="s2">&quot;STRING&quot;</span><span class="p">,</span>
               <span class="nt">&quot;current_value&quot;</span><span class="p">:</span><span class="s2">&quot;rpc&quot;</span><span class="p">,</span>
               <span class="nt">&quot;default_value&quot;</span><span class="p">:</span><span class="s2">&quot;http|dns&quot;</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;0f0780a5-0758-4f51-a177-752facc7c0eb&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p># Getting errors from Traffic Server</p>
<p>Request an invalid record (invalid name)</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;f212932f-b260-4f01-9648-8332200524cc&quot;</span><span class="p">,</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;admin_lookup_records&quot;</span><span class="p">,</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="nt">&quot;record_name&quot;</span><span class="p">:</span><span class="s2">&quot;invalid.record&quot;</span><span class="p">,</span>
         <span class="nt">&quot;rec_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;16&quot;</span>
         <span class="p">]</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;result&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;errorList&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="s2">&quot;2000&quot;</span><span class="p">,</span>
            <span class="nt">&quot;record_name&quot;</span><span class="p">:</span><span class="s2">&quot;invalid.record&quot;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;f212932f-b260-4f01-9648-8332200524cc&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Parse Error.</p>
<p><em>Note that this is an incomplete request</em></p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{[[ invalid json
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;error&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="mi">-32700</span><span class="p">,</span>
      <span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Parse error&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Invalid method invocation.</p>
<p>Request:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;f212932f-b260-4f01-9648-8332200524cc&quot;</span><span class="p">,</span>
   <span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
   <span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;some_non_existing_method&quot;</span><span class="p">,</span>
   <span class="nt">&quot;params&quot;</span><span class="p">:{</span>

   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div></div></blockquote>
<p id="rpc-error-code">Internally we have defined an <code class="docutils literal notranslate"><span class="pre">enum</span></code> class that keep track of the errors that the server will inform in most of the cases.
Some of this errors are already defined by the <a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> specs and some (<code class="docutils literal notranslate"><span class="pre">&gt;=1</span></code>) are defined by Traffic Server.</p>
<dl class="class">
<dt id="_CPPv412RPCErrorCode">
<span id="_CPPv312RPCErrorCode"></span><span id="_CPPv212RPCErrorCode"></span><span id="RPCErrorCode"></span><em class="property">class </em><code class="descname">RPCErrorCode</code><a class="headerlink" href="#_CPPv412RPCErrorCode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Defines the API error codes that will be used in case of any RPC error.</p>
<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode15INVALID_REQUESTE">
<span id="_CPPv3N12RPCErrorCode15INVALID_REQUESTE"></span><span id="_CPPv2N12RPCErrorCode15INVALID_REQUESTE"></span><em class="property">enumerator </em><code class="descname">INVALID_REQUEST</code> = -32600<a class="headerlink" href="#_CPPv4N12RPCErrorCode15INVALID_REQUESTE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode16METHOD_NOT_FOUNDE">
<span id="_CPPv3N12RPCErrorCode16METHOD_NOT_FOUNDE"></span><span id="_CPPv2N12RPCErrorCode16METHOD_NOT_FOUNDE"></span><em class="property">enumerator </em><code class="descname">METHOD_NOT_FOUND</code> = -32601<a class="headerlink" href="#_CPPv4N12RPCErrorCode16METHOD_NOT_FOUNDE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode14INVALID_PARAMSE">
<span id="_CPPv3N12RPCErrorCode14INVALID_PARAMSE"></span><span id="_CPPv2N12RPCErrorCode14INVALID_PARAMSE"></span><em class="property">enumerator </em><code class="descname">INVALID_PARAMS</code> = -32602<a class="headerlink" href="#_CPPv4N12RPCErrorCode14INVALID_PARAMSE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode14INTERNAL_ERRORE">
<span id="_CPPv3N12RPCErrorCode14INTERNAL_ERRORE"></span><span id="_CPPv2N12RPCErrorCode14INTERNAL_ERRORE"></span><em class="property">enumerator </em><code class="descname">INTERNAL_ERROR</code> = -32603<a class="headerlink" href="#_CPPv4N12RPCErrorCode14INTERNAL_ERRORE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode11PARSE_ERRORE">
<span id="_CPPv3N12RPCErrorCode11PARSE_ERRORE"></span><span id="_CPPv2N12RPCErrorCode11PARSE_ERRORE"></span><em class="property">enumerator </em><code class="descname">PARSE_ERROR</code> = -32700<a class="headerlink" href="#_CPPv4N12RPCErrorCode11PARSE_ERRORE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><a class="reference external" href="https://www.jsonrpc.org/specification">JSONRPC</a> defined errors.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode14InvalidVersionE">
<span id="_CPPv3N12RPCErrorCode14InvalidVersionE"></span><span id="_CPPv2N12RPCErrorCode14InvalidVersionE"></span><em class="property">enumerator </em><code class="descname">InvalidVersion</code> = 1<a class="headerlink" href="#_CPPv4N12RPCErrorCode14InvalidVersionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed version is invalid. <strong>must</strong> be 2.0</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode18InvalidVersionTypeE">
<span id="_CPPv3N12RPCErrorCode18InvalidVersionTypeE"></span><span id="_CPPv2N12RPCErrorCode18InvalidVersionTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidVersionType</code> = 2<a class="headerlink" href="#_CPPv4N12RPCErrorCode18InvalidVersionTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed version field type is invalid. <strong>must</strong> be a <strong>string</strong></p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode14MissingVersionE">
<span id="_CPPv3N12RPCErrorCode14MissingVersionE"></span><span id="_CPPv2N12RPCErrorCode14MissingVersionE"></span><em class="property">enumerator </em><code class="descname">MissingVersion</code> = 3<a class="headerlink" href="#_CPPv4N12RPCErrorCode14MissingVersionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Version field is missing from the request. This field is mandatory.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode17InvalidMethodTypeE">
<span id="_CPPv3N12RPCErrorCode17InvalidMethodTypeE"></span><span id="_CPPv2N12RPCErrorCode17InvalidMethodTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidMethodType</code> = 4<a class="headerlink" href="#_CPPv4N12RPCErrorCode17InvalidMethodTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed method field type is invalid. <strong>must</strong> be a <strong>string</strong></p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode13MissingMethodE">
<span id="_CPPv3N12RPCErrorCode13MissingMethodE"></span><span id="_CPPv2N12RPCErrorCode13MissingMethodE"></span><em class="property">enumerator </em><code class="descname">MissingMethod</code> = 5<a class="headerlink" href="#_CPPv4N12RPCErrorCode13MissingMethodE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Method field is missing from the request. This field is mandatory.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode16InvalidParamTypeE">
<span id="_CPPv3N12RPCErrorCode16InvalidParamTypeE"></span><span id="_CPPv2N12RPCErrorCode16InvalidParamTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidParamType</code> = 6<a class="headerlink" href="#_CPPv4N12RPCErrorCode16InvalidParamTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed parameter field type is not valid.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode13InvalidIdTypeE">
<span id="_CPPv3N12RPCErrorCode13InvalidIdTypeE"></span><span id="_CPPv2N12RPCErrorCode13InvalidIdTypeE"></span><em class="property">enumerator </em><code class="descname">InvalidIdType</code> = 7<a class="headerlink" href="#_CPPv4N12RPCErrorCode13InvalidIdTypeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed id field type is invalid.</p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode6NullIdE">
<span id="_CPPv3N12RPCErrorCode6NullIdE"></span><span id="_CPPv2N12RPCErrorCode6NullIdE"></span><em class="property">enumerator </em><code class="descname">NullId</code> = 8<a class="headerlink" href="#_CPPv4N12RPCErrorCode6NullIdE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The passed if is <code class="docutils literal notranslate"><span class="pre">null</span></code></p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N12RPCErrorCode14ExecutionErrorE">
<span id="_CPPv3N12RPCErrorCode14ExecutionErrorE"></span><span id="_CPPv2N12RPCErrorCode14ExecutionErrorE"></span><em class="property">enumerator </em><code class="descname">ExecutionError</code> = 9<a class="headerlink" href="#_CPPv4N12RPCErrorCode14ExecutionErrorE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An error occured during the execution of the RPC call. This error is used as a generic High level error. The details details about
the error, in most cases are specified in the <code class="docutils literal notranslate"><span class="pre">data</span></code> field.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
<div class="section" id="development-guide">
<h2>Development Guide<a class="headerlink" href="#development-guide" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>For details on how to implement JSONRPC  handler and expose them through the rpc server, please refer to <a class="reference internal" href="jsonrpc-handler-development.en.html#jsonrpc-development"><span class="std std-ref">JSONRPC handler implementation</span></a>.</li>
<li>If you need to call a new JSONRPC API through <strong class="program">traffic_ctl</strong>, please refer to <a class="reference internal" href="traffic_ctl-development.en.html#developer-guide-traffic-ctl-development"><span class="std std-ref">Traffic Control Development Guide</span></a></li>
</ul>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../../admin-guide/jsonrpc/index.en.html#admnin-jsonrpc-configuration"><span class="std std-ref">Configuration</span></a>,
<a class="reference internal" href="../../appendices/command-line/traffic_ctl_jsonrpc.en.html#traffic-ctl-jsonrpc"><span class="std std-ref">traffic_ctl</span></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="jsonrpc-handler-development.en.html" class="btn btn-neutral float-right" title="JSONRPC handler implementation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.en.html" class="btn btn-neutral float-left" title="JSONRPC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, dev@trafficserver.apache.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>
 


</body>
</html>