

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Loop &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/override.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="WebSocket" href="websocket.en.html" />
    <link rel="prev" title="SOCKS" href="socks.en.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="event-loop">
<span id="admin-stats-core-eventloop"></span><h1>Event Loop<a class="headerlink" href="#event-loop" title="Permalink to this headline">¶</a></h1>
<p>The core of network processing in Traffic Server is the <a class="reference internal" href="../../../../appendices/glossary.en.html#term-event-loop"><span class="xref std std-term">event loop</span></a>. This loop executes any pending
events and performs I/O operations on network connections. The time spent in the event loop is a
critical component of latency as any network connection has at most one I/O operation per loop. The
general mechanism is</p>
<ul class="simple">
<li><p>Dispatch any pending events.</p></li>
<li><p>Check for any pending I/O activity. This wait a variable amount of time. It is at most
<a class="reference internal" href="../../../files/records.config.en.html#proxy-config-thread-max-heartbeat-mseconds" title="records.config"><code class="xref ts ts-cv docutils literal notranslate"><span class="pre">proxy.config.thread.max_heartbeat_mseconds</span></code></a> milliseconds. It is reduced to the amount of
time until the next scheduled event. Although this is done in milliseconds, system timers are
rarely that accurate.</p></li>
<li><p>For each network connection dispatch an event to the corresponding network virtual connection
object.</p></li>
<li><p>Dispatch any events generated while handling I/O in the previous step</p></li>
</ul>
<p>Event loops that take a long time will have a noticeable impact on transaction latency. There are a
number of statistics gathered to help determine if this is the problem. Because instantaneous values
are not useful, the data is gathered in three different time buckets - 10, 100, and 1000 seconds.
There is a parallel set of statistics for each, and each larger time period includes the smaller
ones. The statistic values are all “for this time period”. For example, the statistic
“proxy.process.eventloop.count.100s” is “the number of event loops executed in the last 100
seconds”.</p>
<p>In general, the maximum loop time will create a floor under response latency. If that is frequently
high then it is likely transactions are experiencing significant latency.</p>
<p class="rubric">10 Second Metrics</p>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-count-10s">
<code class="sig-name descname">proxy.process.eventloop.count.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-count-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of event loops executed in the last 10 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-10s">
<code class="sig-name descname">proxy.process.eventloop.events.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of events dispatched in the last 10 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-min-10s">
<code class="sig-name descname">proxy.process.eventloop.events.min.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-min-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Minimum number of events dispatched in a single loop in the last 10 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-max-10s">
<code class="sig-name descname">proxy.process.eventloop.events.max.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-max-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Maximum number of events dispatched in a single loop in the last 10 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-wait-10s">
<code class="sig-name descname">proxy.process.eventloop.wait.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-wait-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of loops in which the I/O activity check was done with a non-zero time out in the last 10
seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-time-min-10s">
<code class="sig-name descname">proxy.process.eventloop.time.min.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-time-min-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Units</dt>
<dd class="field-even">nanoseconds</dd>
<dt class="field-odd">Datatype</dt>
<dd class="field-odd">integer</dd>
</dl>
<div class="compound">
<blockquote>
<div><p>The minimum amount of time spent in a single loop in the last 10 seconds.</p>
</div></blockquote>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-time-max-10s">
<code class="sig-name descname">proxy.process.eventloop.time.max.10s</code><a class="headerlink" href="#stat-proxy-process-eventloop-time-max-10s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Units</dt>
<dd class="field-even">nanoseconds</dd>
<dt class="field-odd">Datatype</dt>
<dd class="field-odd">integer</dd>
</dl>
<div class="compound">
<blockquote>
<div><p>The maximum amount of time spent in a single loop in the last 10 seconds.</p>
</div></blockquote>
</div>
<p class="rubric">100 Second Metrics</p>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-count-100s">
<code class="sig-name descname">proxy.process.eventloop.count.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-count-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of event loops executed in the last 100 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-100s">
<code class="sig-name descname">proxy.process.eventloop.events.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of events dispatched in the last 100 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-min-100s">
<code class="sig-name descname">proxy.process.eventloop.events.min.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-min-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Minimum number of events dispatched in a single loop in the last 100 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-max-100s">
<code class="sig-name descname">proxy.process.eventloop.events.max.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-max-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Maximum number of events dispatched in a single loop in the last 100 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-wait-100s">
<code class="sig-name descname">proxy.process.eventloop.wait.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-wait-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of loops in which the I/O activity check was done with a non-zero time out in the last 100
seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-time-min-100s">
<code class="sig-name descname">proxy.process.eventloop.time.min.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-time-min-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Units</dt>
<dd class="field-even">nanoseconds</dd>
<dt class="field-odd">Datatype</dt>
<dd class="field-odd">integer</dd>
</dl>
<div class="compound">
<p>The minimum amount of time spent in a single loop in the last 100 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-time-max-100s">
<code class="sig-name descname">proxy.process.eventloop.time.max.100s</code><a class="headerlink" href="#stat-proxy-process-eventloop-time-max-100s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Units</dt>
<dd class="field-even">nanoseconds</dd>
<dt class="field-odd">Datatype</dt>
<dd class="field-odd">integer</dd>
</dl>
<div class="compound">
<p>The maximum amount of time spent in a single loop in the last 100 seconds.</p>
</div>
<p class="rubric">1000 Second Metrics</p>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-count-1000s">
<code class="sig-name descname">proxy.process.eventloop.count.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-count-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of event loops executed in the last 1000 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-1000s">
<code class="sig-name descname">proxy.process.eventloop.events.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of events dispatched in the last 1000 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-min-1000s">
<code class="sig-name descname">proxy.process.eventloop.events.min.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-min-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Minimum number of events dispatched in a single loop in the last 1000 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-events-max-1000s">
<code class="sig-name descname">proxy.process.eventloop.events.max.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-events-max-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Maximum number of events dispatched in a single loop in the last 1000 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-wait-1000s">
<code class="sig-name descname">proxy.process.eventloop.wait.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-wait-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Datatype</dt>
<dd class="field-even">integer</dd>
</dl>
<div class="compound">
<p>Number of loops in which the I/O activity check was done with a non-zero time out in the last 1000
seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-time-min-1000s">
<code class="sig-name descname">proxy.process.eventloop.time.min.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-time-min-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Units</dt>
<dd class="field-even">nanoseconds</dd>
<dt class="field-odd">Datatype</dt>
<dd class="field-odd">integer</dd>
</dl>
<div class="compound">
<p>The minimum amount of time spent in a single loop in the last 1000 seconds.</p>
</div>
<dl class="stat">
<dt class="ts-stat-title" id="stat-proxy-process-eventloop-time-max-1000s">
<code class="sig-name descname">proxy.process.eventloop.time.max.1000s</code><a class="headerlink" href="#stat-proxy-process-eventloop-time-max-1000s" title="Permalink to this definition">¶</a></dt>
</dl>

<dl class="field-list">
<dt class="field-odd">Collection</dt>
<dd class="field-odd">global</dd>
<dt class="field-even">Units</dt>
<dd class="field-even">nanoseconds</dd>
<dt class="field-odd">Datatype</dt>
<dd class="field-odd">integer</dd>
</dl>
<div class="compound">
<p>The maximum amount of time spent in a single loop in the last 1000 seconds.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.en.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../introduction.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation/index.en.html">Installing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration/index.en.html">Proxy Cache Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interaction/index.en.html">Interacting with Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../security/index.en.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../storage/index.en.html">Cache Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../plugins/index.en.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../logging/index.en.html">Logging</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.en.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuring-traffic-server.en.html">Configuring Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../layer-4-routing.en.html">Layer 4 Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../performance/index.en.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../files/index.en.html">Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../jsonrpc/index.en.html">JSONRPC API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.en.html#audience">Audience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.en.html">Administrator’s Guide</a><ul>
  <li><a href="../../index.en.html">Monitoring</a><ul>
  <li><a href="../index.en.html">Statistics</a><ul>
  <li><a href="../core-statistics.en.html">Core Statistics</a><ul>
      <li>Previous: <a href="socks.en.html" title="previous chapter">SOCKS</a></li>
      <li>Next: <a href="websocket.en.html" title="next chapter">WebSocket</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../../_sources/admin-guide/monitoring/statistics/core/eventloop.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>