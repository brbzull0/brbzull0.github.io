

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>parent.config &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/override.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="plugin.config" href="plugin.config.en.html" />
    <link rel="prev" title="logging.yaml" href="logging.yaml.en.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="parent-config">
<h1>parent.config<a class="headerlink" href="#parent-config" title="Permalink to this headline">¶</a></h1>
<p id="std-configfile-parent.config"><span id="std:configfile-parent.config"></span>The <a class="reference internal" href="#std-configfile-parent.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">parent.config</span></code></a> file identifies the parent proxies used in an
cache hierarchy. Use this file to perform the following configuration:</p>
<ul class="simple">
<li><p>Set up parent cache hierarchies, with multiple parents and parent
failover</p></li>
<li><p>Configure selected URL requests to bypass parent proxies</p></li>
</ul>
<p>Traffic Server uses the <a class="reference internal" href="#std-configfile-parent.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">parent.config</span></code></a> file only when the parent
caching option is enabled (refer to <a class="reference internal" href="../configuration/hierarchical-caching.en.html#configuring-traffic-server-to-use-a-parent-cache"><span class="std std-ref">Configuring Traffic Server to Use a Parent Cache</span></a>).</p>
<p>After you modify the <a class="reference internal" href="#std-configfile-parent.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">parent.config</span></code></a> file, run the <a class="reference internal" href="../../appendices/command-line/traffic_ctl.en.html#cmdoption-traffic_ctl-config-arg-reload"><code class="xref std std-option docutils literal notranslate"><span class="pre">traffic_ctl</span> <span class="pre">config</span> <span class="pre">reload</span></code></a>
command to apply your changes.</p>
<div class="section" id="format">
<h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p>Each line in the <a class="reference internal" href="#std-configfile-parent.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">parent.config</span></code></a> file must contain a parent caching
rule. Traffic Server recognizes three space-delimited tags:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">primary_destination</span><span class="o">=</span><span class="n">value</span> <span class="n">secondary_specifier</span><span class="o">=</span><span class="n">value</span>  <span class="n">action</span><span class="o">=</span><span class="n">value</span>
</pre></div>
</div>
<p>The following list shows the possible primary destinations and their
allowed values.</p>
<dl class="simple" id="parent-config-format-dest-domain">
<dt><code class="docutils literal notranslate"><span class="pre">dest_domain</span></code></dt><dd><p>A requested domain name, and its subdomains.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-dest-host">
<dt><code class="docutils literal notranslate"><span class="pre">dest_host</span></code></dt><dd><p>A requested hostname.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-dest-ip">
<dt><code class="docutils literal notranslate"><span class="pre">dest_ip</span></code></dt><dd><p>A requested IP address or range of IP addresses separated by a dash (-).</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-url-regex">
<dt><code class="docutils literal notranslate"><span class="pre">url_regex</span></code></dt><dd><p>A regular expression (regex) to be found in a URL</p>
</dd>
</dl>
<p>The secondary specifiers are optional in the <a class="reference internal" href="#std-configfile-parent.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">parent.config</span></code></a> file. The
following list shows the possible secondary specifiers and their allowed
values. Every line in the <a class="reference internal" href="#std-configfile-parent.config"><code class="xref std std-file docutils literal notranslate"><span class="pre">parent.config</span></code></a> file must contain either a
<code class="docutils literal notranslate"><span class="pre">parent=</span></code> or <code class="docutils literal notranslate"><span class="pre">go_direct=</span></code> directive.</p>
<dl class="simple" id="parent-config-format-port">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>A requested URL port.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-scheme">
<dt><code class="docutils literal notranslate"><span class="pre">scheme</span></code></dt><dd><p>A request URL protocol: <code class="docutils literal notranslate"><span class="pre">http</span></code> or <code class="docutils literal notranslate"><span class="pre">https</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-prefix">
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>A prefix in the path part of a URL.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-suffix">
<dt><code class="docutils literal notranslate"><span class="pre">suffix</span></code></dt><dd><p>A file suffix in the URL.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-method">
<dt><code class="docutils literal notranslate"><span class="pre">method</span></code></dt><dd><p>A request URL method. It can be one of the following:</p>
<ul class="simple">
<li><p>get</p></li>
<li><p>post</p></li>
<li><p>put</p></li>
<li><p>trace</p></li>
</ul>
</dd>
</dl>
<dl class="simple" id="parent-config-format-time">
<dt><code class="docutils literal notranslate"><span class="pre">time</span></code></dt><dd><p>A time range, such as 08:00-14:00, during which the parent cache is
used to serve requests.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-src-ip">
<dt><code class="docutils literal notranslate"><span class="pre">src_ip</span></code></dt><dd><p>A client IP address.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-internal">
<dt><code class="docutils literal notranslate"><span class="pre">internal</span></code></dt><dd><p>A boolean value, <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>, specifying if the rule should
match (or not match) a transaction originating from an internal API. This
is useful to differentiate transaction originating from an ATS plugin.</p>
</dd>
</dl>
<p>The following list shows the possible actions and their allowed values.</p>
<dl id="parent-config-format-parent">
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code> <cite>(hostname or IP address):port[|weight][&amp;hash name][,another host]</cite></dt><dd><p>An ordered list of parent servers, separated by commas or
semicolons. If the request cannot be handled by the last parent
server in the list, then it will be routed to the origin server.
You can specify either a hostname or an IP address, but, you must
specify the port number. If there are multiple IP addresses associated
with the hostname, Traffic Server will treat them as a single entity when tracking
health. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parent</span><span class="o">=</span><span class="s2">&quot;p1.x.com:8080, 192.168.0.3:80, 192.168.0.4:80&quot;</span>
</pre></div>
</div>
<p>An optional weight can be specified after a pipe (<code class="docutils literal notranslate"><span class="pre">|</span></code>). This example
has one parent take 20% (2/(2+3+5)) of the requests, another 30% (3/(2+3+5)),
and the last 50% (5/(2+3+5)):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parent</span><span class="o">=</span><span class="s2">&quot;p1.x.com:8080|2.0, 192.168.0.3:80|3.0, 192.168.0.4:80|5.0&quot;</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">round_robin</span></code> is set to <code class="docutils literal notranslate"><span class="pre">consistent_hash</span></code>, you may add a unique <code class="docutils literal notranslate"><span class="pre">hash</span> <span class="pre">string</span></code>
following the <code class="docutils literal notranslate"><span class="pre">weight</span></code> for each parent.  The <code class="docutils literal notranslate"><span class="pre">hash</span> <span class="pre">string</span></code> must start with <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>
and is used to build both the primary and secondary rings using the <code class="docutils literal notranslate"><span class="pre">hash</span> <span class="pre">string</span></code>
for each parent instead of the parents <code class="docutils literal notranslate"><span class="pre">hostname</span></code> or <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">address</span></code>. This can be
useful so that two different hosts may be used to cache the same requests.  Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parent</span><span class="o">=</span><span class="s2">&quot;p1.x.com:80|1.0&amp;abcdef, p2.x.com:80|1.0&amp;xyzl, p3.x.com:80|1.0&amp;ldffg&quot;</span> <span class="n">round_robin</span><span class="o">=</span><span class="n">consistent_hash</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="parent-config-format-secondary-parent">
<dt><code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code></dt><dd><p>An optional ordered list of secondary parent servers in the same format as parent.  This
optional list may only be used when <code class="docutils literal notranslate"><span class="pre">round_robin</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">consistent_hash</span></code>.  If the request cannot be handled by the
first parent server chosen from the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list, then the
request will be re-tried from a server found in this list using a
consistent hash of the url. The parent servers in this list will
be exhausted before the selection function will revert to trying
alternative parents in the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">secondary_mode</span></code></dt><dd><p>One of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> This is the default. The parent selection will first
attempt to choose a parent from the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list. If the
chosen parent is not available or marked down then another
parent will be chosen from the <code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code> list.
Choices in the <code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code> list will be exhausted
before attempting to choose another parent from the <code class="docutils literal notranslate"><span class="pre">parent</span></code>
list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> The parent selection will first attempt to choose a parent
from the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list. If the chosen parent is not available
or marked down then another parent will be chosen from the
<code class="docutils literal notranslate"><span class="pre">parent</span></code> list.  Choices in the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list will be
exhausted before attempting to choose another parent from the
<code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code> list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> The parent selection will first attempt to choose a parent
from the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list.</p>
<ul>
<li><p>If the chosen parent is marked down then another parent will
be chosen from the <code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code> list. The
<code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code> list will be exhausted before attempting
to choose another parent in the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list. This depends
on taking a parent down from a particular EDGE using traffic_ctl
like <code class="docutils literal notranslate"><span class="pre">traffic_ctl</span> <span class="pre">host</span> <span class="pre">down</span> <span class="pre">sample.server.com</span></code>. This will be
useful during maintenance window or as a debugging aid when a
user wants to take down specific parents. Taking parents down
using <code class="docutils literal notranslate"><span class="pre">traffic_ctl</span></code> will cause the EDGE to ignore those parent
immediately from parent selection logic.</p></li>
<li><p>If the chosen parent is unavailable but not marked down then
another parent will be chosen from the <code class="docutils literal notranslate"><span class="pre">parent</span></code> list. The
<code class="docutils literal notranslate"><span class="pre">parent</span></code> list will be exhausted before attempting to choose
another parent in the <code class="docutils literal notranslate"><span class="pre">secondary_parent</span></code> list.</p></li>
</ul>
</li>
</ul>
</dd>
</dl>
<dl class="simple" id="parent-config-format-parent-is-proxy">
<dt><code class="docutils literal notranslate"><span class="pre">parent_is_proxy</span></code></dt><dd><p>One of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> - This is the default.  The list of parents and secondary parents
are proxy cache servers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code> - The list of parents and secondary parents are the origin
servers <code class="docutils literal notranslate"><span class="pre">go_direct</span></code> flag is ignored and origins are selected using
the specified <code class="docutils literal notranslate"><span class="pre">round_robin</span></code> algorithm.  The FQDN is removed from
the http request line.</p></li>
</ul>
</dd>
</dl>
<dl class="simple" id="parent-config-format-parent-retry">
<dt><code class="docutils literal notranslate"><span class="pre">parent_retry</span></code></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">simple_retry</span></code> - If the parent returns a 404 response or if the response matches
a list of http 4xx responses defined in <code class="docutils literal notranslate"><span class="pre">simple_server_retry_responses</span></code> on a request
a new parent is selected and the request is retried.  The number of retries is controlled
by <code class="docutils literal notranslate"><span class="pre">max_simple_retries</span></code> which is set to 1 by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unavailable_server_retry</span></code> - If the parent returns a 503 response or if the response matches
a list of http 5xx responses defined in <code class="docutils literal notranslate"><span class="pre">unavailable_server_retry_responses</span></code>, the currently selected
parent is marked down and a new parent is selected to retry the request.  The number of
retries is controlled by <code class="docutils literal notranslate"><span class="pre">max_unavailable_server_retries</span></code> which is set to 1 by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">both</span></code> - This enables both <code class="docutils literal notranslate"><span class="pre">simple_retry</span></code> and <code class="docutils literal notranslate"><span class="pre">unavailable_server_retry</span></code> as described above.</p></li>
</ul>
</dd>
</dl>
<dl class="simple" id="parent-config-format-simple-server-retry-responses">
<dt><code class="docutils literal notranslate"><span class="pre">simple_server_retry_responses</span></code></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">parent_retry</span></code> is set to either <code class="docutils literal notranslate"><span class="pre">simple_retry</span></code> or <code class="docutils literal notranslate"><span class="pre">both</span></code>, this parameter is a comma separated list of
http 4xx response codes that will invoke the <code class="docutils literal notranslate"><span class="pre">simple_retry</span></code> described in the <code class="docutils literal notranslate"><span class="pre">parent_retry</span></code> section. By
default, <code class="docutils literal notranslate"><span class="pre">simple_server_retry_responses</span></code> is set to 404.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-unavailable-server-retry-responses">
<dt><code class="docutils literal notranslate"><span class="pre">unavailable_server_retry_responses</span></code></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">parent_retry</span></code> is set to either <code class="docutils literal notranslate"><span class="pre">unavailable_server_retry</span></code> or
<code class="docutils literal notranslate"><span class="pre">both</span></code>, this parameter is a comma separated list of http 5xx response codes that will invoke the
<code class="docutils literal notranslate"><span class="pre">unavailable_server_retry</span></code> described in the <code class="docutils literal notranslate"><span class="pre">parent_retry</span></code> section.  By default, <code class="docutils literal notranslate"><span class="pre">unavailable_server_retry_responses</span></code>
is set to 503.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-max-simple-retries">
<dt><code class="docutils literal notranslate"><span class="pre">max_simple_retries</span></code></dt><dd><p>By default the value for <code class="docutils literal notranslate"><span class="pre">max_simple_retries</span></code> is 1.  It may be set to any value in the range 1 to 5.
If <code class="docutils literal notranslate"><span class="pre">parent_retry</span></code> is set to <code class="docutils literal notranslate"><span class="pre">simple_retry</span></code> or <code class="docutils literal notranslate"><span class="pre">both</span></code> a 404 response
from a parent origin server will cause the request to be retried using a new parent at most 1 to 5
times as configured by <code class="docutils literal notranslate"><span class="pre">max_simple_retries</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-max-unavailable-server-retries">
<dt><code class="docutils literal notranslate"><span class="pre">max_unavailable_server_retries</span></code></dt><dd><p>By default the value for <code class="docutils literal notranslate"><span class="pre">max_unavailable_server_retries</span></code> is 1.  It may be set to any value in the range 1 to 5.
If <code class="docutils literal notranslate"><span class="pre">parent_retry</span></code> is set to <code class="docutils literal notranslate"><span class="pre">unavailable_server_retries</span></code> or <code class="docutils literal notranslate"><span class="pre">both</span></code> a 503 response
by default or any http 5xx response listed in the list <code class="docutils literal notranslate"><span class="pre">unavailable_server_retry_responses</span></code> from a parent origin server will
cause the request to be retried using a new parent after first marking the current parent down.  The request
will be retried at most 1 to 5 times as configured by <code class="docutils literal notranslate"><span class="pre">max_unavailable_server_retries</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="parent-config-format-round-robin">
<dt><code class="docutils literal notranslate"><span class="pre">round_robin</span></code></dt><dd><p>One of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> - Traffic Server determines the parent based on client IP address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strict</span></code> - Traffic Server machines serve requests strictly in
turn. For example: machine <code class="docutils literal notranslate"><span class="pre">proxy1</span></code> serves the first request,
<code class="docutils literal notranslate"><span class="pre">proxy2</span></code> serves the second request, and so on.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code> - Round robin selection does not occur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">consistent_hash</span></code> - consistent hash of the url so that one parent
is chosen for a given url. If a parent is down, the traffic that
would go to the down parent is rehashed amongst the remaining parents.
The other traffic is unaffected. Once the downed parent becomes
available, the traffic distribution returns to the pre-down
state.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latched</span></code> - The first parent in the list is marked as primary and is
always chosen until connection errors cause it to be marked down.  When
this occurs the next parent in the list then becomes primary.  The primary
will wrap back to the first parent in the list when it is the last parent
in the list and is marked down due to a connection error.  Newly chosen
primary parents marked as unavailable will then be restored if the failure
retry time has elapsed and the transaction using the primary succeeds.</p></li>
</ul>
</dd>
</dl>
<dl class="simple" id="parent-config-format-go-direct">
<dt><code class="docutils literal notranslate"><span class="pre">go_direct</span></code></dt><dd><p>One of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code> - requests bypass parent hierarchies and go directly to
the origin server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code> - requests do not bypass parent hierarchies.</p></li>
</ul>
</dd>
</dl>
<dl class="simple" id="parent-config-format-qstring">
<dt><code class="docutils literal notranslate"><span class="pre">qstring</span></code></dt><dd><p>One of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">consider</span></code> - Use the query string when finding a parent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore</span></code> - Do not consider the query string when finding a parent. This
is especially useful when using the <code class="docutils literal notranslate"><span class="pre">consistent_hash</span></code> selection strategy,
and a random query string would prevent a consistent parent selection.</p></li>
</ul>
</dd>
</dl>
<dl id="parent-config-format-ignore-self-detect">
<dt><code class="docutils literal notranslate"><span class="pre">ignore_self_detect</span></code></dt><dd><blockquote>
<div><p>One of the following values:</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">true</span></code> - Ignore the marked down status of a host, typically the local host,</dt><dd><p>when the reason code is Reason::SELF_DETECT and use the host as if it were
marked up.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code> - The default.  Do not ignore the host status.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The following rule configures a parent cache hierarchy consisting of
Traffic Server (which is the child) and two parents, <code class="docutils literal notranslate"><span class="pre">p1.x.com</span></code> and
<code class="docutils literal notranslate"><span class="pre">p2.x.com</span></code>. Traffic Server forwards the requests it cannot serve to
the parent servers <code class="docutils literal notranslate"><span class="pre">p1.x.com</span></code> and <code class="docutils literal notranslate"><span class="pre">p2.x.com</span></code> in a round-robin
fashion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dest_domain</span><span class="o">=.</span> <span class="n">method</span><span class="o">=</span><span class="n">get</span> <span class="n">parent</span><span class="o">=</span><span class="s2">&quot;p1.x.com:8080; p2.y.com:8080&quot;</span> <span class="n">round_robin</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>The following rule configures Traffic Server to route all requests
containing the regular expression <code class="docutils literal notranslate"><span class="pre">politics</span></code> and the path
<code class="docutils literal notranslate"><span class="pre">/viewpoint</span></code> directly to the origin server (bypassing any parent
hierarchies):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url_regex</span><span class="o">=</span><span class="n">politics</span> <span class="n">prefix</span><span class="o">=/</span><span class="n">viewpoint</span> <span class="n">go_direct</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>The following configures Traffic Server to route http requests for example.com (neither
https nor www.example.com would match) through parent servers. Each url will be hashed
to a specific parent. If the chosen parent has been marked down, a parent from the
secondary ring will be chosen for the retry.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dest_host</span><span class="o">=</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">scheme</span><span class="o">=</span><span class="n">http</span> <span class="n">parent</span><span class="o">=</span><span class="s2">&quot;p1.x.com:80,p2.x.com:80&quot;</span> <span class="n">secondary_parent</span><span class="o">=</span><span class="s2">&quot;p3.x.com:80,p4.x.com:80&quot;</span> <span class="n">round_robin</span><span class="o">=</span><span class="n">consistent_hash</span> <span class="n">go_direct</span><span class="o">=</span><span class="n">false</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.en.html">Administrator’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.en.html">Installing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.en.html">Proxy Cache Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interaction/index.en.html">Interacting with Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.en.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.en.html">Cache Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.en.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.en.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../monitoring/index.en.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuring-traffic-server.en.html">Configuring Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layer-4-routing.en.html">Layer 4 Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance/index.en.html">Performance Tuning</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.en.html">Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonrpc/index.en.html">JSONRPC API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.en.html#audience">Audience</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide/index.en.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.en.html">Administrator’s Guide</a><ul>
  <li><a href="index.en.html">Configuration Files</a><ul>
      <li>Previous: <a href="logging.yaml.en.html" title="previous chapter">logging.yaml</a></li>
      <li>Next: <a href="plugin.config.en.html" title="next chapter">plugin.config</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/files/parent.config.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>