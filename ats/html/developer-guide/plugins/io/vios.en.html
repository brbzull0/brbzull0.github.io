

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VIOs &#8212; Apache Traffic Server 10.0.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/override.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="IO Buffers" href="io-buffers.en.html" />
    <link rel="prev" title="Transformations" href="transformations.en.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="vios">
<span id="developer-plugins-io-vios"></span><h1>VIOs<a class="headerlink" href="#vios" title="Permalink to this headline">¶</a></h1>
<p>A <strong>VIO</strong>, or <strong>virtual IO</strong>, is a description of an IO operation that’s
currently in progress. The VIO data structure is used by vconnection
users to determine how much progress has been made on a particular IO
operation and to re-enable an IO operation when it stalls due to buffer
space issues. VIOs are used by vconnection implementers to determine the
buffer for an IO operation, how much work to do on the IO operation, and
which continuation to call back when progress on the IO operation is
made.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">TSVIO</span></code> data structure itself is opaque, but it could be defined
as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">TSCont</span> <span class="n">continuation</span><span class="p">;</span>
    <span class="n">TSVConn</span> <span class="n">vconnection</span><span class="p">;</span>
    <span class="n">TSIOBufferReader</span> <span class="n">reader</span><span class="p">;</span>
    <span class="n">TSMutex</span> <span class="n">mutex</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">nbytes</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ndone</span><span class="p">;</span>
<span class="p">}</span> <span class="o">*</span><span class="n">TSVIO</span><span class="p">;</span>
</pre></div>
</div>
<p>The VIO functions below access and modify various parts of the data
structure.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../api/functions/TSVIOBufferGet.en.html#c.TSVIOBufferGet" title="TSVIOBufferGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIOBufferGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIOVConnGet.en.html#c.TSVIOVConnGet" title="TSVIOVConnGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIOVConnGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIOContGet.en.html#c.TSVIOContGet" title="TSVIOContGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIOContGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIOMutexGet.en.html#c.TSVIOMutexGet" title="TSVIOMutexGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIOMutexGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIONBytesGet.en.html#c.TSVIONBytesGet" title="TSVIONBytesGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIONBytesGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIONBytesSet.en.html#c.TSVIONBytesSet" title="TSVIONBytesSet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIONBytesSet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIONDoneGet.en.html#c.TSVIONDoneGet" title="TSVIONDoneGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIONDoneGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIONDoneSet.en.html#c.TSVIONDoneSet" title="TSVIONDoneSet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIONDoneSet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIONTodoGet.en.html#c.TSVIONTodoGet" title="TSVIONTodoGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIONTodoGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIOReaderGet.en.html#c.TSVIOReaderGet" title="TSVIOReaderGet"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIOReaderGet()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../api/functions/TSVIOReenable.en.html#c.TSVIOReenable" title="TSVIOReenable"><code class="xref c c-func docutils literal notranslate"><span class="pre">TSVIOReenable()</span></code></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/trans_logo_tm_380x69.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">Apache Traffic Server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../preface/index.en.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started/index.en.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/index.en.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.en.html">Administrator’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.en.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.en.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../release-process/index.en.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/index.en.html">Contributing to Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing-with-vagrant/index.en.html">Using Vagrant to Test Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging/index.en.html">Debugging and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threads-and-events.en.html">Threads and Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cache-architecture/index.en.html">Cache Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging-architecture/index.en.html">Logging Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internal-libraries/index.en.html">Internal libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.en.html">Plugin Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config-vars.en.html">Configuration Variable Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/index.en.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../continuous-integration/index.en.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../documentation/index.en.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../host-resolution-proposal.en.html">Host Resolution Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-session-architecture.en.html">An Overview Client Sessions and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../core-architecture/index.en.html">Core Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../design-documents/index.en.html">Design Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../layout/index.en.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing/index.en.html">Testing Traffic Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonrpc/index.en.html">JSONRPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/index.en.html">Appendices</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.en.html">Developer’s Guide</a><ul>
  <li><a href="../index.en.html">Plugin Development</a><ul>
  <li><a href="index.en.html">IO</a><ul>
      <li>Previous: <a href="transformations.en.html" title="previous chapter">Transformations</a></li>
      <li>Next: <a href="io-buffers.en.html" title="next chapter">IO Buffers</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Apache Traffic Server</span>
    v: 10.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl id="lang-list">
      <dt>Languages</dt>
    </dl>
    <dl id="version-list">
      <dt>Versions</dt>
    </dl>
  </div>
</div>
<script>
$(function() {
  function update_langlist (json) {
    for (var lang in json) {
      $('#lang-list').append('<dd><a href="/' + lang + '/latest/">' + json[lang]['name'] + '</a></dd>');
    }
    for (var i in json[curlang]['versions']) {
      var ver = json[curlang]['versions'][i];
      $('#version-list').append('<dd><a href="/' + curlang + '/' + ver + '/">' + ver + '</a></dd>');
    }
  }
  var curlang = "None" == "None" ? "en" : "None";
  $.ajax({
    'url':      "/en/latest/_static/languages.json",
    'dataType': "json",
    'success':  function (json) { update_langlist(json) },
    'error':    function (xhr,errstr,e) {
      $.ajax({
        'url':      "/_static/languages.json",
        'dataType': "json",
        'success':  function (json) { update_langlist(json) }
      })
    }
  });
});
</script>

    <div class="footer">
      &copy;2021, dev@trafficserver.apache.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/developer-guide/plugins/io/vios.en.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    

  </body>
</html>